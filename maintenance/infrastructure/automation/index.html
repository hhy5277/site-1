<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="" />
    <title>Automation</title>
    
    <link rel='icon' type='image/png' href='/assets/favicon.png'></link>

    
      <link href="/site.dc201ebb7bd374c73647.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/739f31bc4e0424d31760aac7e7df200e.jpg);"></div><h1 class="post__heading">Automation</h1><div class="header-extra"><a href="https://pixabay.com/en/robot-arm-technology-robot-arm-2791670/">jarmoluk (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/introduction/">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/packaging/">Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/where-to-start/">Where to Start Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/anatomy/">Anatomy of a Package</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/publishing/">Publishing Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/building/">Building Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/standalone-builds/">Standalone Builds</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/code-quality/">Code Quality</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/linting/">Linting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/code-formatting/">Code Formatting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/typing/">Typing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/dependencies/">Dependencies</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/infrastructure/">Infrastructure</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/processes/">Processes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/continuous-integration/">Continuous Integration</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Automation</span></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/documentation/">Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/readme/">README</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/site/">Site</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/api/">API Documentation and Style Guides</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/linting/">Linting</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/future/">Future</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/longevity/">Longevity</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/marketing/">Marketing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/appendices/monorepos/">Managing Packages Using a Monorepo</a></li></ul><div><div class="buy-container"><a href="/react/introduction"><img alt="React book cover" class="sidebar-cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/webpack/foreword"><img alt="Webpack book cover" class="sidebar-cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></p></div></div></div><div class="chapter"><div class="post__content"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></blockquote></div><div class="chapter-content"><p>When to apply automation. pros/cons</p>
<h2 class="header"><a class="header-anchor" href="#git-hooks" id="git-hooks"></a><span class="text">Git Hooks</span><a class="header-anchor-select" href="#git-hooks">#</a></h2>
<p>TODO: Mention commit hooks that can check things like commit message syntax and run tests. This allows rebase workflow.</p>
<h2 class="header"><a class="header-anchor" href="#automating-linting-with-lint-staged" id="automating-linting-with-lint-staged"></a><span class="text">Automating Linting with lint-staged</span><a class="header-anchor-select" href="#automating-linting-with-lint-staged">#</a></h2>
<p><a href="https://github.com/okonet/lint-staged">lint-staged</a> runs linters only for changed files before each commit which makes linting mandatory and fast. It uses <code>pre-commit</code> Git hook and you can map any file extension to a shell command. You can also configure it to autofix code.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>lint-staged works with <a href="https://github.com/facebook/flow/releases/tag/v0.48.0">Flow since v0.48.0</a>.</blockquote><blockquote class="warning"><i class="icon-attention"></i>You still need to run linters on your CI server: it’s possible to avoid the <code>pre-commit</code> hook with <code>git commit --no-verify</code> in the GitHub UI.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-lint-staged" id="setting-up-lint-staged"></a><span class="text">Setting Up lint-staged</span><a class="header-anchor-select" href="#setting-up-lint-staged">#</a></h3>
<p>Let’s install lint-staged and <a href="https://www.npmjs.com/package/husky">husky</a> to manage Git hooks:</p>
<pre><code class="lang-bash">npm <span class="token function" >install</span> lint-staged husky --save-dev
</code></pre>
<p>Update your <em>package.json</em> like this:</p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  <span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"precommit"</span><span class="token operator" >:</span> <span class="token string" >"lint-staged"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token property" >"lint-staged"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    "*.js"<span class="token operator" >:</span> <span class="token punctuation" >[</span>
      <span class="token string" >"eslint --fix"</span><span class="token punctuation" >,</span>
      <span class="token string" >"jest --bail --findRelatedTests"</span><span class="token punctuation" >,</span>
      <span class="token string" >"prettier --write"</span><span class="token punctuation" >,</span>
      <span class="token string" >"git add"</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    "*.scss"<span class="token operator" >:</span> <span class="token punctuation" >[</span>
      <span class="token string" >"stylefmt"</span><span class="token punctuation" >,</span>
      <span class="token string" >"stylelint --syntax scss"</span><span class="token punctuation" >,</span>
      <span class="token string" >"git add"</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>This configuration will perform the following steps:</p>
<ul>
<li><p>Every time you commit a <em>.js</em> file:</p>
<ol>
<li>Run ESLint with autofixing on files you are committing.</li>
<li>Run Jest tests related to files you are committing.</li>
<li>Format files you are committing with Prettier. (See the <em>Code Formatting</em> chapter for more details.)</li>
<li>Add changes caused by autofixing and reformatting to your commit.</li>
</ol>
</li>
<li><p>Every time you commit an <em>.scss</em> file:</p>
<ol>
<li>Format files you are committing with stylefmt.</li>
<li>Run stylelint on files you are committing.</li>
<li>Add changes caused by reformatting to your commit.</li>
</ol>
</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#automating-releases" id="automating-releases"></a><span class="text">Automating Releases</span><a class="header-anchor-select" href="#automating-releases">#</a></h2>
<p>To make it easier to comply with SemVer, <a href="https://www.npmjs.com/package/next-ver">next-ver</a> can compute the next version you should use and update it for you. <a href="https://www.npmjs.com/package/commitizen">commitizen</a> goes further and allows change log generation and automated releases. <a href="https://www.npmjs.com/package/semantic-release">semantic-release</a> allows you to automatically make new npm releases and publish release notes to GitHub.</p>
<p>All these tools rely on commit message convention.</p>
<h2 class="header"><a class="header-anchor" href="#commit-message-convention" id="commit-message-convention"></a><span class="text">Commit Message Convention</span><a class="header-anchor-select" href="#commit-message-convention">#</a></h2>
<p>Commit message conventions lets the tooling to figure out types of the changes you made. It can help with change log generation and allow automated releases over manual ones. Annotating your commits well is a good practice in any case as it makes it easier to debug your code later.</p>
<p>You can invent your own convention or adopt a popular one like AngularJS.</p>
<p>In <a href="https://docs.google.com/document/d/1QrDFcIiPjSLDn3EL15IJygNPiHORgU1_OOAqWjiDU5Y/edit">AngularJS convention</a> each commit message consists of:</p>
<ul>
<li>Type: <code>feat</code> for a new feature, <code>fix</code> for a bug fix, <code>docs</code> for documentation, <code>chore</code> for maintenance, etc.</li>
<li>Subject: short change description.</li>
<li>Body (optional): long change description.</li>
<li>Footer (optional): breaking changes, GitHub issues references, etc.</li>
</ul>
<p>For example:</p>
<pre><code>feat<span class="token punctuation" >(</span><span class="token variable" >$compile</span><span class="token punctuation" >)</span>: simplify isolate scope bindings

Changed the isolate scope binding options to:
  - @attr - attribute binding <span class="token punctuation" >(</span>including interpolation<span class="token punctuation" >)</span>
  - <span class="token operator" >=</span>model - by-directional model binding
  - <span class="token operator" >&amp;</span><span class="token function" >expr</span> - expression execution binding

This change simplifies the terminology as well as
number of choices available to the developer. It
also supports local name aliasing from the parent.

BREAKING CHANGE: isolate scope bindings definition has changed and
the inject option <span class="token keyword" >for</span> the directive controller injection was removed.

To migrate the code follow the example below:

Before:

scope: <span class="token punctuation" >{</span>
  myAttr: <span class="token string" >'attribute'</span>,
  myBind: <span class="token string" >'bind'</span>,
  myExpression: <span class="token string" >'expression'</span>,
  myEval: <span class="token string" >'evaluate'</span>,
  myAccessor: <span class="token string" >'accessor'</span>
<span class="token punctuation" >}</span>

After:

scope: <span class="token punctuation" >{</span>
  myAttr: <span class="token string" >'@'</span>,
  myBind: <span class="token string" >'@'</span>,
  myExpression: <span class="token string" >'&amp;'</span>,
  // myEval - usually not useful, but <span class="token keyword" >in</span> cases where the expression is assignable, you can use <span class="token string" >'='</span>
  myAccessor: <span class="token string" >'='</span> // <span class="token keyword" >in</span> directive's template change myAccessor<span class="token punctuation" >(</span><span class="token punctuation" >)</span> to myAccessor
<span class="token punctuation" >}</span>
</code></pre><p>?&gt; I think it&#39;s worth pushing the present imperative tense for commit messages. Here&#39;s a good article on this topic: <a href="https://chris.beams.io/posts/git-commit/">https://chris.beams.io/posts/git-commit/</a> Thus we describe what a commit will <em>do</em>, if applied.</p>
<h2 class="header"><a class="header-anchor" href="#semantic-release" id="semantic-release"></a><span class="text">Semantic Release</span><a class="header-anchor-select" href="#semantic-release">#</a></h2>
<p>By default semantic-release makes everything automatically:</p>
<ul>
<li>Runs on a CI server after each commit to the <code>master</code> branch.</li>
<li>After each successful build it analyzes new commits and see if there’s something to publish.</li>
<li>Determines a release type (PATCH, MINOR or MAJOR) by analyzing commit messages written using AngularJS conventions.</li>
<li>Generates a change log from important commits (skips documentation and maintenance commits).</li>
<li>Publishes a new package version to npm.</li>
<li>Publishes change log to GitHub Releases page.</li>
</ul>
<p>To use semantic-release you need to install its command line tool:</p>
<pre><code class="lang-bash">npm <span class="token function" >install</span> -g semantic-release-cli
</code></pre>
<p>Then run it in your project folder:</p>
<pre><code class="lang-bash">semantic-release-cli setup
</code></pre>
<p>Enter your npm and GitHub credentials, choose type of your CI server.</p>
<p>And now if you make a new commit with a message like <code>fix: allow doodad to work with zero</code>, semantic-release will publish a new PATCH version to npm and publish release notes based on the commit message to GitHub.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>You can customize every step of this process with plugins. For example, <a href="http://blog.sapegin.me/all/semantic-release">make only PATCH releases automatically</a> and allow user to decide when to make MINOR and MAJOR releases and edit change logs manually.</blockquote><h2 class="header"><a class="header-anchor" href="#danger" id="danger"></a><span class="text">Danger</span><a class="header-anchor-select" href="#danger">#</a></h2>
<p>TODO</p>
<ul>
<li>What problems does Danger solve</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#bots" id="bots"></a><span class="text">Bots</span><a class="header-anchor-select" href="#bots">#</a></h2>
<p>TODO</p>
<ul>
<li><a href="https://github.com/babel/babel-bot">https://github.com/babel/babel-bot</a></li>
<li><a href="https://github.com/open-bot/open-bot">https://github.com/open-bot/open-bot</a></li>
<li><a href="https://github.com/probot/probot">https://github.com/probot/probot</a></li>
<li>What problems bots solve</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>TODO</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/86efc2fc615c7bf6e0eee2f0aa97f7fe.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/maintenance/infrastructure/continuous-integration/">Continuous Integration</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/cc59e6eaf475b9ccc235a71c68036b96.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/maintenance/documentation/">Documentation</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Documentation" href="/maintenance/documentation/"><i class="icon-right-open"></i></a><a class="previous-page" title="Continuous Integration" href="/maintenance/infrastructure/continuous-integration/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/training/">Get training</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-react">Buy the ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></li><li><a class="blog-teaser" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></li><li><a class="blog-teaser" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li><a class="blog-teaser" href="/blog/react-next-2017/">Experiences on React Next 2017</a></li><li><a class="blog-teaser" href="/blog/frint-interview/">FrintJS - Build reactive applications with React and RxJS - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/neutrino-interview/">Neutrino - Create modern JavaScript applications with minimal configuration - Interview with Eli Perelman</a></li><li><a class="blog-teaser" href="/blog/idyll-interview/">Idyll - Narratives for the web - Interview with Matthew Conlen</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></div>

    
  </body>
</html>
