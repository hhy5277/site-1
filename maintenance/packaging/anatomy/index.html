<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="" />
    <title>Anatomy of a Package</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.676c94a68a8b71ec1daf.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="page"><div class="header-image" style="background-image:url(/0bb2e3b419ef7bec150f59160de61591.jpg)"></div><h1 class="page__heading">Anatomy of a Package</h1><div class="header-extra"><a href="https://pixabay.com/en/family-artist-s-mannequin-figure-2755604/">Mimzy (Public Domain)</a></div><div class="page__container"><div class="page__sidebar"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/introduction/">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/packaging/">Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/where-to-start/">Where to Start Packaging</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Anatomy of a Package</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/publishing/">Publishing Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/building/">Building Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/standalone-builds/">Standalone Builds</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/managing-dependencies/">Managing Dependencies</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/code-quality/">Code Quality</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/linting/">Linting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/code-formatting/">Code Formatting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/typing/">Typing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/testing/">Testing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/infrastructure/">Infrastructure</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/processes/">Processes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/continuous-integration/">Continuous Integration</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/automation/">Automation</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/documentation/">Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/readme/">README</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/change-log/">Change Logs</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/site/">Site</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/api/">API Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/misc/">Other Types of Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/linting/">Linting and Formatting</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/future/">Future</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/longevity/">Longevity</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/marketing/">Marketing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/appendices/monorepos/">Managing Packages Using a Monorepo</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/appendices/customizing-eslint/">Customizing ESLint</a></li></ul></div><div class="toc-nav__section"></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></blockquote></div><div class="chapter-content"><p>A minimal npm package should contain metadata in a <em>package.json</em> file and an associated source file (usually <em>index.js</em>). In practice, packages contain more than that and you will have at least a license file and the source in various formats.</p>
<p>Often projects contain more files than are required to execute them. To keep package downloads fast, you can exclude files related to documentation and testing as those can be reached through the package site.</p>
<h2 class="header"><a class="header-anchor" href="#understanding-_package-json_" id="understanding-_package-json_"></a><span class="text">Understanding <em>package.json</em></span><a class="header-anchor-select" href="#understanding-_package-json_">#</a></h2>
<p>All packages come with a <em>package.json</em> file that contains package metadata, like information about the author, link to a bug tracker and package dependencies. The <a href="https://docs.npmjs.com/files/package.json">official documentation</a> covers them in detail.</p>
<p>The examples below is an annotated part of <em>package.json</em> from the SurviveJS <a href="https://github.com/survivejs/react-component-boilerplate">React component boilerplate</a>.</p>
<blockquote class="warning"><i class="icon-attention"></i>npm doesn’t support comments in JSON even though we’re using them below. Some tools use extended notations, such as <a href="http://json5.org/">JSON5</a>, that do.</blockquote><h3 class="header"><a class="header-anchor" href="#description-fields" id="description-fields"></a><span class="text">Description Fields</span><a class="header-anchor-select" href="#description-fields">#</a></h3>
<p>The description fields describe who created the package, what it does, search keywords, and more.</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  /* Name of the project */
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"react-component-boilerplate"</span><span class="token punctuation">,</span>

  /* Brief description */
  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Boilerplate for React.js components"</span><span class="token punctuation">,</span>

  /* Who is the author + optional email + optional site */
  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Juho Vepsäläinen &lt;email goes here> (site goes here)"</span><span class="token punctuation">,</span>

  /* Version of the package */
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.0.0"</span><span class="token punctuation">,</span>

  /* Do not allow publishing<span class="token punctuation">,</span> useful for apps or private packages */
  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

  /* Keywords related to package. */
  /* Fill this well to make the package discoverable. */
  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"react"</span><span class="token punctuation">,</span> <span class="token string">"reactjs"</span><span class="token punctuation">,</span> <span class="token string">"boilerplate"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

  /* Files to include to npm distribution. */
  /* Relative patterns like <span class="token string">"./src"</span> fail! */
  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"dist/"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#scripts" id="scripts"></a><span class="text">Scripts</span><a class="header-anchor-select" href="#scripts">#</a></h3>
<p>npm can be used as a task runner through <code>npm run</code> command. Running the command shows all available scripts. The scripts are commonly used for different build tasks.</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json">/* `npm run &lt;name>` - `npm run` to get the available commands */
<span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    /* You don’t need to write node_modules/.bin/catalog<span class="token punctuation">,</span> npm will */
    /* automatically call locally-installed package. */
    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"catalog start docs"</span><span class="token punctuation">,</span>

    /* Namespacing (namespace<span class="token operator">:</span>task<span class="token punctuation">)</span> is a convention used for */
    /* grouping. */
    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"jest"</span><span class="token punctuation">,</span>
    "test<span class="token operator">:</span>coverage"<span class="token operator">:</span> <span class="token string">"jest --coverage"</span><span class="token punctuation">,</span>
    "test<span class="token operator">:</span>watch"<span class="token operator">:</span> <span class="token string">"jest --watch"</span><span class="token punctuation">,</span>
    "test<span class="token operator">:</span>lint"<span class="token operator">:</span> <span class="token string">"eslint . --ignore-path .gitignore"</span><span class="token punctuation">,</span>

    <span class="token property">"gh-pages"</span><span class="token operator">:</span> <span class="token string">"catalog build docs"</span><span class="token punctuation">,</span>
    "gh-pages<span class="token operator">:</span>deploy"<span class="token operator">:</span> <span class="token string">"gh-pages -d docs/build"</span><span class="token punctuation">,</span>

    "dist<span class="token operator">:</span>es6"<span class="token operator">:</span> <span class="token string">"del-cli ./dist-es6 &amp;&amp;
      cross-env BABEL_ENV=es6 babel ./src --out-dir ./dist-es6"</span><span class="token punctuation">,</span>
    "dist<span class="token operator">:</span>modules"<span class="token operator">:</span> <span class="token string">"del-cli ./dist-modules &amp;&amp;
      cross-env BABEL_ENV=modules babel ./src --out-dir ./dist-modules"</span><span class="token punctuation">,</span>

    <span class="token property">"preversion"</span><span class="token operator">:</span> <span class="token string">"npm run test"</span><span class="token punctuation">,</span>
    <span class="token property">"prepublishOnly"</span><span class="token operator">:</span> <span class="token string">"npm run dist:es6 &amp;&amp; npm run dist:modules"</span><span class="token punctuation">,</span>
    <span class="token property">"postpublish"</span><span class="token operator">:</span> <span class="token string">"npm run gh-pages &amp;&amp; npm run gh-pages:deploy"</span><span class="token punctuation">,</span>

    /* If your library is installed through Git<span class="token punctuation">,</span> compile it */
    <span class="token property">"postinstall"</span><span class="token operator">:</span> <span class="token string">"node lib/post_install.js"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Certain scripts, such as <code>start</code> and <code>test</code>, have shortcuts in npm. Examples:</p>
<ul>
<li><code>npm t</code> or <code>npm test</code> maps to <code>npm run test</code>.</li>
<li><code>npm start</code> maps to <code>npm run start</code>.</li>
</ul>
<p>npm commands, such as <code>npm install</code>, <code>npm publish</code> or <code>npm version</code>, can have <a href="https://docs.npmjs.com/misc/scripts">hooks</a> attached to them, like in the example above.</p>
<p>Use <code>pre</code> and <code>post</code> prefixes to group your scripts. For example, <em>npm run test</em> will try to run <code>pretest</code>, <code>test</code>, and then <code>posttest</code> scripts. In the example above, the feature is used to control what happens when <code>npm publish</code> is executed.</p>
<p>Though for npm namespaces (like, <code>namespace:task</code>) don’t mean anything, some tools support this convention. For example, <a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a> allows you to run all tasks inside a namespace — <code>npm-run-all dist:*</code>.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>The <code>postinstall</code> script and how it works is discussed in detail in the <a href="/maintenance/packaging/building/">Building Packages</a> chapter.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>Before npm 5, people used <code>prepublish</code> instead of <code>prepublishOnly</code>. <a href="https://docs.npmjs.com/misc/scripts">According to the documentation</a>, <code>prepublish</code> is run also on <code>npm install</code>. To overcome this confusing behavior, <code>prepublishOnly</code> was implemented.</blockquote><h3 class="header"><a class="header-anchor" href="#entry-points" id="entry-points"></a><span class="text">Entry Points</span><a class="header-anchor-select" href="#entry-points">#</a></h3>
<p>The entry points describe how the package should resolve to your code when used from Node or a bundler, like webpack.</p>
<p>If your code is using JavaScript features not supported by Node, or other language like TypeScript, you should compile the code in two ways:</p>
<ul>
<li>To ES5, and use this files as the <code>main</code> entry point. It will be used by Node.</li>
<li>To ES5 except ECMAScript modules (ESM), and use it as the <code>module</code> entry point. It will be used by bundlers, like webpack. This will allow them to do tree shaking.</li>
</ul>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  /* Entry point for command line interface. */
  /* Don't set this unless you intend to allow command line usage */
  <span class="token property">"bin"</span><span class="token operator">:</span> <span class="token string">"bin/index.js"</span><span class="token punctuation">,</span>

  /* Main entry point (defaults to index.js<span class="token punctuation">)</span> */
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"dist/"</span><span class="token punctuation">,</span>

  /* ESM-based entry point for bundlers. */
  <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"dist-modules/"</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i>Use <a href="https://www.npmjs.com/package/babel-preset-env">babel-preset-env</a> to apply only necessary transformations for Node versions or browsers you support.</blockquote><p>On small projects, it’s enough to have all code in <code>index.js</code> in the root folder. On larger ones, you likely want to start splitting it up and move into a directory. Having all code in a directory will make compilation easier.</p>
<h3 class="header"><a class="header-anchor" href="#dependencies" id="dependencies"></a><span class="text">Dependencies</span><a class="header-anchor-select" href="#dependencies">#</a></h3>
<p>An npm package can have different types of dependencies:</p>
<ul>
<li><code>dependencies</code> are the direct dependencies a package needs to work. On application level you could list the dependencies of the application code itself. This excludes dependencies needed to build it.</li>
<li><code>devDependencies</code> are dependencies you need to develop the package. They include packages related to building, testing, and similar tasks. When you install a package from npm, they won’t be installed by default. If you run <code>npm install</code> on a project locally, npm will install them.</li>
<li><code>peerDependencies</code> are usually given as version ranges. The idea is to allow the user to decide the exact versions of these dependencies without locking them to specific ones. The behavior was changed in npm 3. Before that npm install peer dependencies automatically. Now you have to install and include them to your project explicitly.</li>
<li><code>bundledDependencies</code> are the dependencies that are bundled with the package itself. They are used rarely, though.</li>
<li><code>optionalDependencies</code> are the dependencies that the user can install but aren’t required for the package to work. This is another rare field.</li>
</ul>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  /* Dependencies required to use the package. */
  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    /* ... */
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  /* Dependencies needed to develop/compile the package. */
  <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    /* ... */
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  /* Package peer dependencies. The consumer chooses exact versions. */
  /* To include RC versions to the range<span class="token punctuation">,</span> consider */
  /* using a pattern such as ^<span class="token number">4.0</span>.<span class="token number">0</span>-<span class="token number">0</span> */
  <span class="token property">"peerDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"lodash"</span><span class="token operator">:</span> <span class="token string">">= 3.5.0 &lt; 4.0.0"</span><span class="token punctuation">,</span>
    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">">= 0.14.0 &lt; 17.0.0"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#links" id="links"></a><span class="text">Links</span><a class="header-anchor-select" href="#links">#</a></h3>
<p>A package should link to its repository, homepage, and issue tracker. The fields are optional but they are good to have as it will make it easier for the users to find these through npm site.</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  /* Links to homepage<span class="token punctuation">,</span> repository<span class="token punctuation">,</span> and issue tracker */
  <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://&lt;organization/user>.github.io/&lt;project>/"</span><span class="token punctuation">,</span>
  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span>
    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/&lt;organization/user>/&lt;project>.git"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">"bugs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/&lt;organization/user>/&lt;project>/issues"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you use GitHub, you can simplify like this:</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  /* GitHub issues URL will be inferred from the repository URL */
  <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://&lt;organization/user>.github.io/&lt;project>/"</span><span class="token punctuation">,</span>
  <span class="token property">"repository"</span><span class="token operator">:</span>
    <span class="token string">"https://github.com/&lt;organization/user>/&lt;project>.git"</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#license" id="license"></a><span class="text">License</span><a class="header-anchor-select" href="#license">#</a></h3>
<p>You should always <a href="https://docs.npmjs.com/files/package.json#license">specify</a> a license of your package, otherwise people will not know if they are allowed to use it. If you don’t specify any license, it means nobody can use your package.</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>You can use an <a href="https://spdx.org/licenses/">SPDX license identifier</a> or refer to a file with a custom license:</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"SEE LICENSE IN &lt;filename>"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Also GitHub will use this field to show detailed license information in the repository:</p>
<p><img src="/fb21c52e57a361f946d95bc0989d729a.png" alt="License explanation on GitHub" class="" width="" height="" /></p>
<blockquote class="tip"><i class="icon-attention-circled"></i>See <a href="https://opensource.guide/legal/">The Legal Side of Open Source</a> and <a href="https://opensource.com/article/17/9/open-source-licensing">Open source licensing: What every technologist should know</a> to know more about licensing.</blockquote><h3 class="header"><a class="header-anchor" href="#other-fields" id="other-fields"></a><span class="text">Other Fields</span><a class="header-anchor-select" href="#other-fields">#</a></h3>
<p>As you can see, <em>package.json</em> can contain a lot of information. You can attach non-npm specific metadata there that can be used by tooling. Given this can bloat <em>package.json</em>, it’s preferable to keep metadata in files of their own.</p>
<h2 class="header"><a class="header-anchor" href="#what-files-to-publish" id="what-files-to-publish"></a><span class="text">What Files to Publish</span><a class="header-anchor-select" href="#what-files-to-publish">#</a></h2>
<p>Even though a project can contain a lot of files, not all should be published. Besides wasting bandwidth, this can leak sensitive files to a public registry.</p>
<h3 class="header"><a class="header-anchor" href="#what-should-be-in-a-package" id="what-should-be-in-a-package"></a><span class="text">What Should Be in a Package</span><a class="header-anchor-select" href="#what-should-be-in-a-package">#</a></h3>
<p>Most of the available npm packages are small and include only a couple of files:</p>
<ul>
<li>Entry point, like <em>index.js</em>.</li>
<li><em>package.json</em> - package metadata.</li>
<li><a href="/maintenance/documentation/readme/">README</a> - it’s shown on the package page at <em>npmjs.com</em> and is a good place for “selling” the project for a potential user. See the <a href="/maintenance/documentation/readme/">README</a> chapter for details.</li>
<li><em>CHANGELOG</em>, <em>CHANGES</em> or <em>HISTORY</em> - describe changes for each package version. See <a href="/maintenance/documentation/change-log/">Change Logs</a> chapter for details.</li>
<li><em>LICENSE</em> or <em>LICENCE</em> - license of your package. You should point to the license by name from <em>package.json</em>.</li>
</ul>
<p>These files will be included in your package regardless of the <em>package.json</em> <code>files</code> field or <code>.npmignore</code> file. <a href="/maintenance/documentation/readme/">README</a>, <em>CHANGELOG</em> and <em>LICENSE</em> can have any case and extension.</p>
<h3 class="header"><a class="header-anchor" href="#what-could-be-in-a-package" id="what-could-be-in-a-package"></a><span class="text">What Could Be in a Package</span><a class="header-anchor-select" href="#what-could-be-in-a-package">#</a></h3>
<p>There’s no official recommendations on on what files to publish, except <a href="https://docs.npmjs.com/misc/developers#keeping-files-out-of-your-package">a list</a> of files that should be ignored by default or included regardless of your settings (the ones listed above).</p>
<p>The most controversial question is whether you should publish tests and documentation as part of an npm package. There’s a <a href="https://stackoverflow.com/questions/25124844/should-i-npmignore-my-tests">good Stack Overflow discussion</a>.</p>
<p>Same can be said about the source code if you compile it before publishing. These files aren’t required to use the package but may be useful for some users, if they want to compile your code themselves or like to dig into packages on a plane.</p>
<h3 class="header"><a class="header-anchor" href="#what-should-not-be-in-a-package" id="what-should-not-be-in-a-package"></a><span class="text">What Should Not Be in a Package</span><a class="header-anchor-select" href="#what-should-not-be-in-a-package">#</a></h3>
<p>In larger projects, you often find the following files that should be excluded from an npm distribution:</p>
<ul>
<li>Tooling configuration, like <em>.babelrc</em>, <em>.eslintrc</em>, <em>.travis.yml</em> or <em>webpack.config.js</em> — files like <em>.babelrc</em> may easily break your user’s build if they try to compile _node<em>modules</em> folder and don’t have one of the plugins listed in your config.</li>
<li>Tooling or build artifacts like log files — usually anything you have in <em>.gitignore</em> which npm will use by default unless you have <em>.npmignore</em> file. In the latter case you’ll need to copy these patterns from <em>.gitignore</em>.</li>
<li>File that are required only for development: build scripts or <em>CONTRIBUTING.md</em>.</li>
<li>Any big files, like images.</li>
<li>Any sensitive data, like npm publishing keys.</li>
</ul>
<blockquote class="tip"><i class="icon-attention-circled"></i>To decrease the size of your dependencies, use <a href="https://www.npmjs.com/package/package-config-checker">package-config-checker</a>. It can pinpoint packages not using the <code>files</code> field correctly. Once you know which ones haven’t set it, consider making pull requests to those projects.</blockquote><h3 class="header"><a class="header-anchor" href="#including-and-ignoring-files" id="including-and-ignoring-files"></a><span class="text">Including and Ignoring Files</span><a class="header-anchor-select" href="#including-and-ignoring-files">#</a></h3>
<p>There are two ways to tell npm which files to publish.</p>
<h3 class="header"><a class="header-anchor" href="#files-field-in-_package-json_" id="files-field-in-_package-json_"></a><span class="text"><code>files</code> field in <em>package.json</em></span><a class="header-anchor-select" href="#files-field-in-_package-json_">#</a></h3>
<p>Only files or folders listed in the <a href="https://docs.npmjs.com/files/package.json#files">files</a> field will be published.</p>
<p><strong>Pros:</strong></p>
<ul>
<li>You’ll never publish a big file or folder accidentally.</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>You may forget to add a new file here and publish a broken package.</li>
<li>Doesn’t support negative patterns.</li>
</ul>
<blockquote class="warning"><i class="icon-attention"></i><a href="https://github.com/npm/npm/wiki/Files-and-Ignores#details">npm doesn’t support</a> negative glob patterns, like <code>!src/*.test.js</code>, in the <code>files</code> field, Use <em>.npmignore</em> file with a pattern like <code>src/*.test.js</code> instead.</blockquote><h3 class="header"><a class="header-anchor" href="#_-npmignore_-file" id="_-npmignore_-file"></a><span class="text"><em>.npmignore</em> file</span><a class="header-anchor-select" href="#_-npmignore_-file">#</a></h3>
<p>Lists glob patterns of files and folders that shouldn’t be published, similar to <em>.gitignore</em> (and <em>.gitignore</em> will be used by npm if there’s no <em>.npmignore</em>).</p>
<p><strong>Pros:</strong></p>
<ul>
<li>Easier to maintain, because new files will be published by default.</li>
<li>You can have different rules for different subdirectories.</li>
<li>Supports negative patterns.</li>
</ul>
<p><strong>Cons:</strong></p>
<ul>
<li>Easy to accidentally make you package bigger that it could.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>An npm package contains at least metadata and source. Many of the files that are relevant for development can be skipped in a distribution build to keep downloads fast. Although that’s a small issue, it’s still good to consider as it doesn’t take much effort to filter the files.</p>
<p>You’ll learn how to publish npm packages in the next chapter.</p>
</div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll" class="social-form__wrapper"><div class="mc-field-group social-form__input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email social-form__input" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-form__subscribe-container"><input type="submit" class="btn button social-form__subscribe" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/d25cd3712ccad030c912e13589e442a3.jpg)"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/maintenance/packaging/where-to-start/">Where to Start Packaging</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/9484144bf9f674a8b04217e6b3cdfe78.jpg)"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/maintenance/packaging/publishing/">Publishing Packages</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div></div></div></div></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__selected__link"><a href="/maintenance/">Maintenance book</a></div><div class="nav__link"><a href="/react/">React book</a></div><div class="nav__link"><a href="/webpack/">Webpack book</a></div><div class="nav__link"><a href="/training/">Hire me</a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></li><li><a class="blog-teaser" href="/blog/redux-zero-interview/">Redux Zero - Single Store, No Reducers - Interview with Matheus Lima</a></li><li><a class="blog-teaser" href="/blog/flow-runtime-interview/">Flow Runtime - A runtime type system for JavaScript with full Flow compatibility - Interview with Charles Pick</a></li><li><a class="blog-teaser" href="/blog/a-plus-interview/">a-plus-forms - A+ forms. Would use again - Interview with Nikolay Nemshilov</a></li><li><a class="blog-teaser" href="/blog/survivejs-webpack-and-maintenance/">“SurviveJS — Webpack” v2.1 and “SurviveJS — Maintenance” v0.9</a></li><li><a class="blog-teaser" href="/blog/cabbie-interview/">Cabbie - WebDriver for the masses - Interview with Forbes Lindesay</a></li><li><a class="blog-teaser" href="/blog/react-lite-interview/">react-lite - Implementation of React optimized for small size - Interview with Jade</a></li></ul></div></div><div class="footer-content-wrapper"><div class="footer-buy"><div><div class="buy-container"><a href="/maintenance/introduction"><img alt="Maintenance book cover" class="sidebar-cover" src="/44f3a3a3dad86956efa57dea740c5d44.png" width="255" height="329"/></a><div class="buy-buttons"><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></div></div><div class="buy-container"><a href="/react/introduction"><img alt="React book cover" class="sidebar-cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329"/></a><div class="buy-buttons"><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></div></div><div class="buy-container"><a href="/webpack/foreword"><img alt="Webpack book cover" class="sidebar-cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329"/></a><div class="buy-buttons"><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></div></div></div></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '4b3ffdbff33831aa87c5b1f39889f2af',
          indexName: 'survivejs_maintenance',
          inputSelector: '#search',
          debug: false
        });
      </script></div></div>

    
  </body>
</html>
