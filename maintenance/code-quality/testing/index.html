<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Tests can be seen as a runnable documentation of your code. Automated testing gives you confidence …" />
    <meta
      name="keywords"
      content="" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="Testing" />
    <meta property="og:description" content="
Tests can be seen as a runnable documentation of your code. Automated testing gives you confidence …" />
    <meta name="twitter:title" content="Testing" />
    <meta name="twitter:description" content="
Tests can be seen as a runnable documentation of your code. Automated testing gives you confidence …" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>Testing</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.8efc50c68439cdadff92.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <header class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><a title="Typing" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/maintenance/code-quality/typing/"><i class="icon-left-open"></i></a><nav class="nav"><ul class="nav__items"><li class="nav__link"><a href="https://graphql-finland.fi/">GraphQL Finland</a></li><li class="nav__link"><a href="/">Home</a></li><li class="nav__link"><a href="/blog/">Read the blog</a></li><li class="nav__link nav__link_selected"><a href="/maintenance/">Maintenance book</a></li><li class="nav__link"><a href="/react/">React book</a></li><li class="nav__link"><a href="/webpack/">Webpack book</a></li><li class="nav__link"><a href="/training/">Hire me</a></li><li class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></li></ul></nav><a title="Infrastructure" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/maintenance/infrastructure/"><i class="icon-right-open"></i></a></header><div class="page"><div class="css-b5dhuc css-8rlsag0"><div style="background-image:url(/0114afee1d553e8e85a0cb4e790c5dc8.jpg)" class="css-1huzfyy css-8rlsag1"></div><h1 class="css-13wbkqf css-8rlsag2">Testing</h1><small aria-hidden="true" class="css-18xzi2i css-8rlsag3"><a href="https://pixabay.com/en/eyeglasses-exam-optometry-vision-679696/">skeeze (Public Domain)</a></small></div><div class="page__container"><div class="css-xfgthk css-20xtq50"><label for="sidebar-toggle" class="css-7vv0nt css-20xtq52">Table of contents</label><input type="checkbox" id="sidebar-toggle" class="css-38lglc css-20xtq53"/><div class="css-nyzxad css-20xtq51"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/introduction/">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/packaging/">Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/where-to-start/">Where to Start Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/anatomy/">Anatomy of a Package</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/publishing/">Publishing Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/building/">Building Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/standalone-builds/">Standalone Builds</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/managing-dependencies/">Managing Dependencies</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/code-quality/">Code Quality</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/linting/">Linting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/code-formatting/">Code Formatting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/typing/">Typing</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Testing</span></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/infrastructure/">Infrastructure</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/processes/">Processes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/continuous-integration/">Continuous Integration</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/automation/">Automation</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/documentation/">Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/readme/">README</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/change-log/">Change Logs</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/site/">Site</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/api/">API Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/misc/">Other Types of Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/linting/">Linting and Formatting</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/future/">Future</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/longevity/">Longevity</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/marketing/">Marketing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/appendices/monorepos/">Managing Packages Using a Monorepo</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/appendices/customizing-eslint/">Customizing ESLint</a></li></ul></div><div class="toc-nav__section"></div></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></blockquote></div><div class="chapter-content"><p>Tests can be seen as a runnable documentation of your code. Automated testing gives you confidence to change the code. Manual testing is the other end of the spectrum. It’s also the most labor intensive and brittle option.</p>
<h2 class="header"><a class="header-anchor" href="#what-to-verify-with-testing" id="what-to-verify-with-testing"></a><span class="text">What to Verify With Testing</span><a class="header-anchor-select" href="#what-to-verify-with-testing">#</a></h2>
<p>Testing can be used to verify at least the following:</p>
<ul>
<li>Do parts of the system work in isolation?</li>
<li>Do parts of the system work together?</li>
<li>Does the system works fast enough?</li>
<li>Does the old API of the system still work for the consumers?</li>
<li>Do the tests cover the system well?</li>
<li>What is the quality of the tests?</li>
<li>Does the system solve user problems?</li>
</ul>
<p>You can test both quantitative and qualitative aspects. Qualitative testing is harder as it requires a comparison point, but without tracking quality, such as performance, it’s difficult to reach it. If you track how the system is being used and capture <strong>analytics</strong>, you can tell how the users experience the system.</p>
<h2 class="header"><a class="header-anchor" href="#develop-the-right-system-the-right-way" id="develop-the-right-system-the-right-way"></a><span class="text">Develop the Right System the Right Way</span><a class="header-anchor-select" href="#develop-the-right-system-the-right-way">#</a></h2>
<p>A technically correct system may not be correct from the user point of view and the other way around.</p>
<p>Popular projects put a lot of effort into the façade encountered by their users. This has led to techniques such as <strong>defensive coding</strong>. A good API should fail fast with a descriptive message, instead of swallowing errors.</p>
<h2 class="header"><a class="header-anchor" href="#how-much-to-test" id="how-much-to-test"></a><span class="text">How Much to Test</span><a class="header-anchor-select" href="#how-much-to-test">#</a></h2>
<p>Regardless of how much you test, manual testing may still be required, especially if you target multiple platforms. But it’s a good goal to minimize the amount of it and even try to eliminate it.</p>
<p>No matter how much you test, problems may still slip through. For this reason, it’s good to remember that you get what you measure. If you want performance, you should test against performance. To avoid breaking dependent projects, you should test against them before publishing changes.</p>
<p>Tests come with a cost. Test code is the code you have to maintain. Having more tests isn’t always better. Put conscious effort into maintaining good tests instead of many. Fortunately, tests allow refactoring and sometimes finding better ways to implement the desired features can simplify both the implementation and tests.</p>
<h2 class="header"><a class="header-anchor" href="#how-to-test-old-projects-without-tests" id="how-to-test-old-projects-without-tests"></a><span class="text">How to Test Old Projects Without Tests</span><a class="header-anchor-select" href="#how-to-test-old-projects-without-tests">#</a></h2>
<p>In older projects that have poor <strong>test coverage</strong>, tests can be used for exploration. <strong>Explorative testing</strong> allows you to learn how the code works by testing it. Instead of running the code and examining it, you can write tests to assert your knowledge. As you gain confidence with the way the code works, you are more willing to make changes to it as the risk of breakage decreases.</p>
<p>Specific techniques, such as <strong>snapshot testing</strong> or <strong>approval testing</strong>, allow you to capture the old state of an application or a library and test against it. Having a snapshot of the state is a good starting point as then you have something instead of nothing. Capturing this state is often cheap, and such tests can be complemented with more specific ones. They provide a baseline for more sophisticated testing.</p>
<h2 class="header"><a class="header-anchor" href="#types-of-testing" id="types-of-testing"></a><span class="text">Types of Testing</span><a class="header-anchor-select" href="#types-of-testing">#</a></h2>
<p><figure><img src="/249f5e772e285a5c5a12490b3b662035.png" alt="Test tower" class="" width="" height="" /><figcaption>Test tower</figcaption></figure></p>
<p>Mike Cohn popularized <a href="https://martinfowler.com/bliki/TestPyramid.html">the concept of the test pyramid</a>. He split testing into three levels: unit, service, and user interface. The test tower adapted from his and <a href="https://github.com/ForbesLindesay/end-to-end-testing-react-applications">Forbes Lindesay’s work</a> expands on the idea.</p>
<p>Each type of testing provides specific insight to the project. The following sections cover the most common techniques while also discussed a few beyond the tower.</p>
<h3 class="header"><a class="header-anchor" href="#acceptance-testing" id="acceptance-testing"></a><span class="text">Acceptance Testing</span><a class="header-anchor-select" href="#acceptance-testing">#</a></h3>
<p><strong>Acceptance testing</strong> looks at testing from the user perspective. It answers the question can the user complete his tasks using the app UI. Tools like <a href="http://codecept.io/">CodeceptJS</a>, <a href="https://theintern.github.io/">Intern</a>, or <a href="http://www.seleniumhq.org/">Selenium</a> provide a high-level syntax that allows you to model user behaviors, and run tests in a real browser.</p>
<h3 class="header"><a class="header-anchor" href="#end-to-end-testing" id="end-to-end-testing"></a><span class="text">End to End Testing</span><a class="header-anchor-select" href="#end-to-end-testing">#</a></h3>
<p><strong>End to End testing</strong> (E2E) is closer to technical level than acceptance testing and tests particular use flows. For example, in an application you would test that the user can log in and log out. Or that the user can fill a form in a specific view and get expected results.</p>
<p>Tools like <a href="https://www.npmjs.com/package/puppeteer">puppeteer</a>, <a href="https://devexpress.github.io/testcafe/">TestCafé</a>, <a href="http://nightwatchjs.org/">Nightwatch.js</a> and services such as <a href="https://www.cypress.io/">cypress</a> focus exactly on this type of testing.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://ropig.com/blog/end-end-tests-dont-suck-puppeteer/">Ropig demonstrates puppeteer and its value for E2E testing in their blog post</a>.</blockquote><h3 class="header"><a class="header-anchor" href="#integration-testing" id="integration-testing"></a><span class="text">Integration Testing</span><a class="header-anchor-select" href="#integration-testing">#</a></h3>
<p><strong>Integration testing</strong> asserts that separate modules work together. You can use the same ideas as above except that the scope of the system under the test is smaller.</p>
<h3 class="header"><a class="header-anchor" href="#unit-testing" id="unit-testing"></a><span class="text">Unit Testing</span><a class="header-anchor-select" href="#unit-testing">#</a></h3>
<p><strong>Unit testing</strong> asserts modules (units) in isolation. You can get started by using Node <a href="https://nodejs.org/api/assert.html">assert</a>. Specialized assertion libraries have more functionality and better output but <code>assert</code> is a good starting point.</p>
<p>To have something to test, define a module:</p>
<p><strong>add.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> <span class="token function-variable function" >add</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>a<span class="token punctuation" >,</span> b<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> a <span class="token operator" >+</span> b<span class="token punctuation" >;</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> add<span class="token punctuation" >;</span>
</code></pre>
<p>To test the code, create a file that imports your module and run assertions against it:</p>
<p><strong>add.test.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> assert <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'assert'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-const" >const</span> add <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'./add'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<span class="token function" >assert</span><span class="token punctuation brackets-parentheses" >(</span><span class="token function" >add</span><span class="token punctuation brackets-parentheses" >(</span><span class="token number" >1</span><span class="token punctuation" >,</span> <span class="token number" >1</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >===</span> <span class="token number" >2</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>If you run <code>node add.test.js</code>, you shouldn’t see any output. Try breaking the code to get an assertion error.</p>
<p><a href="https://www.npmjs.com/package/jest">Jest</a>, <a href="https://www.npmjs.com/package/mocha">Mocha</a>, <a href="https://www.npmjs.com/package/ava">AVA</a>, and <a href="https://www.npmjs.com/package/tape">tape</a> are the most popular test runners — you don’t have to do this work yourself.</p>
<p>It’s good to understand that unit tests cover functionality from the developer perspective. These small assertions can be used to define a low-level API. <strong>Test Driven Development</strong> allows you to shape the implementation as you figure out a proper specification for your API.</p>
<h3 class="header"><a class="header-anchor" href="#property-based-testing" id="property-based-testing"></a><span class="text">Property Based Testing</span><a class="header-anchor-select" href="#property-based-testing">#</a></h3>
<p><strong>Property based testing</strong> asserts specific <strong>invariants</strong> about code. For example, a sorting algorithm should return items sorted in a specific order. This fact is an invariant and should never change.</p>
<p>When invariants, like the sorting one, are known, it’s possible to generate tests against them. Property based testing can find issues unit testing could miss, but the invariants can be hard to find.</p>
<p>To continue the previous example, a property based test could be used to show that <code>add</code> is a <strong>commutative</strong> operation. Commutativity means that swapping the parameters should still yield the same result so that the result of <code>a + b</code> should equal <code>b + a</code>.</p>
<p><strong>add.property.test.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> assert <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'assert'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-const" >const</span> add <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'./add'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// Test an invariant once</span>
<span class="token function" >testProperty</span><span class="token punctuation brackets-parentheses" >(</span>
  <span class="token punctuation brackets-square" >[</span>generateNumber<span class="token punctuation" >,</span> generateNumber<span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true" >// Test against numbers</span>
  <span class="token punctuation brackets-parentheses" >(</span>a<span class="token punctuation" >,</span> b<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token function" >assert</span><span class="token punctuation brackets-parentheses" >(</span><span class="token function" >add</span><span class="token punctuation brackets-parentheses" >(</span>a<span class="token punctuation" >,</span> b<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >===</span> <span class="token function" >add</span><span class="token punctuation brackets-parentheses" >(</span>b<span class="token punctuation" >,</span> a<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token comment" spellcheck="true" >// Commutativity</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span> <span class="token function" >testProperty</span><span class="token punctuation brackets-parentheses" >(</span>generators<span class="token punctuation" >,</span> invariant<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-return" >return</span> invariant<span class="token punctuation" >.</span><span class="token function" >apply</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> generators<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span>g <span class="token operator" >=&gt;</span> g<span class="token punctuation" >.</span><span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token keyword keyword-function" >function</span> <span class="token function" >generateNumber</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-return" >return</span> Math<span class="token punctuation" >.</span><span class="token function" >random</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >*</span> Number<span class="token punctuation" >.</span>MAX_VALUE<span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>If you run the test, it should pass given <code>add</code> is a commutative operation. The same idea can be applied to more complicated scenarios. There are a few improvements that could be made:</p>
<ul>
<li>Instead of running a single test, run <code>testProperty</code> many times with different values. You could model this as <code>testProperties(&lt;property&gt;, timesToRun)</code>.</li>
<li>The test generates random values without allowing the user to set the seed value. This is a limitation of JavaScript API. To keep the tests reproducible, it’s a good idea to replace <code>Math.random</code> with an alternative that allows you to control the seed.</li>
<li>Replace <code>testProperty</code> and <code>generateNumber</code> with existing implementations from npm.</li>
<li>If the <code>add</code> function contained type information, it’s possible to extract that and then map the types to generators. Doing this would keep the test code slightly neater if you have multiple tests as then you would have to define the mapping between types and generators in one place while individual tests could skip the definition problem.</li>
</ul>
<p>Property testing tools like <a href="https://jsverify.github.io/">JSVerify</a> or <a href="http://leebyron.com/testcheck-js/">testcheck-js</a> are able to shrink a failure so you can fix it. The biggest benefit of the technique: it can help to discover boundary cases to repair.</p>
<h3 class="header"><a class="header-anchor" href="#static-analysis" id="static-analysis"></a><span class="text">Static Analysis</span><a class="header-anchor-select" href="#static-analysis">#</a></h3>
<p>Static analysis tools, such as ESLint or Flow, can help to keep code consistent and push it towards right patterns. They could be great low-maintenance addition to tests, as discussed in the <a href="/maintenance/code-quality/linting/">Linting</a> and <a href="/maintenance/code-quality/typing/">Typing</a> chapters.</p>
<h3 class="header"><a class="header-anchor" href="#security-testing" id="security-testing"></a><span class="text">Security Testing</span><a class="header-anchor-select" href="#security-testing">#</a></h3>
<p><strong>Security testing</strong> addresses vulnerabilities that allow a potential attacker to breach a system. <a href="https://www.npmjs.com/package/nsp">nsp</a> is a tool that checks your project against known vulnerabilities. <a href="https://www.npmjs.com/package/eslint-plugin-security">eslint-plugin-security</a> identifies potential security hotspots that need to be checked by a human.</p>
<h3 class="header"><a class="header-anchor" href="#regression-testing" id="regression-testing"></a><span class="text">Regression Testing</span><a class="header-anchor-select" href="#regression-testing">#</a></h3>
<p><strong>Regression testing</strong> makes sure the software still works the same way as before without breaking anything.</p>
<p><strong>Approval testing</strong> allows you to develop regression tests against an existing system. The idea is to store the existing system state as snapshots and use this data for testing a behavior for changes while the implementation is being refactored.</p>
<p><strong>Visual regression testing</strong> allows you to capture the user interface as an image and then compare it to a prior state to see if it has changed. If it has, then the failing test needs validation by a developer to make sure the result is still acceptable. Semi-automation like this is valuable especially if you have to support multiple environments and devices.</p>
<p>Regression testing applies on API level as well. An API that has worked in the past should work the same unless the API contract changed.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/dont-break">dont-break</a> is a good example of a tool to test your project against downstream (dependent) projects. <a href="https://survivejs.com/blog/dont-break-interview/">Read dont-break interview with Gleb Bahmutov</a> to understand the tool better.</blockquote><h3 class="header"><a class="header-anchor" href="#performance-testing" id="performance-testing"></a><span class="text">Performance Testing</span><a class="header-anchor-select" href="#performance-testing">#</a></h3>
<p><strong>Performance testing</strong> is valuable for projects where speed is important. Packages like <a href="https://k6.io/">k6</a>, <a href="https://benchmarkjs.com/">Benchmark.js</a> and <a href="https://www.npmjs.com/package/matcha">matcha</a> can be helpful here. You can benchmark your implementation against competing libraries or an older version of yours.</p>
<p>Ideally, you should store the old results somewhere and keep the runtime environment the same across separate runs. If the environment varies between runs, benchmarking results aren’t comparable. Assuming you are using a conventional <strong>Continuous Integration</strong> (CI) server without storing the performance data somewhere in between and cannot control the environment, you can run both the older and the current version of the system during the same run to detect performance regressions.</p>
<p>Performance testing also yields insight into different environments, and you can test against different versions of Node for example. The same point is true for other forms of testing.</p>
<h3 class="header"><a class="header-anchor" href="#mutation-testing" id="mutation-testing"></a><span class="text">Mutation Testing</span><a class="header-anchor-select" href="#mutation-testing">#</a></h3>
<p><strong>Mutation testing</strong> allows you to test your tests. The idea is to introduce mutations into the code under test and see if the tests still pass. Tools like <a href="https://stryker-mutator.github.io/">Stryker</a> enable the technique for JavaScript.</p>
<h3 class="header"><a class="header-anchor" href="#package-testing" id="package-testing"></a><span class="text">Package Testing</span><a class="header-anchor-select" href="#package-testing">#</a></h3>
<p>To make sure your npm package paths, like <code>main</code> or <code>module</code>, work, test your package with <a href="https://www.npmjs.com/package/pkg-ok">pkg-ok</a>.</p>
<h3 class="header"><a class="header-anchor" href="#code-coverage" id="code-coverage"></a><span class="text">Code Coverage</span><a class="header-anchor-select" href="#code-coverage">#</a></h3>
<p><strong>Code coverage</strong> tells you how much of the code is covered by tests. The technique can reveal parts of the code that aren’t being tested. Those parts have unspecified behavior and as a result may contain issues. Code coverage doesn’t tell anything about the quality of the tests, but it can be used to discover places to test.</p>
<p>You can measure code coverage with <a href="https://www.npmjs.com/package/istanbul">Istanbul</a>, and Jest includes it by default. <a href="https://github.com/istanbuljs/babel-plugin-istanbul">babel-plugin-istanbul</a> comes in handy if you are using Babel.</p>
<p><a href="https://codecov.io/">Codecov</a> and <a href="https://coveralls.io/">Coveralls</a> collect coverage for every pull request and post a comment explaining how a pull request would affect project coverage as you should maintain the current coverage and ideally improve it.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://chrome.google.com/webstore/detail/codecov-extension/keefkhehidemnokodkdkejapdgfjmijf">Codecov extension</a> for Chrome allows you to see code coverage on GitHub user interface.</blockquote><h3 class="header"><a class="header-anchor" href="#code-complexity" id="code-complexity"></a><span class="text">Code Complexity</span><a class="header-anchor-select" href="#code-complexity">#</a></h3>
<p>As code evolves, it tends to become more complex. The code will likely end up with hot spots that are fault prone. Understanding where those spots are, and making them simpler, may help to reduce number of issues where it’s the most important.</p>
<p>Tools like <a href="https://www.npmjs.com/package/complexity-report">complexity-report</a>, <a href="https://www.npmjs.com/package/plato">plato</a>, and <a href="https://www.npmjs.com/package/jscomplex">jscomplex</a> give this type of output. <a href="http://eslint.org/docs/rules/complexity">ESLint has specific checks for complexity</a>, <a href="https://maierfelix.github.io/Iroh/">Iroh</a> performs runtime checks.</p>
<h3 class="header"><a class="header-anchor" href="#smoke-testing" id="smoke-testing"></a><span class="text">Smoke Testing</span><a class="header-anchor-select" href="#smoke-testing">#</a></h3>
<p><strong>Smoke testing</strong> verifies that the vital functionality works in production. The purpose of these tests is to check whether the application might be working or not. They are light to write and can be a starting point if the codebase doesn’t have any tests yet. You could for instance assert that the application runs by logging in and out of the application after production deployment.</p>
<h3 class="header"><a class="header-anchor" href="#code-size" id="code-size"></a><span class="text">Code Size</span><a class="header-anchor-select" href="#code-size">#</a></h3>
<p>The size of the code can be important especially for frontend packages as you want to minimize the amount of code the client has to download and parse. Tools like <a href="https://www.npmjs.com/package/size-limit">size-limit</a> and <a href="https://www.npmjs.com/package/bundlesize">bundlesize</a> will warn you when your package is growing.</p>
<h4 class="header"><a class="header-anchor" href="#setting-up-size-limit" id="setting-up-size-limit"></a><span class="text">Setting up size-limit</span><a class="header-anchor-select" href="#setting-up-size-limit">#</a></h4>
<p>You can set up size-limit to fail the CI if your library accidentally grows over a certain limit.</p>
<p>To do that, install size-limit first:</p>
<pre><code class="lang-bash"><span class="token function" >npm</span> <span class="token function" >install</span> --save-dev size-limit
</code></pre>
<p>Add a new script and a <code>size-limit</code> section to your <em>package.json</em>:</p>
<pre><code class="lang-json"><div class="leanpub-insert">
<span class="token property" >"size-limit"</span><span class="token operator" >:</span> <span class="token punctuation brackets-square" >[</span>
  <span class="token punctuation brackets-braces" >{</span>
    <span class="token property" >"path"</span><span class="token operator" >:</span> <span class="token string" >"index.js"</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span>
</div>
<span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation brackets-braces" >{</span>
<div class="leanpub-insert">
  <span class="token property" >"size"</span><span class="token operator" >:</span> <span class="token string" >"size-limit"</span><span class="token punctuation" >,</span>
</div>
  <span class="token property" >"test"</span><span class="token operator" >:</span> <span class="token string" >"jest"</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>Run <code>npm run size</code> to see the current size of your library, with all dependencies, minified and gzipped.</p>
<p>Now, set the limit: it’s recommended to add around 1 KB over the current size, so you’ll know about any size increase:</p>
<pre><code class="lang-json"><span class="token property" >"size-limit"</span><span class="token operator" >:</span> <span class="token punctuation brackets-square" >[</span>
  <span class="token punctuation brackets-braces" >{</span>
<div class="leanpub-insert">
    <span class="token property" >"limit"</span><span class="token operator" >:</span> <span class="token string" >"9 KB"</span><span class="token punctuation" >,</span>
</div>
    <span class="token property" >"path"</span><span class="token operator" >:</span> <span class="token string" >"index.js"</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-square" >]</span>
</code></pre>
<p>And finally make the CI fail on size increase:</p>
<pre><code class="lang-json"><span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token property" >"size"</span><span class="token operator" >:</span> <span class="token string" >"size-limit"</span><span class="token punctuation" >,</span>
  <span class="token property" >"test"</span><span class="token operator" >:</span> <span class="token string" >"jest"</span>
<div class="leanpub-insert">
  <span class="token property" >"posttest"</span><span class="token operator" >:</span> <span class="token string" >"size-limit"</span>
</div>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>If the package will ever grow over 9 KB, you’ll see an error like this:</p>
<pre><code class="lang-bash">  Package size limit has exceeded by 25.57 KB
  Package size: 34.57 KB
  Size limit:   9 KB
  With all dependencies, minified and gzipped
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i>To find out why your library is bigger than expected, run <code>npm run size -- --why</code>.</blockquote><h3 class="header"><a class="header-anchor" href="#design-by-contract" id="design-by-contract"></a><span class="text">Design by Contract</span><a class="header-anchor-select" href="#design-by-contract">#</a></h3>
<p><a href="http://wiki.c2.com/?DesignByContract">Design by Contract</a> is a technique that allows you to push invariants, preconditions, and postconditions close to the implementation. The idea can be implemented on code level, but you can also extend the language, as <a href="https://www.npmjs.com/package/babel-plugin-contracts">babel-plugin-contracts</a> does.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Testing is a complex topic worth understanding. Testing isn’t about developing faster but rather developing in a sustainable way. Tests show their value especially when multiple people work on a project. Tests support development process and allow the team to move faster while avoiding breakage. And even if breakage happens, good practices improve the process to avoid the problems in the future.</p>
<p>The biggest question is what tests to write and when. It’s good to remember testing is a form of risk management. Especially when prototyping, tests won’t provide their maximum value since at this stage you are prepared to throw the code away. But if you are developing long term, the lack of tests begins to cause pain as new requirements appear and the implementation has to evolve to fit the new needs.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://medium.com/powtoon-engineering/a-complete-guide-to-testing-javascript-in-2017-a217b4cd5a2a">An Overview of JavaScript Testing in 2017</a> lists current testing tools using a similar categorization.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://github.com/atinfo/awesome-test-automation/blob/master/javascript-test-automation.md">JavaScript test automation list</a> is another good source of tools.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>There’s more to code quality than the topics covered in this part. Books like Code Complete by Steve McConnell and Clean Code by Robert Martin give further insight to the topic.</blockquote></div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-1nfeoes css-va8n550"><input type="email" class="css-baseStyle-1jrw962 css-inputStyle-16d70pc" placeholder="Email" name="EMAIL" id="mce-EMAIL" required=""/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" class="css-baseStyle-1jrw962 css-buttonStyle-1y781j1" value="Subscribe" name="subscribe"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous chapter</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/maintenance/code-quality/typing/">Typing</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next chapter</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/maintenance/infrastructure/">Infrastructure</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div></div></div></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></li><li><a class="blog-teaser" href="/blog/proppy-interview/">Proppy - Functional props composition for components - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/summer-2018-events/">SurviveJS - Summer Events</a></li><li><a class="blog-teaser" href="/blog/fastpack-interview/">Fastpack - Pack JavaScript code fast and easy - Interview with Oleksiy Golovko</a></li><li><a class="blog-teaser" href="/blog/lint-staged-interview/">lint-staged - Run Linters on git Staged Files - Interview with Andrey Okonetchnikov</a></li><li><a class="blog-teaser" href="/blog/webpack-book-updated-to-webpack-4/">&quot;SurviveJS - Webpack&quot; Updated to webpack 4</a></li><li><a class="blog-teaser" href="/blog/webpack-in-munich-may-2018/">Webpack in Munich, May 2018</a></li></ul></div><ul class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><img alt="Maintenance book cover" src="/44f3a3a3dad86956efa57dea740c5d44.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><img alt="React book cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><img alt="Webpack book cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '4b3ffdbff33831aa87c5b1f39889f2af',
          indexName: 'survivejs_maintenance',
          inputSelector: '#search',
          debug: false
        });
      </script></div>

    
  </body>
</html>
