<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="" />
    <title>Typing</title>
    
    <link rel='icon' type='image/png' href='/assets/favicon.png'></link>

    
      <link href="/site.b2c1dcc746e43e59bc1e.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/9484144bf9f674a8b04217e6b3cdfe78.jpg);"></div><h1 class="post__heading">Typing</h1><div class="header-extra"><a href="https://pixabay.com/en/alphabets-ancient-author-data-2365812/">rawpixel (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/maintenance/introduction/">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/packaging/">Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/where-to-start/">Where to Start Packaging</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/anatomy/">Anatomy of a Package</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/publishing/">Publishing Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/building/">Building Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/packaging/standalone-builds/">Standalone Builds</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/code-quality/">Code Quality</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/linting/">Linting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/code-formatting/">Code Formatting</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Typing</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/code-quality/dependencies/">Dependency Management</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/infrastructure/">Infrastructure</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/processes/">Processes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/continuous-integration/">Continuous Integration</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/infrastructure/automation/">Automation</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/documentation/">Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/readme/">README</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/site/">Site</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/api/">API Documentation</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/documentation/linting/">Linting</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/future/">Future</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/longevity/">Longevity</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/future/marketing/">Marketing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/maintenance/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/maintenance/appendices/monorepos/">Managing Packages Using a Monorepo</a></li></ul><div><div class="buy-container"><a href="/react/introduction"><img alt="React book cover" class="sidebar-cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div><h3>See also</h3><div class="buy-container"><a href="/webpack/foreword"><img alt="Webpack book cover" class="sidebar-cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></p></div></div></div><div class="chapter"><div class="post__content"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></blockquote></div><div class="chapter-content"><p>A function interface is a contract and depending on the system, it gives you guarantees. JavaScript doesn&#39;t give any guarantees by default and you can pass anything to a function. Doing this may lead to a runtime error and crash your application. In a stricter system it would be more difficult, or even impossible, to do this.</p>
<h2 class="header"><a class="header-anchor" href="#the-value-of-typing" id="the-value-of-typing"></a><span class="text">The Value of Typing</span><a class="header-anchor-select" href="#the-value-of-typing">#</a></h2>
<p>A loose typing system, such as the one included in JavaScript, doesn&#39;t get in your way. But what if you know the types and want to communicate them? You could include rough checks by programming them but this cannot match proper type systems and tooling cannot use the information in any meaningful manner.</p>
<p>Once you can communicate types on language level, you will get at least the following benefits:</p>
<ul>
<li>If you know a type, you can communicate it using the language itself.</li>
<li>If the type information is available, then the editors can use it for features like auto-completion and refactoring functionality.</li>
<li>The available type information can be used for techniques such as <strong>property based testing</strong> and documentation.</li>
<li>In an interpreted language, the interpreter can use the information to speed up execution of code.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#flow" id="flow"></a><span class="text">Flow</span><a class="header-anchor-select" href="#flow">#</a></h2>
<p><img src="/f8cc141e27b2be917274693f8561d503.png" alt="Flow" class="" width="" height="" /></p>
<p><a href="https://flow.org/">Flow type checker by Facebook</a> is an example of a solution that builds on top of JavaScript. To give you an example, consider the following <code>add</code> function that has been annotated using Flow:</p>
<!-- textlint-disable -->
<pre><code class="lang-javascript"><span class="token comment" spellcheck="true">// @flow</span>
<span class="token keyword" >function</span> <span class="token function" >add</span><span class="token punctuation" >(</span>x<span class="token punctuation" >:</span> number<span class="token punctuation" >,</span> y<span class="token punctuation" >:</span> number<span class="token punctuation" >)</span><span class="token punctuation" >:</span> number <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> x <span class="token operator" >+</span> y<span class="token punctuation" >;</span>
<span class="token punctuation" >}</span>
</code></pre>
<!-- textlint-enable -->
<p>The definition states that <code>add</code> should receive two numbers and return one as a result. This is the way it&#39;s usually done in statically typed languages.</p>
<p>Flow relies on a static type checker that has to be installed separately. As you run the tool, it will evaluate your code and provide recommendations. To ease development, <a href="https://www.npmjs.com/package/babel-plugin-typecheck">babel-plugin-typecheck</a> allows you to evaluate Flow types during runtime.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/babel-plugin-flow-react-proptypes">babel-plugin-flow-react-proptypes</a> allows you to generate <code>propTypes</code> based on Flow definitions. It brings the two ideas together.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/flow-coverage-report">flow-coverage-report</a> allows you to track the Flow typing coverage of your system. The idea is similar as for <strong>test coverage</strong>.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>See <a href="https://tryflow.org/">Try Flow</a> for more concrete examples.</blockquote><h2 class="header"><a class="header-anchor" href="#typescript" id="typescript"></a><span class="text">TypeScript</span><a class="header-anchor-select" href="#typescript">#</a></h2>
<p><img src="/ebed9480883ba7bd05ad7e61090b8430.png" alt="TypeScript" class="" width="" height="" /></p>
<p>TypeScript by Microsoft is an entire language that comes with a typing approach of its own. It&#39;s a superset of JavaScript and it has been adopted especially by the AngularJS community.</p>
<p>The Flow example above works even in TypeScript. Even though there are similarities like this, the approaches differ and provide different sets of functionality. <a href="https://github.com/niieani/typescript-vs-flowtype">The Flow and TypeScript comparison by Bazyli Brzóska</a> highlights these differences.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>See <a href="https://www.typescriptlang.org/play/index.html">TypeScript playground</a> for more concrete examples.</blockquote><h2 class="header"><a class="header-anchor" href="#the-benefits-of-flow-and-typescriipt" id="the-benefits-of-flow-and-typescriipt"></a><span class="text">The Benefits of Flow and TypeScriipt</span><a class="header-anchor-select" href="#the-benefits-of-flow-and-typescriipt">#</a></h2>
<p>Both Flow and TypeScript compiler can detect a variety of type related problems. This doesn&#39;t mean code won&#39;t crash runtime but at least you&#39;ll detect type related mismatches early. A large part of TypeScript&#39;s value has to do with the way it has been integrated to popular editors. The same applies to Flow in a more limited extent.</p>
<h2 class="header"><a class="header-anchor" href="#type-definitions" id="type-definitions"></a><span class="text">Type Definitions</span><a class="header-anchor-select" href="#type-definitions">#</a></h2>
<p>To get value of these systems, you have to use <strong>type definitions</strong> with existing packages. <a href="https://github.com/flowtype/flow-typed">flow-typed</a> provides them for Flow whereas <a href="http://definitelytyped.org/">DefinitelyTyped</a> achieves the same for TypeScript.</p>
<p>These third-party type definitions complement the actual packages and allow you to capture type errors related to them. It can be sensible to implement a package using either solution and then compile to JavaScript and a type definition file.</p>
<h3 class="header"><a class="header-anchor" href="#generating-type-definitions" id="generating-type-definitions"></a><span class="text">Generating Type Definitions</span><a class="header-anchor-select" href="#generating-type-definitions">#</a></h3>
<p>If you are using TypeScript to author your packages, TypeScript compiler will write file ending in <em>d.ts</em>. The file contains the type definitions. It&#39;s advisable to set <code>&quot;typings&quot;: &quot;dist/library.d.ts&quot;</code> in <em>package.json</em> although TypeScript related tooling will look for the file through convention. The same type definition can be used for DefinitelyTyped.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html">TypeScript documentation covers related details in further detail</a>.</blockquote><p>Flow provides <code>flow gen-flow-files &lt;input file&gt; &gt; &lt;output file&gt;</code> that achieves closely the same. It accepts a source file to process and emits the extracted type definition. These definitions could then be submitted to <em>flow-typed</em>.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://medium.com/netscape/shipping-flowtype-definitions-in-npm-packages-c987917efb65">Patrick Stapfer has written an article that covers Flow specifics in greater detail</a>.</blockquote><h2 class="header"><a class="header-anchor" href="#challenges-of-typing" id="challenges-of-typing"></a><span class="text">Challenges of Typing</span><a class="header-anchor-select" href="#challenges-of-typing">#</a></h2>
<p>Even though typing can provide value, there are challenges involved. As the tooling evolves, their semantics may change. What if a package has been typed using an older version of Flow than the one you are using and it broke in the process? What if you are using a different version of a dependency than one of your dependencies? Which typings to use then?</p>
<p>It&#39;s possible to overcome some of these problems in user level as you can override typings yourself. Typing doesn&#39;t come without a cost as now you have a new source of potential problems. But if the potential benefits are greater than potential problems, there&#39;s value in typing.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://reasonml.github.io/">ReasonML</a> implements a bridge between the language and JavaScript using a programmable type definition. The approach goes further than the static definitions provided by Flow and TypeScript.</blockquote><h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>It can be a good idea for a package author to consider using a type system as it allows stricter contracts. This in turn is a nice for the consumers as they will capture potential type related errors earlier.</p>
<p>You&#39;ll learn about testing in the next chapter.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/3a76eacb0e7d5d630a35f21fb91f9250.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/maintenance/code-quality/code-formatting/">Code Formatting</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/0114afee1d553e8e85a0cb4e790c5dc8.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/maintenance/code-quality/testing/">Testing</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Testing" href="/maintenance/code-quality/testing/"><i class="icon-right-open"></i></a><a class="previous-page" title="Code Formatting" href="/maintenance/code-quality/code-formatting/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/training/">Get training</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-react">Buy the ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></li><li><a class="blog-teaser" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></li><li><a class="blog-teaser" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li><a class="blog-teaser" href="/blog/react-next-2017/">Experiences on React Next 2017</a></li><li><a class="blog-teaser" href="/blog/frint-interview/">FrintJS - Build reactive applications with React and RxJS - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/neutrino-interview/">Neutrino - Create modern JavaScript applications with minimal configuration - Interview with Eli Perelman</a></li><li><a class="blog-teaser" href="/blog/idyll-interview/">Idyll - Narratives for the web - Interview with Matthew Conlen</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></div>

    
  </body>
</html>
