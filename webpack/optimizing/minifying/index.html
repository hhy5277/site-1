<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="" />
    <title>Minifying</title>
    
    <link rel='icon' type='image/png' href='/assets/favicon.png'></link>

    
      <link href="/site.cba292bc35ce98ddd072.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/8a4a775e3383dfd9a5dbbbb04b29ea0b.jpg);"></div><h1 class="post__heading">Minifying</h1><div class="header-extra"><a href="https://pixabay.com/en/austin-tx-sign-texas-downtown-713746/">BreaLeaDesigns (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction/">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/what-is-webpack/">What is Webpack</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing/">Developing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/automatic-browser-refresh/">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/linting/">Linting JavaScript</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/composing-configuration/">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/styling/">Styling</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/loading/">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/separating-css/">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/autoprefixing/">Autoprefixing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/eliminating-unused-css/">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/linting/">Linting CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading/">Loading Assets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/loader-definitions/">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/images/">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/fonts/">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/javascript/">Loading JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building/">Building</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/source-maps/">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/code-splitting/">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/tidying-up/">Tidying Up</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing/">Optimizing</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Minifying</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/environment-variables/">Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/separating-manifest/">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/analyzing-build-statistics/">Analyzing Build Statistics</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/performance/">Performance</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/output/">Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/targets/">Build Targets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/bundling-libraries/">Bundling Libraries</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/library-output/">Library Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/multiple-pages/">Multiple Pages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/server-side-rendering/">Server Side Rendering</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/techniques/">Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/web-workers/">Web Workers</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/i18n/">Internationalization</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/deploying/">Deploying Applications</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/packages/">Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/consuming/">Consuming Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/consuming-techniques/">Package Consuming Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/authoring/">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/authoring-techniques/">Package Authoring Techniques</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending/">Extending</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/loaders/">Extending with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/plugins/">Extending with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/comparison/">Comparison of Build Tools</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr/">Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr-with-react/">Hot Module Replacement with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/customizing-eslint/">Customizing ESLint</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react/">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/glossary/">Glossary</a></li></ul><div><div class="buy-container"><a href="/webpack/foreword"><img alt="Webpack book cover" class="sidebar-cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a><a class="btn btn--normal btn--buy" href="https://survivejs.typeform.com/to/LUQK0T">Buy Signed LE</a></p></div><h3>See also</h3><div class="buy-container"><a href="/react/introduction"><img alt="React book cover" class="sidebar-cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></blockquote></div><div class="chapter-content"><p>The build output hasn&#39;t received attention yet and no doubt it&#39;s going to be chunky, especially as you included React in it. You can apply a variety of techniques to bring down the size of the vendor bundle. You can also leverage client level caching and load individual assets lazily as you saw earlier.</p>
<p><strong>Minification</strong> is a process where the code is simplified without losing any meaning that matters to the interpreter. As a result, your code most likely looks jumbled, and it&#39;s hard to read. But that&#39;s the point.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Even if you minify the build, you can still generate source maps through the <code>devtool</code> option that was discussed earlier to gain a better debugging experience, even production code if you want.</blockquote><h2 class="header"><a class="header-anchor" href="#generating-a-baseline-build" id="generating-a-baseline-build"></a><span class="text">Generating a Baseline Build</span><a class="header-anchor-select" href="#generating-a-baseline-build">#</a></h2>
<p>To get started, you should generate a baseline build, so you have something to optimize. Execute <code>npm run build</code> to see output below:</p>
<pre><code class="lang-bash">Hash: 12aec469d54202150429
Version: webpack 2.2.1
Time: 2863ms
        Asset       Size  Chunks                    Chunk Names
       app.js    2.42 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>         app
  <span class="token punctuation" >..</span>.font.eot     166 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
<span class="token punctuation" >..</span>.font.woff2    77.2 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
 <span class="token punctuation" >..</span>.font.woff      98 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
  <span class="token punctuation" >..</span>.font.svg     444 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  <span class="token punctuation" >[</span>big<span class="token punctuation" >]</span>
     logo.png      77 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
         0.js    1.89 kB       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
  <span class="token punctuation" >..</span>.font.ttf     166 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
<div class="leanpub-insert">
    vendor.js     150 kB       2  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>         vendor
</div>
      app.css     3.9 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>         app
     0.js.map    2.22 kB       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
   app.js.map    2.13 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>         app
  app.css.map   84 bytes       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>         app
vendor.js.map     178 kB       2  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>         vendor
   index.html  274 bytes          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
   <span class="token punctuation" >[</span>3<span class="token punctuation" >]</span> ./~/react/lib/ReactElement.js 11.2 kB <span class="token punctuation" >{</span>2<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
  <span class="token punctuation" >[</span>18<span class="token punctuation" >]</span> ./app/component.js 461 bytes <span class="token punctuation" >{</span>1<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
  <span class="token punctuation" >[</span>19<span class="token punctuation" >]</span> ./~/font-awesome/css/font-awesome.css 41 bytes <span class="token punctuation" >{</span>1<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
<span class="token punctuation" >..</span>.
</code></pre>
<p>150 kB for a vendor bundle is a lot! Minification should bring the size down.</p>
<h2 class="header"><a class="header-anchor" href="#enabling-a-performance-budget" id="enabling-a-performance-budget"></a><span class="text">Enabling a Performance Budget</span><a class="header-anchor-select" href="#enabling-a-performance-budget">#</a></h2>
<p>Webpack allows you to define a <strong>performance budget</strong>. The idea is that it gives your build size constraint which it has to follow. The feature is disabled by default, but if enabled it defaults to 250 kB limit per entries and assets. The calculation includes extracted chunks to entry calculation.</p>
<p>Performance budget can be configured to provide warnings or errors. If a budget isn&#39;t met and it has been configured to emit an error, it would terminate the entire build.</p>
<p>To integrate the feature into the project, adjust the configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> productionConfig <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
<div class="leanpub-insert">
  <span class="token punctuation" >{</span>
    performance<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      hints<span class="token punctuation" >:</span> <span class="token string" >'warning'</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// 'error' or false are valid too</span>
      maxEntrypointSize<span class="token punctuation" >:</span> <span class="token number" >100000</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// in bytes</span>
      maxAssetSize<span class="token punctuation" >:</span> <span class="token number" >450000</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// in bytes</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</div>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>In practice you want to maintain lower limits. The current ones are enough for this demonstration. If you build now (<code>npm run build</code>), you should see a warning within the output:</p>
<pre><code class="lang-bash"><span class="token punctuation" >..</span>.
WARNING <span class="token keyword" >in</span> entrypoint size limit: The following entrypoint<span class="token punctuation" >(</span>s<span class="token punctuation" >)</span> combined asset size exceeds the recommended limit <span class="token punctuation" >(</span>100 kB<span class="token punctuation" >)</span>. This can impact web performance.
Entrypoints:
  app <span class="token punctuation" >(</span>156 kB<span class="token punctuation" >)</span>
      vendor.js
,      app.js
,      app.css
<span class="token punctuation" >..</span>.
</code></pre>
<p>If minification works, the warning should disappear. That&#39;s the next challenge.</p>
<h2 class="header"><a class="header-anchor" href="#minifying-javascript" id="minifying-javascript"></a><span class="text">Minifying JavaScript</span><a class="header-anchor-select" href="#minifying-javascript">#</a></h2>
<p>The point of <strong>minification</strong> is to convert the code into a smaller form. Safe <strong>transformations</strong> do this without losing any meaning by rewriting code. Good examples of this include renaming variables or even removing entire blocks of code based on the fact that they are unreachable (<code>if (false)</code>).</p>
<p>Unsafe transformations can break code as they can lose something implicit the underlying code relies upon. For example, Angular 1 expects specific function parameter naming when using modules. Rewriting the parameters breaks code unless you take precautions against it in this case.</p>
<p>Minification in webpack can be enabled through <code>webpack -p</code> (same as <code>--optimize-minimize</code>). This uses webpack&#39;s <code>UglifyJsPlugin</code> underneath. The problem is that UglifyJS doesn&#39;t support ES6 syntax yet making it problematic if Babel and <em>babel-preset-env</em> are used while targeting specific browsers. You have to go another route in this case for this reason.</p>
<h3 class="header"><a class="header-anchor" href="#setting-up-javascript-minification" id="setting-up-javascript-minification"></a><span class="text">Setting Up JavaScript Minification</span><a class="header-anchor-select" href="#setting-up-javascript-minification">#</a></h3>
<p><a href="https://www.npmjs.com/package/babel-preset-minify">babel-preset-minify</a> is a JavaScript minifier maintained by the Babel team and it provides support for ES6 and newer features. <a href="https://www.npmjs.com/package/babel-minify-webpack-plugin">babel-minify-webpack-plugin</a> makes it possible to use it through webpack.</p>
<p>To get started, include the plugin to the project:</p>
<pre><code class="lang-bash">npm <span class="token function" >install</span> babel-minify-webpack-plugin --save-dev
</code></pre>
<p>To attach it to the configuration, define a part for it first:</p>
<p><strong>webpack.parts.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-insert">
<span class="token keyword" >const</span> BabelWebpackPlugin <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'babel-minify-webpack-plugin'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<div class="leanpub-insert">
exports<span class="token punctuation" >.</span>minifyJavaScript <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token keyword" >new</span> <span class="token class-name" >BabelWebpackPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
</code></pre>
<p>The plugin exposes more functionality, but having the possibility of toggling source maps is enough. Hook it up with the configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> productionConfig <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  parts<span class="token punctuation" >.</span><span class="token function" >clean</span><span class="token punctuation" >(</span>PATHS<span class="token punctuation" >.</span>build<span class="token punctuation" >)</span><span class="token punctuation" >,</span>
<div class="leanpub-insert">
  parts<span class="token punctuation" >.</span><span class="token function" >minifyJavaScript</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
</div>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>If you execute <code>npm run build</code> now, you should see smaller results:</p>
<pre><code class="lang-bash">Hash: 12aec469d54202150429
Version: webpack 2.2.1
Time: 5265ms
        Asset       Size  Chunks             Chunk Names
       app.js  669 bytes       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
  <span class="token punctuation" >..</span>.font.eot     166 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
<span class="token punctuation" >..</span>.font.woff2    77.2 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
 <span class="token punctuation" >..</span>.font.woff      98 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
  <span class="token punctuation" >..</span>.font.svg     444 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
     logo.png      77 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
         0.js  399 bytes       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
  <span class="token punctuation" >..</span>.font.ttf     166 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
<div class="leanpub-insert">
    vendor.js    45.2 kB       2  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  vendor
</div>
      app.css     3.9 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
     0.js.map    2.07 kB       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
   app.js.map    1.64 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
  app.css.map   84 bytes       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
<div class="leanpub-insert">
vendor.js.map     169 kB       2  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  vendor
</div>
   index.html  274 bytes          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
   <span class="token punctuation" >[</span>3<span class="token punctuation" >]</span> ./~/react/lib/ReactElement.js 11.2 kB <span class="token punctuation" >{</span>2<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
  <span class="token punctuation" >[</span>18<span class="token punctuation" >]</span> ./app/component.js 461 bytes <span class="token punctuation" >{</span>1<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
  <span class="token punctuation" >[</span>19<span class="token punctuation" >]</span> ./~/font-awesome/css/font-awesome.css 41 bytes <span class="token punctuation" >{</span>1<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
<span class="token punctuation" >..</span>.
</code></pre>
<p>Given it needs to do more work, it took longer to execute the build. But on the plus side, the build is now smaller, the size limit warning disappeared, and the vendor build went from 150 kB to roughly 45 kB.</p>
<p>You should check <em>babel-minify-webpack-plugin</em> for more options. It gives you control over how to handle code comments for example.</p>
<h2 class="header"><a class="header-anchor" href="#other-ways-to-minify-javascript" id="other-ways-to-minify-javascript"></a><span class="text">Other Ways to Minify JavaScript</span><a class="header-anchor-select" href="#other-ways-to-minify-javascript">#</a></h2>
<p>Although <em>babel-minify-webpack-plugin</em> works for this use case, there are more options you can consider:</p>
<ul>
<li><a href="https://www.npmjs.com/package/webpack-closure-compiler">webpack-closure-compiler</a> runs parallel and gives even smaller result than <em>babel-minify-webpack-plugin</em> at times.</li>
<li><a href="https://www.npmjs.com/package/optimize-js-plugin">optimize-js-plugin</a> complements the other solutions by wrapping eager functions and it enhances the way your JavaScript code gets parsed initially. The plugin relies on <a href="https://github.com/nolanlawson/optimize-js">optimize-js</a> by Nolan Lawson.</li>
<li><a href="https://webpack.js.org/plugins/uglifyjs-webpack-plugin/">webpack.optimize.UglifyJsPlugin</a> is the official UglifyJS plugin for webpack. It doesn&#39;t support ES6 yet.</li>
<li><a href="https://www.npmjs.com/package/uglifyjs-webpack-plugin">uglifyjs-webpack-plugin</a> allows you to try out an experimental version of UglifyJS that provides better support for ES6 than the stable version.</li>
<li><a href="https://www.npmjs.com/package/uglify-loader">uglify-loader</a> gives more granular control than webpack&#39;s <code>UglifyJsPlugin</code> in case you prefer to use UglifyJS.</li>
<li><a href="https://www.npmjs.com/package/webpack-parallel-uglify-plugin">webpack-parallel-uglify-plugin</a> allows you to parallelize the minifying step and can yield extra performance as webpack doesn&#39;t run in parallel by default.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#minifying-css" id="minifying-css"></a><span class="text">Minifying CSS</span><a class="header-anchor-select" href="#minifying-css">#</a></h2>
<p><em>css-loader</em> allows minifying CSS through <a href="http://cssnano.co/">cssnano</a>. Minification needs to be enabled explicitly using the <code>minimize</code> option. You can also pass <a href="http://cssnano.co/optimisations/">cssnano specific options</a> to the query to customize the behavior further.</p>
<p><a href="https://www.npmjs.com/package/clean-css-loader">clean-css-loader</a> allows you to use a popular CSS minifier <a href="https://www.npmjs.com/package/clean-css">clean-css</a>.</p>
<p><a href="https://www.npmjs.com/package/optimize-css-assets-webpack-plugin">optimize-css-assets-webpack-plugin</a> is a plugin based option that applies a chosen minifier on CSS assets. Using <code>ExtractTextPlugin</code> can lead to duplicated CSS given it only merges text chunks. <code>OptimizeCSSAssetsPlugin</code> avoids this problem by operating on the generated result and thus can lead to a better result.</p>
<blockquote class="warning"><i class="icon-attention"></i>In webpack 1 <code>minimize</code> was set on by default if <code>UglifyJsPlugin</code> was used. This confusing behavior was fixed in webpack 2, and now you have explicit control over minification.</blockquote><h3 class="header"><a class="header-anchor" href="#setting-up-css-minification" id="setting-up-css-minification"></a><span class="text">Setting Up CSS Minification</span><a class="header-anchor-select" href="#setting-up-css-minification">#</a></h3>
<p>Out of the available solutions, <code>OptimizeCSSAssetsPlugin</code> composes the best. To attach it to the setup, install it and <em>cssnano</em> first:</p>
<pre><code class="lang-bash">npm <span class="token function" >install</span> optimize-css-assets-webpack-plugin cssnano --save-dev
</code></pre>
<p>Like for JavaScript, you can wrap the idea in a configuration part:</p>
<p><strong>webpack.parts.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<div class="leanpub-insert">
<span class="token keyword" >const</span> OptimizeCSSAssetsPlugin <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'optimize-css-assets-webpack-plugin'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token keyword" >const</span> cssnano <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation" >(</span><span class="token string" >'cssnano'</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>

<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>

<div class="leanpub-insert">
exports<span class="token punctuation" >.</span>minifyCSS <span class="token operator" >=</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span> options <span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token keyword" >new</span> <span class="token class-name" >OptimizeCSSAssetsPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
      cssProcessor<span class="token punctuation" >:</span> cssnano<span class="token punctuation" >,</span>
      cssProcessorOptions<span class="token punctuation" >:</span> options<span class="token punctuation" >,</span>
      canPrint<span class="token punctuation" >:</span> <span class="token boolean" >false</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</div>
</code></pre>
<blockquote class="warning"><i class="icon-attention"></i>If you use <code>--json</code> output with webpack as discussed in the <a href="/webpack/optimizing/analyzing-build-statistics/">Analyzing Build Statistics</a> chapter, you should set <code>canPrint: false</code> to avoid output. You can solve by exposing the flag as a parameter so you can control it based on the environment.</blockquote><p>Then, connect with main configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword" >const</span> productionConfig <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation" >(</span><span class="token punctuation" >[</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  parts<span class="token punctuation" >.</span><span class="token function" >minifyJavaScript</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
<div class="leanpub-insert">
  parts<span class="token punctuation" >.</span><span class="token function" >minifyCSS</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      discardComments<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        removeAll<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token comment" spellcheck="true">// Run cssnano in safe mode to avoid</span>
      <span class="token comment" spellcheck="true">// potentially unsafe transformations.</span>
      safe<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
</div>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
<span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>If you build the project now (<code>npm run build</code>), you should notice that CSS has become smaller as it&#39;s missing comments:</p>
<pre><code class="lang-bash">Hash: 12aec469d54202150429
Version: webpack 2.2.1
Time: 4764ms
        Asset       Size  Chunks             Chunk Names
       app.js  669 bytes       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
  <span class="token punctuation" >..</span>.font.eot     166 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
<span class="token punctuation" >..</span>.font.woff2    77.2 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
 <span class="token punctuation" >..</span>.font.woff      98 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
  <span class="token punctuation" >..</span>.font.svg     444 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
     logo.png      77 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
         0.js  399 bytes       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
  <span class="token punctuation" >..</span>.font.ttf     166 kB          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
    vendor.js    45.2 kB       2  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  vendor
<div class="leanpub-insert">
      app.css    2.48 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
</div>
     0.js.map    2.07 kB       0  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
   app.js.map    1.64 kB       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
  app.css.map   84 bytes       1  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  app
vendor.js.map     169 kB       2  <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>  vendor
   index.html  274 bytes          <span class="token punctuation" >[</span>emitted<span class="token punctuation" >]</span>
   <span class="token punctuation" >[</span>3<span class="token punctuation" >]</span> ./~/react/lib/ReactElement.js 11.2 kB <span class="token punctuation" >{</span>2<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
  <span class="token punctuation" >[</span>18<span class="token punctuation" >]</span> ./app/component.js 461 bytes <span class="token punctuation" >{</span>1<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
  <span class="token punctuation" >[</span>19<span class="token punctuation" >]</span> ./~/font-awesome/css/font-awesome.css 41 bytes <span class="token punctuation" >{</span>1<span class="token punctuation" >}</span> <span class="token punctuation" >[</span>built<span class="token punctuation" >]</span>
<span class="token punctuation" >..</span>.
</code></pre>
<p><a href="http://cssnano.co/">cssnano</a> has a lot more options to try out.</p>
<h2 class="header"><a class="header-anchor" href="#minifying-html" id="minifying-html"></a><span class="text">Minifying HTML</span><a class="header-anchor-select" href="#minifying-html">#</a></h2>
<p>If you consume HTML templates through your code using <a href="https://www.npmjs.com/package/html-loader">html-loader</a>, you can preprocess it through <a href="https://www.npmjs.com/package/posthtml">posthtml</a> with <a href="https://www.npmjs.com/package/posthtml-loader">posthtml-loader</a>. You can use <a href="https://www.npmjs.com/package/posthtml-minifier">posthtml-minifier</a> to minify your HTML through it.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Minification is the easiest step you can take to make your build smaller. To recap:</p>
<ul>
<li><strong>Minification</strong> process analyzes your source code and turns it into a smaller form with the same meaning if you use safe transformations. Certain unsafe transformations allow you to reach even smaller results while potentially breaking code that relies, for example, on exact parameter naming.</li>
<li><strong>Performance budget</strong> allows you to set limits to the build size. Maintaining a budget can keep developers more conscious of the size of the generated bundles.</li>
<li>Webpack includes <code>UglifyJsPlugin</code> for minification. Other solutions, such as <em>babel-minify-webpack-plugin</em>, provide similar functionality with costs of their own. While <em>babel-minify-webpack-plugin</em> supports ES6, it can be less performant than UglifyJS.</li>
<li>Besides JavaScript, it&#39;s possible to minify other assets, such as CSS and HTML, too. Minifying these requires specific technologies that have to be applied through loaders and plugins of their own.</li>
</ul>
<p>You&#39;ll learn to apply tree shaking against code in the next chapter.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/36c47b3f1c8375e72e592fa332a98cec.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/optimizing/">Optimizing</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/13b3f0692d96a63b33bf8e3f0daf3214.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></div></div><blockquote class="tip"><p>This book is available through <a href="https://leanpub.com/survivejs-webpack">Leanpub (digital)</a>, <a href="https://www.amazon.com/dp/9526868803">Amazon (paperback)</a>, and <a href="https://www.amazon.com/dp/B06XWZZGBS">Kindle (digital)</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Tree Shaking" href="/webpack/optimizing/tree-shaking/"><i class="icon-right-open"></i></a><a class="previous-page" title="Optimizing" href="/webpack/optimizing/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/training/">Get training</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-webpack">Buy the ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></li><li><a class="blog-teaser" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li><a class="blog-teaser" href="/blog/react-next-2017/">Experiences on React Next 2017</a></li><li><a class="blog-teaser" href="/blog/frint-interview/">FrintJS - Build reactive applications with React and RxJS - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/neutrino-interview/">Neutrino - Create modern JavaScript applications with minimal configuration - Interview with Eli Perelman</a></li><li><a class="blog-teaser" href="/blog/idyll-interview/">Idyll - Narratives for the web - Interview with Matthew Conlen</a></li><li><a class="blog-teaser" href="/blog/motorcycle-interview/">Motorcycle.js - A statically-typed, functional and reactive framework for modern browsers - Interview with Tylor Steinberger</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
          indexName: 'survivejs_webpack',
          inputSelector: '#search',
          debug: false
        });
      </script></div></div>

    
  </body>
</html>
