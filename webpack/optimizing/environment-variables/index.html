<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Sometimes a part of your code should execute only during development. Or you could have experimenta…" />
    <meta
      name="keywords"
      content="" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="Environment Variables" />
    <meta property="og:description" content="
Sometimes a part of your code should execute only during development. Or you could have experimenta…" />
    <meta name="twitter:title" content="Environment Variables" />
    <meta name="twitter:description" content="
Sometimes a part of your code should execute only during development. Or you could have experimenta…" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>Environment Variables</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.c164df6cf4c356872a79.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="page"><div class="header-image" style="background-image:url(/5e83591517e8b287a58022df5d3ebede.jpg)"></div><h1 class="page__heading">Environment Variables</h1><div class="header-extra"><a href="https://pixabay.com/en/firewood-combs-thread-cutting-1157304/">cocoparisienne (Public Domain)</a></div><div class="page__container"><div class="page__sidebar"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction/">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/what-is-webpack/">What is Webpack</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing/">Developing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/webpack-dev-server/">webpack-dev-server</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/composing-configuration/">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/styling/">Styling</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/loading/">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/separating-css/">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/autoprefixing/">Autoprefixing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/eliminating-unused-css/">Eliminating Unused CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading/">Loading Assets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/loader-definitions/">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/images/">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/fonts/">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/javascript/">Loading JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building/">Building</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/source-maps/">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/code-splitting/">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/tidying-up/">Tidying Up</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing/">Optimizing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/minifying/">Minifying</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Environment Variables</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/separating-manifest/">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/build-analysis/">Build Analysis</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/performance/">Performance</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/output/">Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/targets/">Build Targets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/multiple-pages/">Multiple Pages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/server-side-rendering/">Server Side Rendering</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/techniques/">Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/web-workers/">Web Workers</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/i18n/">Internationalization</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/deploying/">Deploying Applications</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/consuming/">Consuming Packages</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending/">Extending</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/loaders/">Extending with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/plugins/">Extending with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/comparison/">Comparison of Build Tools</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr/">Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/css-modules/">CSS Modules</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react/">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/glossary/">Glossary</a></li></ul></div><div class="toc-nav__section"></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/fastify-interview/">Fastify - Fast and low overhead web framework for Node.js - Interview with Tomas Della Vedova</a></blockquote></div><div class="chapter-content"><p>Sometimes a part of your code should execute only during development. Or you could have experimental features in your build that are not ready for production yet. This is where controlling <strong>environment variables</strong> becomes valuable as you can toggle functionality using them.</p>
<p>Since JavaScript minifiers can remove dead code (<code>if (false)</code>), you can build on top of this idea and write code that gets transformed into this form. Webpack&#39;s <code>DefinePlugin</code> enables replacing <strong>free variables</strong> so that you can convert <code>if (process.env.NODE_ENV === &quot;development&quot;)</code> kind of code to <code>if (true)</code> or <code>if (false)</code> depending on the environment.</p>
<p>You can find packages that rely on this behavior. React is perhaps the most known example of an early adopter of the technique. Using <code>DefinePlugin</code> can bring down the size of your React production build somewhat as a result, and you can see a similar effect with other packages as well.</p>
<h2 class="header"><a class="header-anchor" href="#the-basic-idea-of-defineplugin" id="the-basic-idea-of-defineplugin"></a><span class="text">The Basic Idea of <code>DefinePlugin</code></span><a class="header-anchor-select" href="#the-basic-idea-of-defineplugin">#</a></h2>
<p>To understand the idea of <code>DefinePlugin</code> better, consider the example below:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-var" >var</span> foo<span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// Not free due to "foo" above, not ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>foo <span class="token operator" >===</span> <span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token comment" spellcheck="true" >// Free since you don't refer to "bar", ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>bar <span class="token operator" >===</span> <span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>If you replaced <code>bar</code> with a string like <code>&quot;foobar&quot;</code>, then you would end up with code as below:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-var" >var</span> foo<span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// Not free due to "foo" above, not ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>foo <span class="token operator" >===</span> <span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token comment" spellcheck="true" >// Free since you don't refer to "bar", ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"foobar"</span> <span class="token operator" >===</span> <span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>Further analysis shows that <code>&quot;foobar&quot; === &quot;bar&quot;</code> equals <code>false</code> so a minifier gives the following:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-var" >var</span> foo<span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// Not free due to "foo" above, not ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>foo <span class="token operator" >===</span> <span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token comment" spellcheck="true" >// Free since you don't refer to "bar", ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token boolean" >false</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>A minifier eliminates the <code>if</code> statement as it has become dead code:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-var" >var</span> foo<span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// Not free, not ok to replace</span>
<span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>foo <span class="token operator" >===</span> <span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  console<span class="token punctuation" >.</span><span class="token function" >log</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"bar"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token comment" spellcheck="true" >// if (false) means the block can be dropped entirely</span>
</code></pre>
<p>Elimination is the core idea of <code>DefinePlugin</code> and it allows toggling. A minifier performs analysis and toggles entire portions of the code.</p>
<h2 class="header"><a class="header-anchor" href="#setting-process-env-node_env" id="setting-process-env-node_env"></a><span class="text">Setting <code>process.env.NODE_ENV</code></span><a class="header-anchor-select" href="#setting-process-env-node_env">#</a></h2>
<p>Given you are using React in the project and it happens to use the technique, you can try to enable <code>DefinePlugin</code> and see what it does to the production build.</p>
<p>As before, encapsulate this idea to a function. Due to the way webpack replaces the free variable, you should push it through <code>JSON.stringify</code>. You end up with a string like <code>&#39;&quot;demo&quot;&#39;</code> and then webpack inserts that into the slots it finds:</p>
<p><strong>webpack.parts.js</strong></p>
<pre><code class="lang-javascript">exports<span class="token punctuation" >.</span><span class="token function-variable function" >setFreeVariable</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>key<span class="token punctuation" >,</span> value<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> env <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
  env<span class="token punctuation brackets-square" >[</span>key<span class="token punctuation brackets-square" >]</span> <span class="token operator" >=</span> JSON<span class="token punctuation" >.</span><span class="token function" >stringify</span><span class="token punctuation brackets-parentheses" >(</span>value<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-braces" >{</span>
    plugins<span class="token punctuation" >:</span> <span class="token punctuation brackets-square" >[</span><span class="token keyword keyword-new" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>DefinePlugin</span><span class="token punctuation brackets-parentheses" >(</span>env<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span>
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>You can connect this with the configuration:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> productionConfig <span class="token operator" >=</span> <span class="token function" >merge</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span>
  <span class="token operator" >...</span>
<div class="leanpub-insert">
  parts<span class="token punctuation" >.</span><span class="token function" >setFreeVariable</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"process.env.NODE_ENV"</span><span class="token punctuation" >,</span> <span class="token string" >"production"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
</div>
<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>Execute <code>npm run build</code> and you should see improved results:</p>
<pre><code class="lang-bash">Hash: 7ed744e79c0813f45427
Version: webpack 3.8.1
Time: 2740ms
        Asset       Size  Chunks             Chunk Names
<div class="leanpub-insert">
    vendor.js    8.36 kB       2  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>  vendor
</div>
       app.js  802 bytes       1  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>  app
<span class="token punctuation" >..</span>.
   index.html  274 bytes          <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>
   <span class="token punctuation brackets-square" >[</span>4<span class="token punctuation brackets-square" >]</span> ./~/object-assign/index.js 2.11 kB <span class="token punctuation brackets-braces" >{</span>2<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-square" >[</span>built<span class="token punctuation brackets-square" >]</span>
  <span class="token punctuation brackets-square" >[</span>14<span class="token punctuation brackets-square" >]</span> ./app/component.js 461 bytes <span class="token punctuation brackets-braces" >{</span>1<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-square" >[</span>built<span class="token punctuation brackets-square" >]</span>
  <span class="token punctuation brackets-square" >[</span>15<span class="token punctuation brackets-square" >]</span> ./app/shake.js 138 bytes <span class="token punctuation brackets-braces" >{</span>1<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-square" >[</span>built<span class="token punctuation brackets-square" >]</span>
<span class="token punctuation" >..</span>.
</code></pre>
<p>You went from 83 kB to 28 kB, and finally, to 8 kB. The final build is faster than the previous one as well.</p>
<p>Given the 8 kB can be served gzipped, it&#39;s somewhat reasonable. gzipping drops around another 40%, and it&#39;s well supported by browsers. It comes with a performance overhead on mobile usage, though.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><code>webpack.EnvironmentPlugin([&quot;NODE_ENV&quot;])</code> is a shortcut that allows you to refer to environment variables. It uses <code>DefinePlugin</code> underneath and you can achieve the same effect by passing <code>process.env.NODE_ENV</code>.</blockquote><h2 class="header"><a class="header-anchor" href="#replacing-free-variables-through-babel" id="replacing-free-variables-through-babel"></a><span class="text">Replacing Free Variables Through Babel</span><a class="header-anchor-select" href="#replacing-free-variables-through-babel">#</a></h2>
<p><a href="https://www.npmjs.com/package/babel-plugin-transform-inline-environment-variables">babel-plugin-transform-inline-environment-variables</a> can be used to achieve the same effect. <a href="https://www.npmjs.com/package/babel-plugin-transform-define">babel-plugin-transform-define</a> and <a href="https://www.npmjs.com/package/babel-plugin-minify-replace">babel-plugin-minify-replace</a> are other alternatives for Babel.</p>
<h2 class="header"><a class="header-anchor" href="#choosing-which-module-to-use" id="choosing-which-module-to-use"></a><span class="text">Choosing Which Module to Use</span><a class="header-anchor-select" href="#choosing-which-module-to-use">#</a></h2>
<p>The techniques discussed in this chapter can be used to choose entire modules depending on the environment. As seen above, <code>DefinePlugin</code> based splitting allows you to choose which branch of code to use and which to discard. This idea can be used to implement branching on module level. Consider the file structure below:</p>
<pre><code class="lang-bash"><span class="token keyword keyword-." >.</span>
└── store
    ├── index.js
    ├── store.dev.js
    └── store.prod.js
</code></pre>
<p>The idea is that you choose either <code>dev</code> or <code>prod</code> version of the store depending on the environment. It&#39;s that <em>index.js</em> which does the hard work:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>process<span class="token punctuation" >.</span>env<span class="token punctuation" >.</span>NODE_ENV <span class="token operator" >===</span> <span class="token string" >"production"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"./store.prod"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-else" >else</span> <span class="token punctuation brackets-braces" >{</span>
  module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"./store.dev"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>Webpack can pick the right code based on the <code>DefinePlugin</code> declaration and this code. You have to use CommonJS module definition style here as ES2015 <code>import</code>s don&#39;t allow dynamic behavior by design.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>A related technique, <strong>aliasing</strong>, is discussed in the <em>Package Consuming Techniques</em> chapter.</blockquote><h2 class="header"><a class="header-anchor" href="#webpack-optimization-plugins" id="webpack-optimization-plugins"></a><span class="text">Webpack Optimization Plugins</span><a class="header-anchor-select" href="#webpack-optimization-plugins">#</a></h2>
<p>Webpack includes a collection of optimization related plugins:</p>
<ul>
<li><a href="https://www.npmjs.com/package/compression-webpack-plugin">compression-webpack-plugin</a> allows you to push the problem of generating compressed files to webpack to potentially save processing time on the server.</li>
<li><code>webpack.optimize.UglifyJsPlugin</code> allows you to minify output using different heuristics. Certain of them break code unless you are careful.</li>
<li><code>webpack.optimize.AggressiveSplittingPlugin</code> allows you to split code into smaller bundles as discussed in the <a href="/webpack/building/bundle-splitting/">Bundle Splitting</a> chapter. The result is ideal for a HTTP/2 environment.</li>
<li><code>webpack.optimize.CommonsChunkPlugin</code> makes it possible to extract common dependencies into bundles of their own.</li>
<li><code>webpack.DefinePlugin</code> allows you to use feature flags in your code and eliminate the redundant code as discussed in this chapter.</li>
<li><a href="https://www.npmjs.com/package/lodash-webpack-plugin">lodash-webpack-plugin</a> creates smaller Lodash builds by replacing feature sets with smaller alternatives leading to more compact builds.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Setting environment variables is a technique that allows you to control which paths of the source are included in the build.</p>
<p>To recap:</p>
<ul>
<li>Webpack allows you to set <strong>environment variables</strong> through <code>DefinePlugin</code> and <code>EnvironmentPlugin</code>. Latter maps system level environment variables to the source.</li>
<li><code>DefinePlugin</code> operates based on <strong>free variables</strong> and it replaces them as webpack analyzes the source code. You can achieve similar results by using Babel plugins.</li>
<li>Given minifiers eliminate dead code, using the plugins allows you to remove the code from the resulting build.</li>
<li>The plugins enable module level patterns. By implementing a wrapper, you can choose which file webpack includes to the resulting build.</li>
<li>In addition to these plugins, you can find other optimization related plugins that allow you to control the build result in many ways.</li>
</ul>
<p>To ensure the build has good cache invalidation behavior, you&#39;ll learn to include hashes to the generated filenames in the next chapter. This way the client notices if assets have changed and can fetch the updated versions.</p>
</div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll" class="social-form__wrapper"><div class="mc-field-group social-form__input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email social-form__input" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-form__subscribe-container"><input type="submit" class="btn button social-form__subscribe" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous chapter</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next chapter</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></div></div><blockquote class="tip"><p>This book is available through <a href="https://leanpub.com/survivejs-webpack">Leanpub (digital)</a>, <a href="https://www.amazon.com/dp/9526868803">Amazon (paperback)</a>, and <a href="https://www.amazon.com/dp/B06XWZZGBS">Kindle (digital)</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of webpack.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div></div></div></div></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/maintenance/">Maintenance book</a></div><div class="nav__link"><a href="/react/">React book</a></div><div class="nav__selected__link"><a href="/webpack/">Webpack book</a></div><div class="nav__link"><a href="/training/">Hire me</a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer class="css-eo7znu css-gqx2od0"><ul class="css-jtawwa css-gqx2od3 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-gqx2od4 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul><div class="css-1gd1yml css-gqx2od1"><h3 class="css-oi3rzz css-gqx2od2">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/fastify-interview/">Fastify - Fast and low overhead web framework for Node.js - Interview with Tomas Della Vedova</a></li><li><a class="blog-teaser" href="/blog/bem-interview/">BEM - Methodology to enable reuse in front-end development - Interview with Sergey Berezhnoy</a></li><li><a class="blog-teaser" href="/blog/summary-of-2017/">SurviveJS - Summary of 2017</a></li><li><a class="blog-teaser" href="/blog/controllerim-interview/">controllerim - MobX Inspired State Management for React - Interview with Nir Yosef</a></li><li><a class="blog-teaser" href="/blog/react-finland-interview/">React Finland - Your Chance to Learn React Up North - Interview with Juho Vepsäläinen</a></li><li><a class="blog-teaser" href="/blog/redux-saga-test-plan-interview/">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</a></li><li><a class="blog-teaser" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></li></ul></div><ul class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><img alt="Maintenance book cover" src="/44f3a3a3dad86956efa57dea740c5d44.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><img alt="React book cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><img alt="Webpack book cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
          indexName: 'survivejs_webpack',
          inputSelector: '#search',
          debug: false
        });
      </script></div></div>

    
  </body>
</html>
