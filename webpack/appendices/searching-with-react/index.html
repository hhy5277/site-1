<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Let&#39;s say you want to implement a rough little search for an application without a proper backend. …" />
    <meta
      name="keywords"
      content="" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="Searching with React" />
    <meta property="og:description" content="
Let&#39;s say you want to implement a rough little search for an application without a proper backend. …" />
    <meta name="twitter:title" content="Searching with React" />
    <meta name="twitter:description" content="
Let&#39;s say you want to implement a rough little search for an application without a proper backend. …" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>Searching with React</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.e89e8c9c56f6873e8067.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <header class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><a title="CSS Modules" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/webpack/appendices/css-modules/"><i class="icon-left-open"></i></a><nav class="nav"><ul class="nav__items"><li class="nav__link"><a href="https://graphql-finland.fi/">GraphQL Finland</a></li><li class="nav__link"><a href="/">Home</a></li><li class="nav__link"><a href="/blog/">Read the blog</a></li><li class="nav__link"><a href="/maintenance/">Maintenance book</a></li><li class="nav__link"><a href="/react/">React book</a></li><li class="nav__link nav__link_selected"><a href="/webpack/">Webpack book</a></li><li class="nav__link"><a href="/training/">Hire me</a></li><li class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></li></ul></nav><a title="Troubleshooting" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/webpack/appendices/troubleshooting/"><i class="icon-right-open"></i></a></header><div class="page"><div class="css-b5dhuc css-8rlsag0"><div style="background-image:url(/391fadff9b02df778c0460b7e6768027.jpg)" class="css-1huzfyy css-8rlsag1"></div><h1 class="css-13wbkqf css-8rlsag2">Searching with React</h1><small aria-hidden="true" class="css-18xzi2i css-8rlsag3"><a href="https://pixabay.com/en/adventure-compass-hand-macro-1850673/">Pexels (Public Domain)</a></small></div><div class="page__container"><div class="css-xfgthk css-20xtq50"><label for="sidebar-toggle" class="css-7vv0nt css-20xtq52">Table of contents</label><input type="checkbox" id="sidebar-toggle" class="css-38lglc css-20xtq53"/><div class="css-nyzxad css-20xtq51"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction/">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/what-is-webpack/">What is Webpack</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing/">Developing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/webpack-dev-server/">webpack-dev-server</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/composing-configuration/">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/styling/">Styling</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/loading/">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/separating-css/">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/eliminating-unused-css/">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/autoprefixing/">Autoprefixing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading/">Loading Assets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/loader-definitions/">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/images/">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/fonts/">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/javascript/">Loading JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building/">Building</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/source-maps/">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/code-splitting/">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/tidying-up/">Tidying Up</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing/">Optimizing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/minifying/">Minifying</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/environment-variables/">Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/separating-manifest/">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/build-analysis/">Build Analysis</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/performance/">Performance</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/output/">Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/targets/">Build Targets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/multiple-pages/">Multiple Pages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/server-side-rendering/">Server Side Rendering</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/techniques/">Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/web-workers/">Web Workers</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/i18n/">Internationalization</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/deploying/">Deploying Applications</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/consuming/">Consuming Packages</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending/">Extending</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/loaders/">Extending with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/plugins/">Extending with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/comparison/">Comparison of Build Tools</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr/">Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/css-modules/">CSS Modules</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Searching with React</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/glossary/">Glossary</a></li></ul></div><div class="toc-nav__section"></div></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></blockquote></div><div class="chapter-content"><p>Let&#39;s say you want to implement a rough little search for an application without a proper backend. You could do it through <a href="http://lunrjs.com/">lunr</a> and generate a static search index to serve.</p>
<p>The problem is that the index can be sizable depending on the amount of the content. The good thing is that you don&#39;t need the search index straight from the start. You can do something smarter instead. You can start loading the index when the user selects a search field.</p>
<p>Doing this defers the loading and moves it to a place where it&#39;s more acceptable for performance. The initial search is going to be slower than the subsequent ones, and you should display a loading indicator. But that&#39;s fine from the user point of view. Webpack&#39;s <a href="/webpack/building/code-splitting/">Code Splitting</a> feature allows doing this.</p>
<h2 class="header"><a class="header-anchor" href="#implementing-search-with-code-splitting" id="implementing-search-with-code-splitting"></a><span class="text">Implementing Search with Code Splitting</span><a class="header-anchor-select" href="#implementing-search-with-code-splitting">#</a></h2>
<p>To implement code splitting, you need to decide where to put the split point, put it there, and then handle the <code>Promise</code>:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"./asset"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span>asset <span class="token operator" >=&gt;</span> <span class="token operator" >...</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token keyword keyword-catch" >catch</span><span class="token punctuation brackets-parentheses" >(</span>err <span class="token operator" >=&gt;</span> <span class="token operator" >...</span><span class="token punctuation brackets-parentheses" >)</span>
</code></pre>
<p>The beautiful thing is that this gives error handling in case something goes wrong (network is down etc.) and gives a chance to recover. You can also use <code>Promise</code> based utilities like <code>Promise.all</code> for composing more complicated queries.</p>
<p>In this case, you need to detect when the user selects the search element, load the data unless it has been loaded already, and then execute search logic against it. Consider the React implementation below:</p>
<p><strong>App.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >"react"</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token keyword keyword-class" >class</span> <span class="token class-name" >App</span> <span class="token keyword keyword-extends" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation brackets-parentheses" >(</span>props<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-super" >super</span><span class="token punctuation brackets-parentheses" >(</span>props<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span>
      index<span class="token punctuation" >:</span> <span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span>
      value<span class="token punctuation" >:</span> <span class="token string" >""</span><span class="token punctuation" >,</span>
      lines<span class="token punctuation" >:</span> <span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span>
      results<span class="token punctuation" >:</span> <span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span>
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function" >render</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> <span class="token punctuation brackets-braces" >{</span> results<span class="token punctuation" >,</span> value <span class="token punctuation brackets-braces" >}</span> <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >;</span>

    <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-parentheses" >(</span>
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"app-container"</span><span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"search-container"</span><span class="token operator" >&gt;</span>
          <span class="token operator" >&lt;</span>label<span class="token operator" >&gt;</span>Search against README<span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>label<span class="token operator" >&gt;</span>
          <span class="token operator" >&lt;</span>input
            type<span class="token operator" >=</span><span class="token string" >"text"</span>
            value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span>
            onChange<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>e <span class="token operator" >=&gt;</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >onChange</span><span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span>
          <span class="token operator" >/</span><span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"results-container"</span><span class="token operator" >&gt;</span>
          <span class="token operator" >&lt;</span>Results results<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>results<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
    <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function" >onChange</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> target<span class="token punctuation" >:</span> <span class="token punctuation brackets-braces" >{</span> value <span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> <span class="token punctuation brackets-braces" >{</span> index<span class="token punctuation" >,</span> lines <span class="token punctuation brackets-braces" >}</span> <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true" >// Set captured value to input</span>
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> value <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

    <span class="token comment" spellcheck="true" >// Search against lines and index if they exist</span>
    <span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>lines <span class="token operator" >&amp;&amp;</span> index<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
      <span class="token keyword keyword-return" >return</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
        results<span class="token punctuation" >:</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >search</span><span class="token punctuation brackets-parentheses" >(</span>lines<span class="token punctuation" >,</span> index<span class="token punctuation" >,</span> value<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>

    <span class="token comment" spellcheck="true" >// If the index doesn't exist, it has to be set it up.</span>
    <span class="token comment" spellcheck="true" >// You could show loading indicator here as loading might</span>
    <span class="token comment" spellcheck="true" >// take a while depending on the size of the index.</span>
    <span class="token function" >loadIndex</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span>
      <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> index<span class="token punctuation" >,</span> lines <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
        <span class="token comment" spellcheck="true" >// Search against the index now.</span>
        <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
          index<span class="token punctuation" >,</span>
          lines<span class="token punctuation" >,</span>
          results<span class="token punctuation" >:</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >search</span><span class="token punctuation brackets-parentheses" >(</span>lines<span class="token punctuation" >,</span> index<span class="token punctuation" >,</span> value<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
        <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
      <span class="token punctuation" >.</span><span class="token keyword keyword-catch" >catch</span><span class="token punctuation brackets-parentheses" >(</span>err <span class="token operator" >=&gt;</span> console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation brackets-parentheses" >(</span>err<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function" >search</span><span class="token punctuation brackets-parentheses" >(</span>lines<span class="token punctuation" >,</span> index<span class="token punctuation" >,</span> query<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token comment" spellcheck="true" >// Search against the index and match README lines.</span>
    <span class="token keyword keyword-return" >return</span> index
      <span class="token punctuation" >.</span><span class="token function" >search</span><span class="token punctuation brackets-parentheses" >(</span>query<span class="token punctuation" >.</span><span class="token function" >trim</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span>
      <span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span>match <span class="token operator" >=&gt;</span> lines<span class="token punctuation brackets-square" >[</span>match<span class="token punctuation" >.</span>ref<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token keyword keyword-const" >const</span> <span class="token function-variable function" >Results</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> results <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-if" >if</span> <span class="token punctuation brackets-parentheses" >(</span>results<span class="token punctuation" >.</span>length<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-parentheses" >(</span>
      <span class="token operator" >&lt;</span>ul<span class="token operator" >&gt;</span>
        <span class="token punctuation brackets-braces" >{</span>results<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span>result<span class="token punctuation" >,</span> i<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>i<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>result<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >&gt;</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >&gt;</span>
    <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>

  <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>span<span class="token operator" >&gt;</span>No results<span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span> <span class="token function" >loadIndex</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token comment" spellcheck="true" >// Here's the magic. Set up `import` to tell Webpack</span>
  <span class="token comment" spellcheck="true" >// to split here and load our search index dynamically.</span>
  <span class="token comment" spellcheck="true" >//</span>
  <span class="token comment" spellcheck="true" >// Note that you will need to shim Promise.all for</span>
  <span class="token comment" spellcheck="true" >// older browsers and Internet Explorer!</span>
  <span class="token keyword keyword-return" >return</span> Promise<span class="token punctuation" >.</span><span class="token function" >all</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span>
    <span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"lunr"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
    <span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"../search_index.json"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
  <span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-braces" >{</span> Index <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-braces" >{</span> index<span class="token punctuation" >,</span> lines <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-braces" >{</span>
      index<span class="token punctuation" >:</span> Index<span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation brackets-parentheses" >(</span>index<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
      lines<span class="token punctuation" >,</span>
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>In the example, webpack detects the <code>import</code> statically. It can generate a separate bundle based on this split point. Given it relies on static analysis, you cannot generalize <code>loadIndex</code> in this case and pass the search index path as a parameter.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Beyond search, the approach can be used with routers too. As the user enters a route, you can load the dependencies the resulting view needs. Alternately, you can start loading dependencies as the user scrolls a page and gets adjacent parts with actual functionality. <code>import</code> provides a lot of power and allows you to keep your application lean.</p>
<p>You can find a <a href="https://github.com/survivejs-demos/lunr-demo">full example</a> showing how it all goes together with lunr, React, and webpack. The basic idea is the same, but there&#39;s more setup in place.</p>
<p>To recap:</p>
<ul>
<li>If your dataset is small and static, client-side search is a good option.</li>
<li>You can index your content using a solution like <a href="http://lunrjs.com/">lunr</a> and then perform a search against it.</li>
<li>Webpack&#39;s <em>code splitting</em> feature is ideal for loading a search index on demand.</li>
<li>Code splitting can be combined with a UI solution like React to implement the whole user interface.</li>
</ul>
</div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-1nfeoes css-va8n550"><input type="email" class="css-baseStyle-1jrw962 css-inputStyle-16d70pc" placeholder="Email" name="EMAIL" id="mce-EMAIL" required=""/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" class="css-baseStyle-1jrw962 css-buttonStyle-1y781j1" value="Subscribe" name="subscribe"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous chapter</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/webpack/appendices/css-modules/">CSS Modules</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next chapter</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></div></div><blockquote class="tip"><p>This book is available through <a href="https://leanpub.com/survivejs-webpack">Leanpub (digital)</a>, <a href="https://www.amazon.com/dp/9526868803">Amazon (paperback)</a>, and <a href="https://www.amazon.com/dp/B06XWZZGBS">Kindle (digital)</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of webpack.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div></div></div></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></li><li><a class="blog-teaser" href="/blog/proppy-interview/">Proppy - Functional props composition for components - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/summer-2018-events/">SurviveJS - Summer Events</a></li><li><a class="blog-teaser" href="/blog/fastpack-interview/">Fastpack - Pack JavaScript code fast and easy - Interview with Oleksiy Golovko</a></li><li><a class="blog-teaser" href="/blog/lint-staged-interview/">lint-staged - Run Linters on git Staged Files - Interview with Andrey Okonetchnikov</a></li><li><a class="blog-teaser" href="/blog/webpack-book-updated-to-webpack-4/">&quot;SurviveJS - Webpack&quot; Updated to webpack 4</a></li><li><a class="blog-teaser" href="/blog/webpack-in-munich-may-2018/">Webpack in Munich, May 2018</a></li></ul></div><ul class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><img alt="Maintenance book cover" src="/44f3a3a3dad86956efa57dea740c5d44.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><img alt="React book cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><img alt="Webpack book cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
          indexName: 'survivejs_webpack',
          inputSelector: '#search',
          debug: false
        });
      </script></div>

    
  </body>
</html>
