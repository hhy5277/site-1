<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="" />
    <title>Loader Definitions</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.95bd6b8a51ba77628faf.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/6f6f10aebab3c6092b5d3853b909bf4e.jpg);"></div><h1 class="post__heading">Loader Definitions</h1><div class="header-extra"><a href="https://pixabay.com/en/tools-technique-open-end-wrench-1093117/">jpj2000nl (Public Domain)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction/">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/what-is-webpack/">What is Webpack</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing/">Developing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/automatic-browser-refresh/">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/linting/">Linting JavaScript</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/composing-configuration/">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/styling/">Styling</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/loading/">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/separating-css/">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/autoprefixing/">Autoprefixing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/eliminating-unused-css/">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/linting/">Linting CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading/">Loading Assets</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Loader Definitions</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/images/">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/fonts/">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/javascript/">Loading JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building/">Building</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/source-maps/">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/code-splitting/">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/tidying-up/">Tidying Up</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing/">Optimizing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/minifying/">Minifying</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/environment-variables/">Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/separating-manifest/">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/analyzing-build-statistics/">Analyzing Build Statistics</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/performance/">Performance</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/output/">Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/targets/">Build Targets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/bundling-libraries/">Bundling Libraries</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/library-output/">Library Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/multiple-pages/">Multiple Pages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/server-side-rendering/">Server Side Rendering</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/techniques/">Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/web-workers/">Web Workers</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/i18n/">Internationalization</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/deploying/">Deploying Applications</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/packages/">Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/consuming/">Consuming Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/consuming-techniques/">Package Consuming Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/authoring/">Authoring Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/authoring-techniques/">Package Authoring Techniques</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending/">Extending</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/loaders/">Extending with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/plugins/">Extending with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/comparison/">Comparison of Build Tools</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr/">Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr-with-react/">Hot Module Replacement with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/customizing-eslint/">Customizing ESLint</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react/">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/glossary/">Glossary</a></li></ul><div><div class="buy-container"><a href="/webpack/foreword"><img alt="Webpack book cover" class="sidebar-cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></p></div><h3>See also</h3><div class="buy-container"><a href="/react/introduction"><img alt="React book cover" class="sidebar-cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/react-day-berlin-interview/">React Day Berlin - Fully Packed Day of Your Favorite React Content - Interview with Robert Haritonov</a></blockquote></div><div class="chapter-content"><p>Webpack provides multiple ways to set up module loaders. Webpack 2 simplified the situation by introducing the <code>use</code> field. The legacy options (<code>loader</code> and <code>loaders</code>) still work, though. You see all the options for completeness, as they exist in older configurations online.</p>
<p>It can be a good idea to prefer absolute paths here as they allow you to move configuration without breaking assumptions. The other option is to set <code>context</code> field as this gives a similar effect and affects the way entry points and loaders are resolved. It doesn&#39;t have an impact on the output, though, and you still need to use an absolute path or <code>/</code> there.</p>
<p>Assuming you set an <code>include</code> or <code>exclude</code> rule, packages loaded from <em>node_modules</em> still work as the assumption is that they have been compiled in such way that they work out of the box. If they don&#39;t, then you have to apply techniques covered in the <a href="/webpack/packages/consuming-techniques/">Package Consuming Techniques</a> chapter.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><code>include</code>/<code>exclude</code> is handy with <em>node_modules</em> as webpack processes and traverses the installed packages by default when you import JavaScript files to your project. Therefore you need to configure it to avoid that behavior. Other file types don&#39;t suffer from this issue.</blockquote><h2 class="header"><a class="header-anchor" href="#anatomy-of-a-loader" id="anatomy-of-a-loader"></a><span class="text">Anatomy of a Loader</span><a class="header-anchor-select" href="#anatomy-of-a-loader">#</a></h2>
<p>Webpack supports a large variety of formats through <em>loaders</em>. Also, it supports a couple of JavaScript module formats out of the box. The idea is the same. You always set up a loader, or loaders, and connect those with your directory structure.</p>
<p>Consider the example below where webpack is set to process JavaScript through Babel:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  module<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    rules<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// **Conditions**</span>
        <span class="token comment" spellcheck="true">// Match files against RegExp or a function.</span>
        test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>

        <span class="token comment" spellcheck="true">// **Restrictions**</span>
        <span class="token comment" spellcheck="true">// Restrict matching to a directory. This</span>
        <span class="token comment" spellcheck="true">// also accepts an array of paths or a function.</span>
        <span class="token comment" spellcheck="true">// The same applies to `exclude`.</span>
        include<span class="token punctuation" >:</span> path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'app'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
        <span class="token function" >exclude</span><span class="token punctuation" >(</span>path<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          <span class="token comment" spellcheck="true">// You can perform more complicated checks</span>
          <span class="token comment" spellcheck="true">// through functions if you want.</span>
          <span class="token keyword" >return</span> path<span class="token punctuation" >.</span><span class="token function" >match</span><span class="token punctuation" >(</span><span class="token regex" >/node_modules/</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

        <span class="token comment" spellcheck="true">// **Actions**</span>
        <span class="token comment" spellcheck="true">// Apply loaders the matched files.</span>
        use<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i>If you are not sure how a particular RegExp matches, consider using an online tool, such as <a href="https://regex101.com/">regex101</a>, <a href="http://regexr.com/">RegExr</a>, or <a href="https://regexper.com">Regexper</a>.</blockquote><h2 class="header"><a class="header-anchor" href="#loader-evaluation-order" id="loader-evaluation-order"></a><span class="text">Loader Evaluation Order</span><a class="header-anchor-select" href="#loader-evaluation-order">#</a></h2>
<p>It&#39;s good to keep in mind that webpack&#39;s loaders are always evaluated from right to left and from bottom to top (separate definitions). The right-to-left rule is easier to remember when you think about as functions. You can read definition <code>use: [&#39;style-loader&#39;, &#39;css-loader&#39;]</code> as <code>style(css(input))</code> based on this rule.</p>
<p>To see the rule in action, consider the example below:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'style-loader'</span><span class="token punctuation" >,</span> <span class="token string" >'css-loader'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>Based on the right to left rule, the example can be split up while keeping it equivalent:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'style-loader'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'css-loader'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#enforcing-order" id="enforcing-order"></a><span class="text">Enforcing Order</span><a class="header-anchor-select" href="#enforcing-order">#</a></h3>
<p>Even though it would be possible to develop an arbitrary configuration using the rule above, it can be convenient to be able to force certain rules to be applied before or after regular ones. The <code>enforce</code> field can come in handy here. It can be set to either <code>pre</code> or <code>post</code> to push processing either before or after other loaders.</p>
<p>You used the idea earlier in the <a href="/webpack/developing/linting/">Linting JavaScript</a> chapter. Linting is a good example as the build should fail before it does anything else. Using <code>enforce: &#39;post&#39;</code> is rarer and it would imply you want to perform a check against the built source. Performing analysis against the built source is one potential example.</p>
<p>The basic syntax goes as below:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  enforce<span class="token punctuation" >:</span> <span class="token string" >'pre'</span><span class="token punctuation" >,</span> <span class="token comment" spellcheck="true">// 'post' too</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  loader<span class="token punctuation" >:</span> <span class="token string" >'eslint-loader'</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>It would be possible to write the same configuration without <code>enforce</code> if you chained the declaration with other loaders related to the <code>test</code> carefully. Using <code>enforce</code> removes the necessity for that allows you to split loader execution into separate stages that are easier to compose.</p>
<h2 class="header"><a class="header-anchor" href="#passing-parameters-to-a-loader" id="passing-parameters-to-a-loader"></a><span class="text">Passing Parameters to a Loader</span><a class="header-anchor-select" href="#passing-parameters-to-a-loader">#</a></h2>
<p>There&#39;s a query format that allows passing parameters to loaders:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  use<span class="token punctuation" >:</span> <span class="token string" >'babel-loader?cacheDirectory,presets[]=es2015'</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>This style of configuration works in entries and source imports too as webpack picks it up. The format comes in handy in certain individual cases, but often you are better off using more readable alternatives.</p>
<p>It&#39;s preferable to use the combination of <code>loader</code> and <code>options</code> fields:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
  options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
    presets<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >,</span> <span class="token string" >'es2015'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>Or you can also go through <code>use</code>:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  <span class="token comment" spellcheck="true">// Conditions</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Actions</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
    options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
      presets<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >,</span> <span class="token string" >'es2015'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>If you wanted to use more than one loader, you could pass an array to <code>use</code> and expand from there:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
  include<span class="token punctuation" >:</span> PATHS<span class="token punctuation" >.</span>app<span class="token punctuation" >,</span>

  use<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >{</span>
      loader<span class="token punctuation" >:</span> <span class="token string" >'babel-loader'</span><span class="token punctuation" >,</span>
      options<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
        cacheDirectory<span class="token punctuation" >:</span> <span class="token boolean" >true</span><span class="token punctuation" >,</span>
        presets<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token string" >'react'</span><span class="token punctuation" >,</span> <span class="token string" >'es2015'</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token comment" spellcheck="true">// Add more loaders here</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#branching-at-use-using-a-function" id="branching-at-use-using-a-function"></a><span class="text">Branching at <code>use</code> Using a Function</span><a class="header-anchor-select" href="#branching-at-use-using-a-function">#</a></h2>
<p>In the book setup, you compose configuration on a higher level. Another option to achieve similar results would be to branch at <code>use</code> as webpack&#39;s loader definitions accept functions that allow you to branch depending on the environment. Consider the example below:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// resource refers to the resource path matched.</span>
  <span class="token comment" spellcheck="true">// resourceQuery contains possible query passed to it (?sourceMap)</span>
  <span class="token comment" spellcheck="true">// issuer tells about match context path</span>
  use<span class="token punctuation" >:</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span> resource<span class="token punctuation" >,</span> resourceQuery<span class="token punctuation" >,</span> issuer <span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// You have to return either something falsy,</span>
    <span class="token comment" spellcheck="true">// string (i.e., 'style-loader'), or an object from here.</span>
    <span class="token comment" spellcheck="true">//</span>
    <span class="token comment" spellcheck="true">// Returning an array fails! To get around that,</span>
    <span class="token comment" spellcheck="true">// it's possible to nest rules.</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>env <span class="token operator" >===</span> <span class="token string" >'development'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token punctuation" >{</span>
        <span class="token comment" spellcheck="true">// Trigger css-loader first</span>
        loader<span class="token punctuation" >:</span> <span class="token string" >'css-loader'</span><span class="token punctuation" >,</span>
        rules<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          <span class="token comment" spellcheck="true">// And style-loader after it</span>
          <span class="token string" >'style-loader'</span><span class="token punctuation" >,</span>
        <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span>

    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>Carefully applied, this technique allows different means of composition.</p>
<h2 class="header"><a class="header-anchor" href="#inline-definitions" id="inline-definitions"></a><span class="text">Inline Definitions</span><a class="header-anchor-select" href="#inline-definitions">#</a></h2>
<p>Even though configuration level loader definitions are preferable, it&#39;s possible to write loader definitions inline:</p>
<pre><code class="lang-javascript"><span class="token comment" spellcheck="true">// Process foo.png through url-loader and other</span>
<span class="token comment" spellcheck="true">// possible matches.</span>
<span class="token keyword" >import</span> <span class="token string" >'url-loader!./foo.png'</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true">// Override possible higher level match completely</span>
<span class="token keyword" >import</span> <span class="token string" >'!!url-loader!./bar.png'</span><span class="token punctuation" >;</span>
</code></pre>
<p>The problem with this approach is that it couples your source with webpack. But it&#39;s a good form to know still. Since configuration entries go through the same mechanism, the same forms work there as well:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  entry<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
    app<span class="token punctuation" >:</span> <span class="token string" >'babel-loader!./app'</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#alternate-ways-to-match-files" id="alternate-ways-to-match-files"></a><span class="text">Alternate Ways to Match Files</span><a class="header-anchor-select" href="#alternate-ways-to-match-files">#</a></h2>
<p><code>test</code> combined with <code>include</code> or <code>exclude</code> to constrain the match is the most common approach to match files. These accept the data types as listed below:</p>
<ul>
<li><code>test</code> - Match against a RegExp, string, function, an object, or an array of conditions like these.</li>
<li><code>include</code> - The same.</li>
<li><code>exclude</code> - The same, except the output is the inverse of <code>include</code>.</li>
<li><code>resource: /inline/</code> - Match against a resource path including the query. Examples: <code>/path/foo.inline.js</code>, <code>/path/bar.png?inline</code>.</li>
<li><code>issuer: /bar.js/</code> - Match against a resource requested from the match. Example: <code>/path/foo.png</code> would match if it was requested from <code>/path/bar.js</code>.</li>
<li><code>resourcePath: /inline/</code> - Match against a resource path without its query. Example: <code>/path/foo.inline.png</code>.</li>
<li><code>resourceQuery: /inline/</code> - Match against a resource based on its query. Example: <code>/path/foo.png?inline</code>.</li>
</ul>
<p>Boolean based fields can be used to constrain these matchers further:</p>
<ul>
<li><code>not</code> - Do <strong>not</strong> match against a condition (see <code>test</code> for accepted values).</li>
<li><code>and</code> - Match against an array of conditions. All must match.</li>
<li><code>or</code> - Match against an array while any must match.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#loading-based-on-resourcequery" id="loading-based-on-resourcequery"></a><span class="text">Loading Based on <code>resourceQuery</code></span><a class="header-anchor-select" href="#loading-based-on-resourcequery">#</a></h2>
<p><code>oneOf</code> field makes it possible to route webpack to a specific loader based on a resource related match:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>

  oneOf<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >{</span>
      resourceQuery<span class="token punctuation" >:</span> <span class="token regex" >/inline/</span><span class="token punctuation" >,</span>
      use<span class="token punctuation" >:</span> <span class="token string" >'url-loader'</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >{</span>
      resourceQuery<span class="token punctuation" >:</span> <span class="token regex" >/external/</span><span class="token punctuation" >,</span>
      use<span class="token punctuation" >:</span> <span class="token string" >'file-loader'</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<p>If you wanted to embed the context information to the filename, the rule could use <code>resourcePath</code> over <code>resourceQuery</code>.</p>
<h2 class="header"><a class="header-anchor" href="#loading-based-on-issuer" id="loading-based-on-issuer"></a><span class="text">Loading Based on <code>issuer</code></span><a class="header-anchor-select" href="#loading-based-on-issuer">#</a></h2>
<p><code>issuer</code> can be used to control behavior based on where a resource was imported. In the example below adapted from <a href="https://github.com/webpack-contrib/css-loader/pull/287#issuecomment-261269199">css-loader issue 287</a>, <em>style-loader</em> is applied only when webpack captures a CSS file from a JavaScript import:</p>
<pre><code class="lang-javascript"><span class="token punctuation" >{</span>
  test<span class="token punctuation" >:</span> <span class="token regex" >/\.css$/</span><span class="token punctuation" >,</span>

  rules<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >{</span>
      issuer<span class="token punctuation" >:</span> <span class="token regex" >/\.js$/</span><span class="token punctuation" >,</span>
      use<span class="token punctuation" >:</span> <span class="token string" >'style-loader'</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >{</span>
      use<span class="token punctuation" >:</span> <span class="token string" >'css-loader'</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#understanding-loader-behavior" id="understanding-loader-behavior"></a><span class="text">Understanding Loader Behavior</span><a class="header-anchor-select" href="#understanding-loader-behavior">#</a></h2>
<p>Loader behavior can be understood in greater detail by inspecting them. <a href="https://www.npmjs.com/package/loader-runner">loader-runner</a> allows you to run them in isolation without webpack. Webpack uses this package internally and <a href="/webpack/extending/loaders/">Extending with Loaders</a> chapter covers it in detail.</p>
<p><a href="https://www.npmjs.com/package/inspect-loader">inspect-loader</a> allows you to inspect what&#39;s being passed between loaders. Instead of having to insert <code>console.log</code>s within <em>node_modules</em>, you can attach this loader to your configuration and inspect the flow there.</p>
<h2 class="header"><a class="header-anchor" href="#loaderoptionsplugin" id="loaderoptionsplugin"></a><span class="text"><code>LoaderOptionsPlugin</code></span><a class="header-anchor-select" href="#loaderoptionsplugin">#</a></h2>
<p>Given webpack 2 forbids arbitrary root level configuration, you have to use <code>LoaderOptionsPlugin</code>. The plugin exists for legacy compatibility and disappears in a future release. Consider the example below:</p>
<pre><code class="lang-javascript">plugins<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
  <span class="token keyword" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>LoaderOptionsPlugin</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
    sassLoader<span class="token punctuation" >:</span> <span class="token punctuation" >{</span>
      includePaths<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
        path<span class="token punctuation" >.</span><span class="token function" >join</span><span class="token punctuation" >(</span>__dirname<span class="token punctuation" >,</span> <span class="token string" >'style'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
<span class="token punctuation" >]</span><span class="token punctuation" >,</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Webpack provides multiple ways to set up loaders but sticking with <code>use</code> is enough in webpack 2. Be careful with loader ordering, as it&#39;s a common source of problems.</p>
<p>To recap:</p>
<ul>
<li><strong>Loaders</strong> allow you determine what should happen when webpack&#39;s module resolution mechanism encounters a file.</li>
<li>A loader definition consists of <strong>conditions</strong> based on which to match and <strong>actions</strong> that should be performed when a match happens.</li>
<li>Webpack 2 introduced the <code>use</code> field. It combines the ideas of old <code>loader</code> and <code>loaders</code> fields into a single construct.</li>
<li>Webpack 2 provides multiple ways to match and alter loader behavior. You can, for example, match based on a <strong>resource query</strong> after a loader has been matched and route the loader to specific actions.</li>
<li><code>LoaderOptionsPlugin</code> exists for legacy purposes and allows you to get around the strict configuration schema of webpack 2.</li>
</ul>
<p>In the next chapter, you&#39;ll learn to load images using webpack.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/57fb50f4ac4bf9913cfebc72c900849d.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/loading/">Loading Assets</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/c94517c380511118db6f67a965439d3a.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/loading/images/">Loading Images</a></div></div><blockquote class="tip"><p>This book is available through <a href="https://leanpub.com/survivejs-webpack">Leanpub (digital)</a>, <a href="https://www.amazon.com/dp/9526868803">Amazon (paperback)</a>, and <a href="https://www.amazon.com/dp/B06XWZZGBS">Kindle (digital)</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Loading Images" href="/webpack/loading/images/"><i class="icon-right-open"></i></a><a class="previous-page" title="Loading Assets" href="/webpack/loading/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/training/">Get training</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-webpack">Buy the ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/react-day-berlin-interview/">React Day Berlin - Fully Packed Day of Your Favorite React Content - Interview with Robert Haritonov</a></li><li><a class="blog-teaser" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></li><li><a class="blog-teaser" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></li><li><a class="blog-teaser" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li><a class="blog-teaser" href="/blog/react-next-2017/">Experiences on React Next 2017</a></li><li><a class="blog-teaser" href="/blog/frint-interview/">FrintJS - Build reactive applications with React and RxJS - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/neutrino-interview/">Neutrino - Create modern JavaScript applications with minimal configuration - Interview with Eli Perelman</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
          indexName: 'survivejs_webpack',
          inputSelector: '#search',
          debug: false
        });
      </script></div></div>

    
  </body>
</html>
