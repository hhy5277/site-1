<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Web applications tend to grow big as features are developed. The longer it takes for your applicati…" />
    <meta
      name="keywords"
      content="" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="Code Splitting" />
    <meta property="og:description" content="
Web applications tend to grow big as features are developed. The longer it takes for your applicati…" />
    <meta name="twitter:title" content="Code Splitting" />
    <meta name="twitter:description" content="
Web applications tend to grow big as features are developed. The longer it takes for your applicati…" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>Code Splitting</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.1fc9bc82d44e37821340.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <header class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><a title="Bundle Splitting" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/webpack/building/bundle-splitting/"><i class="icon-left-open"></i></a><nav class="nav"><ul class="nav__items"><li class="nav__link"><a href="https://graphql-finland.fi/">GraphQL Finland</a></li><li class="nav__link"><a href="/">Home</a></li><li class="nav__link"><a href="/blog/">Read the blog</a></li><li class="nav__link"><a href="/maintenance/">Maintenance book</a></li><li class="nav__link"><a href="/react/">React book</a></li><li class="nav__link nav__link_selected"><a href="/webpack/">Webpack book</a></li><li class="nav__link"><a href="/training/">Hire me</a></li><li class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></li></ul></nav><a title="Tidying Up" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/webpack/building/tidying-up/"><i class="icon-right-open"></i></a></header><div class="page"><div class="css-b5dhuc css-8rlsag0"><div style="background-image:url(/462fe6070b9ddc469e993976020cfdd3.jpg)" class="css-1huzfyy css-8rlsag1"></div><h1 class="css-13wbkqf css-8rlsag2">Code Splitting</h1><small aria-hidden="true" class="css-18xzi2i css-8rlsag3"><a href="https://pixabay.com/en/walnut-italian-cane-shell-hard-1776466/">Arcaion (Public Domain)</a></small></div><div class="page__container"><div class="css-xfgthk css-20xtq50"><label for="sidebar-toggle" class="css-1whlnn6 css-20xtq52">Table of contents</label><input type="checkbox" id="sidebar-toggle" class="css-38lglc css-20xtq53"/><div class="css-nyzxad css-20xtq51"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction/">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/what-is-webpack/">What is Webpack</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing/">Developing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/webpack-dev-server/">webpack-dev-server</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/composing-configuration/">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/styling/">Styling</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/loading/">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/separating-css/">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/eliminating-unused-css/">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/autoprefixing/">Autoprefixing</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading/">Loading Assets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/loader-definitions/">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/images/">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/fonts/">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/javascript/">Loading JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building/">Building</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/source-maps/">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Code Splitting</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/tidying-up/">Tidying Up</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing/">Optimizing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/minifying/">Minifying</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/environment-variables/">Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/separating-manifest/">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/build-analysis/">Build Analysis</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/performance/">Performance</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/output/">Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/targets/">Build Targets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/multiple-pages/">Multiple Pages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/server-side-rendering/">Server Side Rendering</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/techniques/">Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/web-workers/">Web Workers</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/i18n/">Internationalization</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/deploying/">Deploying Applications</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/consuming/">Consuming Packages</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending/">Extending</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/loaders/">Extending with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/plugins/">Extending with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/comparison/">Comparison of Build Tools</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr/">Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/css-modules/">CSS Modules</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react/">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/glossary/">Glossary</a></li></ul></div><div class="toc-nav__section"></div></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/webcampzg-2018/">Experiences on WebCamp Zagreb 2018</a></blockquote></div><div class="chapter-content"><p>Web applications tend to grow big as features are developed. The longer it takes for your application to load, the more frustrating it&#39;s to the user. This problem is amplified in a mobile environment where the connections can be slow.</p>
<p>Even though splitting bundles can help a notch, they are not the only solution, and you can still end up having to download a lot of data. Fortunately, it&#39;s possible to do better thanks to <strong>code splitting</strong>. It allows loading code lazily as you need it.</p>
<p>You can load more code as the user enters a new view of the application. You can also tie loading to a specific action like scrolling or clicking a button. You could also try to predict what the user is trying to do next and load code based on your guess. This way the functionality would be already there as the user tries to access it.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Incidentally, it&#39;s possible to implement Google&#39;s <a href="https://developers.google.com/web/fundamentals/performance/prpl-pattern/">PRPL pattern</a> using webpack&#39;s lazy loading. PRPL (Push, Render, Pre-cache, Lazy-load) has been designed with mobile web in mind.</blockquote><h2 class="header"><a class="header-anchor" href="#code-splitting-formats" id="code-splitting-formats"></a><span class="text">Code Splitting Formats</span><a class="header-anchor-select" href="#code-splitting-formats">#</a></h2>
<p>Code splitting can be done in two primary ways in webpack: through a dynamic <code>import</code> or <code>require.ensure</code> syntax. The former is used in this project.</p>
<p>The goal is to end up with a split point that gets loaded on demand. There can be splits inside splits, and you can structure an entire application based on splits. The advantage of doing this is that then the initial payload of your application can be smaller than it would be otherwise.</p>
<p><figure><img src="/d0157e4db2b71adc9a7a25316309c3d1.png" alt="Code splitting" class="" width="" height="" /><figcaption>Code splitting</figcaption></figure></p>
<h3 class="header"><a class="header-anchor" href="#dynamic-import" id="dynamic-import"></a><span class="text">Dynamic <code>import</code></span><a class="header-anchor-select" href="#dynamic-import">#</a></h3>
<p>The <a href="https://github.com/tc39/proposal-dynamic-import">dynamic <code>import</code> syntax</a> isn&#39;t in the official language specification yet. Minor tweaks are needed especially at the Babel setup for this reason.</p>
<p>Dynamic imports are defined as <code>Promise</code>s:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token comment" spellcheck="true" >/* webpackChunkName: "optional-name" */</span> <span class="token string" >"./module"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span>
  module <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span><span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token keyword keyword-catch" >catch</span><span class="token punctuation brackets-parentheses" >(</span>
  error <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span><span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>The optional name allows you to pull multiple split points into a single bundle. As long as they have the same name, they will be grouped. Each split point generates a separate bundle by default.</p>
<p>The interface allows composition, and you could load multiple resources in parallel:</p>
<pre><code class="lang-javascript">Promise<span class="token punctuation" >.</span><span class="token function" >all</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span>
  <span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"lunr"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
  <span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"../search_index.json"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span>lunr<span class="token punctuation" >,</span> search<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-braces" >{</span>
    index<span class="token punctuation" >:</span> lunr<span class="token punctuation" >.</span>Index<span class="token punctuation" >.</span><span class="token function" >load</span><span class="token punctuation brackets-parentheses" >(</span>search<span class="token punctuation" >.</span>index<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
    lines<span class="token punctuation" >:</span> search<span class="token punctuation" >.</span>lines<span class="token punctuation" >,</span>
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>The code above creates separate bundles to a request. If you wanted only one, you would have to use naming or define an intermediate module to <code>import</code>.</p>
<blockquote class="warning"><i class="icon-attention"></i>The syntax works only with JavaScript after configuring it the right way. If you use another environment you may have to use alternatives covered in the following sections.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>There&#39;s an older syntax, <a href="https://webpack.js.org/api/module-methods/#require-ensure">require.ensure</a>. In practice the new syntax can cover the same functionality. See also <a href="https://webpack.js.org/api/module-methods/#require-include">require.include</a>.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://github.com/webpack/webpack-pwa">webpack-pwa</a> illustrates the idea on a larger scale and discusses different shell based approaches. You get back to this topic in the <a href="/webpack/output/multiple-pages/">Multiple Pages</a> chapter.</blockquote><h2 class="header"><a class="header-anchor" href="#setting-up-code-splitting" id="setting-up-code-splitting"></a><span class="text">Setting Up Code Splitting</span><a class="header-anchor-select" href="#setting-up-code-splitting">#</a></h2>
<p>To demonstrate the idea of code splitting, you can use dynamic <code>import</code>. The Babel setup of the project needs additions to make the syntax work.</p>
<h3 class="header"><a class="header-anchor" href="#configuring-babel" id="configuring-babel"></a><span class="text">Configuring Babel</span><a class="header-anchor-select" href="#configuring-babel">#</a></h3>
<p>Given Babel doesn&#39;t support the dynamic <code>import</code> syntax out of the box, it needs <a href="https://www.npmjs.com/package/@babel/plugin-syntax-dynamic-import">@babel/plugin-syntax-dynamic-import</a> to work.</p>
<p>Install it first:</p>
<pre><code class="lang-bash"><span class="token function" >npm</span> <span class="token function" >install</span> @babel/plugin-syntax-dynamic-import --save-dev
</code></pre>
<p>To connect it with the project, adjust the configuration as follows:</p>
<p><strong>.babelrc</strong></p>
<pre><code class="lang-json"><span class="token punctuation brackets-braces" >{</span>
<div class="leanpub-insert">
  <span class="token property" >"plugins"</span><span class="token operator" >:</span> <span class="token punctuation brackets-square" >[</span><span class="token string" >"@babel/plugin-syntax-dynamic-import"</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span>
</div>
  ...
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<blockquote class="warning"><i class="icon-attention"></i>If you are using ESLint, you should install <code>babel-eslint</code> and set <code>parser: &quot;babel-eslint&quot;</code> in addition to <code>parserOptions.allowImportExportEverywhere: true</code> at ESLint configuration.</blockquote><h3 class="header"><a class="header-anchor" href="#defining-a-split-point-using-a-dynamic-import" id="defining-a-split-point-using-a-dynamic-import"></a><span class="text">Defining a Split Point Using a Dynamic <code>import</code></span><a class="header-anchor-select" href="#defining-a-split-point-using-a-dynamic-import">#</a></h3>
<p>The idea can be demonstrated by setting up a module that contains a string that replaces the text of the demo button:</p>
<p><strong>src/lazy.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token string" >"Hello from lazy"</span><span class="token punctuation" >;</span>
</code></pre>
<p>You also need to point the application to this file, so the application knows to load it by binding the loading process to click. Whenever the user happens to click the button, you trigger the loading process and replace the content:</p>
<p><strong>src/component.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span>text <span class="token operator" >=</span> <span class="token string" >"Hello world"</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> element <span class="token operator" >=</span> document<span class="token punctuation" >.</span><span class="token function" >createElement</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"div"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  element<span class="token punctuation" >.</span>className <span class="token operator" >=</span> <span class="token string" >"pure-button"</span><span class="token punctuation" >;</span>
  element<span class="token punctuation" >.</span>innerHTML <span class="token operator" >=</span> text<span class="token punctuation" >;</span>
<div class="leanpub-insert">
  element<span class="token punctuation" >.</span><span class="token function-variable function" >onclick</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span>
    <span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"./lazy"</span><span class="token punctuation brackets-parentheses" >)</span>
      <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span>lazy <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
        element<span class="token punctuation" >.</span>textContent <span class="token operator" >=</span> lazy<span class="token punctuation" >.</span><span class="token keyword keyword-default" >default</span><span class="token punctuation" >;</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
      <span class="token punctuation" >.</span><span class="token keyword keyword-catch" >catch</span><span class="token punctuation brackets-parentheses" >(</span>err <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
        console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation brackets-parentheses" >(</span>err<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</div>

  <span class="token keyword keyword-return" >return</span> element<span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
</code></pre>
<p>If you open up the application (<code>npm start</code>) and click the button, you should see the new text in the button.</p>
<p><figure><img src="/dce3fe2f7428b1393e3f4553b675fa59.png" alt="Lazy loaded content" class="" width="" height="" /><figcaption>Lazy loaded content</figcaption></figure></p>
<p>If you run <code>npm run build</code>, you should see something:</p>
<pre><code class="lang-bash">Hash: 063e54c36163f79e8c90
Version: webpack 4.1.1
Time: 3185ms
Built at: 3/16/2018 5:04:04 PM
               Asset       Size  Chunks             Chunk Names
<div class="leanpub-insert">
            0.js.map  198 bytes       0  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>
                0.js  156 bytes       0  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>
</div>
             main.js    2.2 KiB       2  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>  main
            main.css   1.27 KiB       2  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>  main
    vendors~main.css   2.27 KiB       1  <span class="token punctuation brackets-square" >[</span>emitted<span class="token punctuation brackets-square" >]</span>  vendors~main
<span class="token punctuation" >..</span>.
</code></pre>
<p>That <em>0.js</em> is your split point. Examining the file reveals that webpack has wrapped the code in a <code>webpackJsonp</code> block and processed the code bit.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>If you want to adjust the name of the chunk, set <code>output.chunkFilename</code>. For example, setting it to <code>&quot;chunk.[id].js&quot;</code> would prefix each split chunk with the word &quot;chunk&quot;.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/bundle-loader">bundle-loader</a> gives similar results, but through a loader interface. It supports bundle naming through its <code>name</code> option.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>The <a href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a> chapter covers other techniques that come in handy when you have to deal with more complicated splits.</blockquote><h2 class="header"><a class="header-anchor" href="#code-splitting-in-react" id="code-splitting-in-react"></a><span class="text">Code Splitting in React</span><a class="header-anchor-select" href="#code-splitting-in-react">#</a></h2>
<p>The splitting pattern can be wrapped into a React component. Airbnb uses the following solution <a href="https://gist.github.com/lencioni/643a78712337d255f5c031bfc81ca4cf">as described by Joe Lencioni</a>:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >"react"</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// Somewhere in code</span>
<span class="token operator" >&lt;</span>AsyncComponent loader<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token keyword keyword-import" >import</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"./SomeComponent"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span>

<span class="token keyword keyword-class" >class</span> <span class="token class-name" >AsyncComponent</span> <span class="token keyword keyword-extends" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation brackets-parentheses" >(</span>props<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-super" >super</span><span class="token punctuation brackets-parentheses" >(</span>props<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span> Component<span class="token punctuation" >:</span> <span class="token keyword keyword-null" >null</span> <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function" >componentDidMount</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span><span class="token function" >loader</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span>
      Component <span class="token operator" >=&gt;</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> Component <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function" >render</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> <span class="token punctuation brackets-braces" >{</span> Component <span class="token punctuation brackets-braces" >}</span> <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >;</span>
    <span class="token keyword keyword-const" >const</span> <span class="token punctuation brackets-braces" >{</span> Placeholder<span class="token punctuation" >,</span> <span class="token operator" >...</span>props <span class="token punctuation brackets-braces" >}</span> <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >;</span>

    <span class="token keyword keyword-return" >return</span> Component <span class="token operator" >?</span> <span class="token operator" >&lt;</span>Component <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span> <span class="token punctuation" >:</span> <span class="token operator" >&lt;</span>Placeholder <span class="token operator" >/</span><span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>
AsyncComponent<span class="token punctuation" >.</span>propTypes <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span>
  loader<span class="token punctuation" >:</span> PropTypes<span class="token punctuation" >.</span>func<span class="token punctuation" >.</span>isRequired<span class="token punctuation" >,</span>
  Placeholder<span class="token punctuation" >:</span> PropTypes<span class="token punctuation" >.</span>node<span class="token punctuation" >.</span>isRequired<span class="token punctuation" >,</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/react-async-component">react-async-component</a> wraps the pattern in a <code>createAsyncComponent</code> call and provides server side rendering specific functionality. <a href="https://www.npmjs.com/package/loadable-components">loadable-components</a> is another option.</blockquote><h2 class="header"><a class="header-anchor" href="#disabling-code-splitting" id="disabling-code-splitting"></a><span class="text">Disabling Code Splitting</span><a class="header-anchor-select" href="#disabling-code-splitting">#</a></h2>
<p>Although code splitting is good behavior to have by default, it&#39;s not correct always, especially on server-side usage. For this reason, it can be disabled as below:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> webpack <span class="token operator" >=</span> <span class="token function" >require</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"webpack"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<span class="token operator" >...</span>

module<span class="token punctuation" >.</span>exports <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span>
  plugins<span class="token punctuation" >:</span> <span class="token punctuation brackets-square" >[</span>
    <span class="token keyword keyword-new" >new</span> <span class="token class-name" >webpack<span class="token punctuation" >.</span>optimize<span class="token punctuation" >.</span>LimitChunkCountPlugin</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
      maxChunks<span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >,</span>
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
  <span class="token punctuation brackets-square" >]</span><span class="token punctuation" >,</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
</code></pre>
<blockquote class="tip"><i class="icon-attention-circled"></i>See <a href="https://medium.com/@glennreyes/how-to-disable-code-splitting-in-webpack-1c0b1754a3c5">Glenn Reyes&#39; detailed explanation</a>.</blockquote><h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Code splitting is a feature that allows you to push your application a notch further. You can load code when you need it to gain faster initial load times and improved user experience especially in a mobile context where bandwidth is limited.</p>
<p>To recap:</p>
<ul>
<li><strong>Code splitting</strong> comes with extra effort as you have to decide what to split and where. Often, you find good split points within a router. Or you notice that specific functionality is required only when a particular feature is used. Charting is an excellent example of this.</li>
<li>To use dynamic <code>import</code> syntax, both Babel and ESLint require careful tweaks. Webpack supports the syntax out of the box.</li>
<li>Use naming to pull separate split points into the same bundles.</li>
<li>The techniques can be used within modern frameworks and libraries like React. You can wrap related logic to a specific component that handles the loading process in a user-friendly manner.</li>
<li>To disable code splitting, use <code>webpack.optimize.LimitChunkCountPlugin</code> with <code>maxChunks</code> set to one.</li>
</ul>
<p>You&#39;ll learn to tidy up the build in the next chapter.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>The <a href="/webpack/appendices/searching-with-react/">Searching with React</a> appendix contains a complete example of code splitting. It shows how to set up a static site index that&#39;s loaded when the user searches information.</blockquote></div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-1nfeoes css-va8n550"><input type="email" class="css-baseStyle-s4lgck css-inputStyle-16d70pc" placeholder="Email" name="EMAIL" id="mce-EMAIL" required=""/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" class="css-baseStyle-s4lgck css-buttonStyle-1y781j1" value="Subscribe" name="subscribe"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous chapter</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next chapter</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/webpack/building/tidying-up/">Tidying Up</a></div></div><blockquote class="tip"><p>This book is available through <a href="https://leanpub.com/survivejs-webpack">Leanpub (digital)</a>, <a href="https://www.amazon.com/dp/9526868803">Amazon (paperback)</a>, and <a href="https://www.amazon.com/dp/B06XWZZGBS">Kindle (digital)</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of webpack.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div></div></div></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/webcampzg-2018/">Experiences on WebCamp Zagreb 2018</a></li><li><a class="blog-teaser" href="/blog/webexpo-2018/">Experiences on WebExpo 2018</a></li><li><a class="blog-teaser" href="/blog/refract-interview/">Refract - Manage Component Side Effects the Reactive Way - Interview with Thomas Roch.</a></li><li><a class="blog-teaser" href="/blog/dss-interview/">DSS - Deterministic Style Sheets - Interview with Giuseppe Gurgone</a></li><li><a class="blog-teaser" href="/blog/fall-2018-events/">SurviveJS - Fall Events</a></li><li><a class="blog-teaser" href="/blog/uppy-interview/">Uppy - Painless Uploads for JavaScript - Interview with Artur Paikin</a></li><li><a class="blog-teaser" href="/blog/graphql-finland-interview/">GraphQL Finland - Learn GraphQL Up North - Interview with Mikhail Novikov</a></li></ul></div><ul aria-label="Other Juho&#x27;s books" class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - Maintenance: Streamline JavaScript Workflow</h4><img alt="Maintenance book cover" src="/2900d9b74e46ac6cdf984148c1a0c631.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - React: From apprentice to master</h4><img alt="React book cover" src="/2412b7150d25c1dc3c309666132bc26e.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - Webpack: From apprentice to master</h4><img alt="Webpack book cover" src="/20cf3367cf445212a90411ccd2282229.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
          indexName: 'survivejs_webpack',
          inputSelector: '#search',
          debug: false
        });
      </script></div>

    
  </body>
</html>
