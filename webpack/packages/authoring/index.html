<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="" />
    <meta
      name="keywords"
      content="" />
    <title>Authoring Packages</title>
    
    <link rel='icon' type='image/png' href='/assets/favicon.png'></link>

    
      <link href="/site.6e15d3a2faab770994d8.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="chapter__wrapper"><div class="header-image" style="background-image:url(/26ed4b217447d9cf989ff4053ec17712.jpg);"></div><h1 class="post__heading">Authoring Packages</h1><div class="header-extra"><a href="https://www.flickr.com/photos/19219926@N04/3707001321">Duke University Archives (CC BY-NC-SA)</a></div><div class="toc-nav__wrapper"><h4 class="search-nav--header">Search</h4><input id="search"/><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/foreword/">Foreword</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/preface/">Preface</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/introduction/">Introduction</a></li><li class="toc-intro"><a class="toc-nav__link intro" href="/webpack/what-is-webpack/">What is Webpack</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/developing/">Developing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/automatic-browser-refresh/">Automatic Browser Refresh</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/linting/">Linting JavaScript</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/developing/composing-configuration/">Composing Configuration</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/styling/">Styling</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/loading/">Loading Styles</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/separating-css/">Separating CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/autoprefixing/">Autoprefixing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/eliminating-unused-css/">Eliminating Unused CSS</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/styling/linting/">Linting CSS</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/loading/">Loading Assets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/loader-definitions/">Loader Definitions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/images/">Loading Images</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/fonts/">Loading Fonts</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/loading/javascript/">Loading JavaScript</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/building/">Building</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/source-maps/">Source Maps</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/bundle-splitting/">Bundle Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/code-splitting/">Code Splitting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/building/tidying-up/">Tidying Up</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/optimizing/">Optimizing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/minifying/">Minifying</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/tree-shaking/">Tree Shaking</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/environment-variables/">Environment Variables</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/adding-hashes-to-filenames/">Adding Hashes to Filenames</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/separating-manifest/">Separating a Manifest</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/analyzing-build-statistics/">Analyzing Build Statistics</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/optimizing/performance/">Performance</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/output/">Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/targets/">Build Targets</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/bundling-libraries/">Bundling Libraries</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/library-output/">Library Output</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/multiple-pages/">Multiple Pages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/output/server-side-rendering/">Server Side Rendering</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/techniques/">Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/dynamic-loading/">Dynamic Loading</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/web-workers/">Web Workers</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/i18n/">Internationalization</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/testing/">Testing</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/techniques/deploying/">Deploying Applications</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/packages/">Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/consuming/">Consuming Packages</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/consuming-techniques/">Package Consuming Techniques</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Authoring Packages</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/packages/authoring-techniques/">Package Authoring Techniques</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/extending/">Extending</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/loaders/">Extending with Loaders</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/extending/plugins/">Extending with Plugins</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/conclusion/">Conclusion</a></li><li class="toc-part"><a class="toc-nav__link part" href="/webpack/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/comparison/">Comparison of Build Tools</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr/">Hot Module Replacement</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/hmr-with-react/">Hot Module Replacement with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/customizing-eslint/">Customizing ESLint</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/searching-with-react/">Searching with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/troubleshooting/">Troubleshooting</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/webpack/appendices/glossary/">Glossary</a></li></ul><div><div class="buy-container"><a href="/webpack/foreword"><img alt="Webpack book cover" class="sidebar-cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal btn--buy" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a><a class="btn btn--normal btn--buy" href="https://survivejs.typeform.com/to/LUQK0T">Buy Signed LE</a></p></div><h3>See also</h3><div class="buy-container"><a href="/react/introduction"><img alt="React book cover" class="sidebar-cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329"/></a><p><a class="btn btn--normal btn--buy" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></p></div></div></div><div class="chapter"><div class="post__content"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></blockquote></div><div class="chapter-content"><p>Even though webpack is handy for bundling applications, it has its uses for package authors as well. It allows you to generate the distribution bundles required by npm. You can also generate the package site through webpack.</p>
<p>In this chapter, you&#39;ll learn basic ideas behind authoring npm packages and a couple of webpack specific techniques.</p>
<h2 class="header"><a class="header-anchor" href="#anatomy-of-an-npm-package" id="anatomy-of-an-npm-package"></a><span class="text">Anatomy of an npm Package</span><a class="header-anchor-select" href="#anatomy-of-an-npm-package">#</a></h2>
<p>Most of the available npm packages are small and include only a couple of files:</p>
<ul>
<li><em>index.js</em> - On small projects, it&#39;s enough to have the code at the root. On larger ones, you likely want to start splitting it up further.</li>
<li><em>package.json</em> - npm metadata in JSON format.</li>
<li><em>README.md</em> - README is the most important document of your project. It&#39;s written in Markdown format and provides an overview. For smallest projects, the full documentation can fit there. It&#39;s shown on the package page at <em>npmjs.com</em>.</li>
<li><em>LICENSE</em> - You can include licensing information within your project. You should refer to the license by name from <em>package.json</em> as otherwise, npm gives a warning. If you are using a custom license, you can link to it instead. In commercial projects, you should to set <code>&quot;private&quot;: true</code> to avoid pushing your work to public inadvertently.</li>
</ul>
<p>In larger projects, you often find the following:</p>
<ul>
<li><em>CONTRIBUTING.md</em> - A guide for potential contributors describing how the code should be developed.</li>
<li><em>CHANGELOG.md</em> - This document describes major changes per version. If you do significant API changes, it can be a good idea to cover them here. It&#39;s possible to generate the file based on Git commit history, provided you write nice enough commits.</li>
<li><em>.travis.yml</em> - <a href="https://travis-ci.org/">Travis CI</a> is a popular continuous integration platform that is free for open source projects. You can run the tests of your package over multiple systems using it.</li>
<li><em>.gitignore</em> - Ignore patterns for Git, i.e., which files shouldn&#39;t go under version control. You can ignore npm distribution files here, so they don&#39;t clutter your repository.</li>
<li><em>.npmignore</em> - Ignore patterns for npm describe which files shouldn&#39;t go to your distribution version. A good alternative is to use the <a href="https://docs.npmjs.com/files/package.json#files">files</a> field at <em>package.json</em>. It allows you to maintain a whitelist of files to include into your distribution version.</li>
<li><em>.eslintignore</em> - Ignore patterns for ESLint. Again, tool specific.</li>
<li><em>.eslintrc</em> - Linting rules. You can use <em>.jshintrc</em> and such based on your preferences.</li>
<li><em>webpack.config.js</em> - If you are using a basic setup, you can have the configuration at project root.</li>
</ul>
<p>Also, you likely have separate directories for the source, tests, demos, documentation, and so on.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>If you want to decrease the size of your dependencies, consider using a tool like <a href="https://www.npmjs.com/package/package-config-checker">package-config-checker</a>. It can pinpoint packages not using the <code>files</code> field correctly. Once you know which ones haven&#39;t set it, you can consider making Pull Requests (PRs) to those projects.</blockquote><h2 class="header"><a class="header-anchor" href="#understanding-package-json-" id="understanding-package-json-"></a><span class="text">Understanding <em>package.json</em></span><a class="header-anchor-select" href="#understanding-package-json-">#</a></h2>
<p>All packages come with a <em>package.json</em> that describes metadata related to them and includes information about the author, links, dependencies, and so on. The <a href="https://docs.npmjs.com/files/package.json">official documentation</a> covers them in detail.</p>
<p>The example below contains an annotated a part of <em>package.json</em> from my <a href="https://github.com/survivejs/react-component-boilerplate">React component boilerplate</a>:</p>
<pre><code class="lang-json"><span class="token punctuation" >{</span>
  /* Name of the project */
  <span class="token property" >"name"</span><span class="token operator" >:</span> <span class="token string" >"react-component-boilerplate"</span><span class="token punctuation" >,</span>

  /* Brief description */
  <span class="token property" >"description"</span><span class="token operator" >:</span> <span class="token string" >"Boilerplate for React.js components"</span><span class="token punctuation" >,</span>

  /* Who is the author + optional email + optional site */
  <span class="token property" >"author"</span><span class="token operator" >:</span> <span class="token string" >"Juho Vepsäläinen &lt;email goes here> (site goes here)"</span><span class="token punctuation" >,</span>

  /* Version of the package */
  <span class="token property" >"version"</span><span class="token operator" >:</span> <span class="token string" >"0.0.0"</span><span class="token punctuation" >,</span>

  /* `npm run &lt;name>` - `npm run` to get the available commands */
  <span class="token property" >"scripts"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"start"</span><span class="token operator" >:</span> <span class="token string" >"webpack-dev-server --env development"</span><span class="token punctuation" >,</span>

    <span class="token property" >"test"</span><span class="token operator" >:</span> <span class="token string" >"jest"</span><span class="token punctuation" >,</span>
    "test<span class="token operator" >:</span>coverage"<span class="token operator" >:</span> <span class="token string" >"jest --coverage"</span><span class="token punctuation" >,</span>
    "test<span class="token operator" >:</span>watch"<span class="token operator" >:</span> <span class="token string" >"jest --watch"</span><span class="token punctuation" >,</span>

    "lint<span class="token operator" >:</span>js"<span class="token operator" >:</span> <span class="token string" >"eslint . --ext .js --ext .jsx --ignore-path .gitignore --ignore-pattern dist --cache"</span><span class="token punctuation" >,</span>

    <span class="token property" >"gh-pages"</span><span class="token operator" >:</span> <span class="token string" >"webpack --env gh-pages"</span><span class="token punctuation" >,</span>
    "gh-pages<span class="token operator" >:</span>deploy"<span class="token operator" >:</span> <span class="token string" >"gh-pages -d gh-pages"</span><span class="token punctuation" >,</span>
    "gh-pages<span class="token operator" >:</span>stats"<span class="token operator" >:</span> <span class="token string" >"webpack --env gh-pages --json > stats.json"</span><span class="token punctuation" >,</span>

    "dist<span class="token operator" >:</span>all"<span class="token operator" >:</span> <span class="token string" >"npm run dist &amp;&amp; npm run dist:min"</span><span class="token punctuation" >,</span>
    <span class="token property" >"dist"</span><span class="token operator" >:</span> <span class="token string" >"webpack --env dist"</span><span class="token punctuation" >,</span>
    "dist<span class="token operator" >:</span>min"<span class="token operator" >:</span> <span class="token string" >"webpack --env dist:min"</span><span class="token punctuation" >,</span>
    "dist<span class="token operator" >:</span>modules"<span class="token operator" >:</span> <span class="token string" >"rimraf ./dist-modules &amp;&amp; babel ./src --out-dir ./dist-modules"</span><span class="token punctuation" >,</span>

    <span class="token property" >"pretest"</span><span class="token operator" >:</span> <span class="token string" >"npm run lint:js"</span><span class="token punctuation" >,</span>
    <span class="token property" >"preversion"</span><span class="token operator" >:</span> <span class="token string" >"npm run test &amp;&amp; npm run dist:all &amp;&amp; git commit --allow-empty -am \"</span>Update dist\<span class="token string" >""</span><span class="token punctuation" >,</span>
    <span class="token property" >"prepublish"</span><span class="token operator" >:</span> <span class="token string" >"npm run dist:modules"</span><span class="token punctuation" >,</span>
    <span class="token property" >"postpublish"</span><span class="token operator" >:</span> <span class="token string" >"npm run gh-pages &amp;&amp; npm run gh-pages:deploy"</span><span class="token punctuation" >,</span>

    /* If your library is installed through Git<span class="token punctuation" >,</span> transpile it */
    <span class="token property" >"postinstall"</span><span class="token operator" >:</span> <span class="token string" >"node lib/postinstall.js"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  /* Entry point for terminal (i.e.<span class="token punctuation" >,</span> &lt;package name><span class="token punctuation" >)</span>. */
  /* Don't set this unless you intend to allow Command line usage */
  <span class="token property" >"bin"</span><span class="token operator" >:</span> <span class="token string" >"bin/index.js"</span><span class="token punctuation" >,</span>

  /* Entry point (defaults to index.js<span class="token punctuation" >)</span> */
  <span class="token property" >"main"</span><span class="token operator" >:</span> <span class="token string" >"dist-modules/"</span><span class="token punctuation" >,</span>

  /* ES6 module based entry point for tree shaking bundlers to pick up. */
  /* Apart from the module format<span class="token punctuation" >,</span> the code should use ES5 otherwise. */
  <span class="token property" >"module"</span><span class="token operator" >:</span> <span class="token string" >"dist/"</span><span class="token punctuation" >,</span>

  /* Files to include to npm distribution. */
  /* Relative patterns like <span class="token string" >"./src"</span> fail! */
  <span class="token property" >"files"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
    <span class="token string" >"dist/"</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>

  /* Package dependencies needed to use it. */
  /* Peer dependencies can work too<span class="token punctuation" >,</span> see below. */
  <span class="token property" >"dependencies"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span> ... <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  /* Package development dependencies needed to develop/compile it */
  <span class="token property" >"devDependencies"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span> ... <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  /* Package peer dependencies. The consumer fixes exact versions. */
  /* In npm3 these don't get installed automatically and it's */
  /* up to the user to define which versions to use. */
  /* If you want to include RC versions to the range<span class="token punctuation" >,</span> consider */
  /* using a pattern such as ^<span class="token number" >4.0</span>.<span class="token number" >0</span>-<span class="token number" >0</span> */
  <span class="token property" >"peerDependencies"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"lodash"</span><span class="token operator" >:</span> <span class="token string" >">= 3.5.0 &lt; 4.0.0"</span><span class="token punctuation" >,</span>
    <span class="token property" >"react"</span><span class="token operator" >:</span> <span class="token string" >">= 0.11.2 &lt; 16.0.0"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  /* Links to repository<span class="token punctuation" >,</span> homepage<span class="token punctuation" >,</span> and issue tracker */
  <span class="token property" >"repository"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"type"</span><span class="token operator" >:</span> <span class="token string" >"git"</span><span class="token punctuation" >,</span>
    <span class="token property" >"url"</span><span class="token operator" >:</span> <span class="token string" >"https://github.com/survivejs/react-component-boilerplate.git"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token property" >"homepage"</span><span class="token operator" >:</span> <span class="token string" >"https://survivejs.github.io/react-component-boilerplate/"</span><span class="token punctuation" >,</span>
  <span class="token property" >"bugs"</span><span class="token operator" >:</span> <span class="token punctuation" >{</span>
    <span class="token property" >"url"</span><span class="token operator" >:</span> <span class="token string" >"https://github.com/survivejs/react-component-boilerplate/issues"</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  /* Keywords related to package. */
  /* Fill this well to make the package findable. */
  <span class="token property" >"keywords"</span><span class="token operator" >:</span> <span class="token punctuation" >[</span>
    <span class="token string" >"react"</span><span class="token punctuation" >,</span>
    <span class="token string" >"reactjs"</span><span class="token punctuation" >,</span>
    <span class="token string" >"boilerplate"</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >,</span>

  /* Which license to use */
  <span class="token property" >"license"</span><span class="token operator" >:</span> <span class="token string" >"MIT"</span>
<span class="token punctuation" >}</span>
</code></pre>
<p>As you can see, <em>package.json</em> can contain a lot of information. You can attach non-npm specific metadata there that can be used by tooling. Given this can bloat <em>package.json</em>, it&#39;s preferable to keep metadata in files of their own.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>JSON doesn&#39;t support comments even though I&#39;m using them above. There are extended notations, such as <a href="http://hjson.org/">Hjson</a>, that do.</blockquote><h2 class="header"><a class="header-anchor" href="#npm-workflow" id="npm-workflow"></a><span class="text">npm Workflow</span><a class="header-anchor-select" href="#npm-workflow">#</a></h2>
<p>To get started, you have to use <a href="https://docs.npmjs.com/cli/adduser">npm adduser</a>. It allows you to set up an account. After this process has completed, it creates a <em>~/.npmrc</em> file and use that data for authentication. There&#39;s also <a href="https://docs.npmjs.com/cli/logout">npm logout</a> that clears the credentials.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>When creating a project, <code>npm init</code> respects the values set at <em>~/.npmrc</em>. Hence, it&#39;s worth your while to set reasonable defaults there to save time. If you want to limit your package to a particular scope, use <code>npm init --scope=&lt;scope&gt;</code>. As a result, you get <code>@&lt;scope&gt;/&lt;package&gt;</code> which is handy especially for personal packages since the default namespace of npm is so crowded.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/docs/orgs/">npm organizations</a> give your project a scope (<code>@&lt;scope&gt;/&lt;package&gt;</code>) and make it easier to manage rights across the organization. They are free if your organization contains only public packages.</blockquote><h3 class="header"><a class="header-anchor" href="#publishing-a-package" id="publishing-a-package"></a><span class="text">Publishing a Package</span><a class="header-anchor-select" href="#publishing-a-package">#</a></h3>
<p>Provided you have logged in, creating new packages is only <code>npm publish</code> away. Given that the package name is still available and everything goes fine, you should have something out there! After this, you can install your package through <code>npm install</code> or <code>npm i</code>.</p>
<p>If you want to see what files are published to npm, consider using <a href="https://docs.npmjs.com/cli/pack">npm pack</a> generates a tarball you can examine. <a href="https://www.npmjs.com/package/irish-pub">irish-pub</a> is another option, and it gives you a listing to review. You can also use <a href="https://www.npmjs.com/package/publish-diff">publish-diff</a> to get a better of the changes that are going to be published.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/np">np</a> gives an interactive UI for publishing packages. <a href="https://www.npmjs.com/package/semantic-release">semantic-release</a> takes the idea one step further and automates the entire process.</blockquote><h3 class="header"><a class="header-anchor" href="#what-files-to-publish" id="what-files-to-publish"></a><span class="text">What Files to Publish</span><a class="header-anchor-select" href="#what-files-to-publish">#</a></h3>
<p>Even though a project can contain a lot of files, not all of them should be published. Besides wasting bandwidth, this can leak personal files to a public registry and is the reason why it&#39;s a good idea to maintain a <a href="https://docs.npmjs.com/files/package.json#files">files</a> array at <em>package.json</em> and enumerate which files and directories you want to publish.</p>
<p>You can&#39;t find an official recommendation on what files to publish. That said, there are points to consider as <a href="https://stackoverflow.com/questions/25124844/should-i-npmignore-my-tests">discussed in Stack Overflow</a>.</p>
<p>At a minimum, you should distribute the source code needed to run the package. If you have code written using the ES6 standard, you should transpile the code so that it does not lose the ES6 module definitions while everything else is converted to ES5. For the tooling to pick it up, you should point to this version of code through <em>package.json</em> <code>module</code> field. See the <a href="/webpack/loading/javascript/">Loading JavaScript</a> chapter for the Babel setup.</p>
<p>You should point package <code>main</code> to a fully compiled version that&#39;s compatible with Node.</p>
<p>In addition to the source, you can consider distributing package <em>README.md</em> and <em>LICENSE</em>. Any metadata that&#39;s required by third-party systems, like Travis, can be safely skipped. Full documentation of the package doesn&#39;t have to be included as you can point to the package homepage through its metadata instead.</p>
<blockquote class="warning"><i class="icon-attention"></i>Even though it&#39;s possible to tell npm what to exclude from <code>files</code> through <code>!src/*.test.js</code> kind of definitions, <a href="https://github.com/npm/npm/wiki/Files-and-Ignores#details">using negation patterns is not recommended</a>. Instead, you should use <em>.npmignore</em> and include <code>src/*.test.js</code> kind of pattern there.</blockquote><h3 class="header"><a class="header-anchor" href="#increasing-a-version" id="increasing-a-version"></a><span class="text">Increasing a Version</span><a class="header-anchor-select" href="#increasing-a-version">#</a></h3>
<p>To increase the version of your package, you need to invoke one of these commands:</p>
<ul>
<li><code>npm version &lt;x.y.z&gt;</code> - Define version yourself.</li>
<li><code>npm version &lt;major|minor|patch&gt;</code> - Let npm bump the version for you based on SemVer.</li>
<li><code>npm version &lt;premajor|preminor|prepatch|prerelease&gt;</code> - Same as previous expect this time it generates <code>-&lt;prerelease number&gt;</code> suffix. Example: <code>v2.1.2-2</code>.</li>
</ul>
<p>Invoking any of these updates <em>package.json</em> and creates a version commit to git automatically. If you execute <code>npm publish</code> after doing this, you should have something new out there.</p>
<p>In the example above, <code>version</code>-related hooks have been set to make sure a version contains a fresh version of a distribution build. Tests are run to catch potential issues early on.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Consider using <a href="https://www.npmjs.com/package/semantic-release">semantic-release</a> if you prefer a more structured approach. It can take pain out of the release process while automating a part of it. For instance, it can detect possible breaking changes and generate change logs.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://www.npmjs.com/package/dont-break">dont-break</a> allows you to run the unit tests of dependent projects against your current code to see if it breaks anything. Sometimes it&#39;s possible to overlook a use case that is not a part of the public API even and break a dependency. <em>dont-break</em> helps with that particular problem.</blockquote><h3 class="header"><a class="header-anchor" href="#respect-the-semver" id="respect-the-semver"></a><span class="text">Respect the SemVer</span><a class="header-anchor-select" href="#respect-the-semver">#</a></h3>
<p>When publishing new versions, it&#39;s important to respect the SemVer. Roughly, it states that you should not break backward compatibility, given certain rules are met. The exact rules were covered in the previous chapter.</p>
<p>To make it easier to comply with SemVer, <a href="https://www.npmjs.com/package/next-ver">next-ver</a> can compute the next version you should use and update it for you. <a href="https://www.npmjs.com/package/commitizen">commitizen</a> goes further and allows change log generation and automated releases.</p>
<p>Both these tools rely on commit message annotations. On small projects, you can have <code>fix</code> or <code>feat</code> prefix at your commit titles (e.g., <code>fix - Allow doodad to work with zero</code>). You can also communicate the context using <code>chore(docs)</code> kind of style to document which part of the project was touched.</p>
<p>This metadata lets the tooling to figure out the types of the changes you made. It can help even with change log generation and allow automated releases over manual ones. Annotating your commits well is a good practice in any case as it makes it easier to debug your code later.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>The <a href="/webpack/packages/consuming/">Consuming Packages</a> explains the idea of SemVer in detail.</blockquote><h3 class="header"><a class="header-anchor" href="#publishing-a-pre-release-version" id="publishing-a-pre-release-version"></a><span class="text">Publishing a Pre-Release Version</span><a class="header-anchor-select" href="#publishing-a-pre-release-version">#</a></h3>
<p>Sometimes, you want to publish something preliminary to test. Tag your release as below:</p>
<ul>
<li>v0.5.0-alpha1</li>
<li>v0.5.0-beta1</li>
<li>v0.5.0-beta2</li>
<li>v0.5.0-rc1</li>
<li>v0.5.0-rc2</li>
<li>v0.5.0</li>
</ul>
<p>The initial alpha release allows the users to try out the upcoming functionality and provide feedback. The beta releases can be considered more stable.</p>
<p>The release candidates (RC) are close to an actual release and don&#39;t introduce any new functionality. They are all about refining the release till it&#39;s suitable for general consumption.</p>
<p>The workflow has two steps:</p>
<ol>
<li><code>npm version 0.5.0-alpha1</code> - Update <em>package.json</em> as discussed earlier.</li>
<li><code>npm publish --tag alpha</code> - Publish the package under <em>alpha</em> tag.</li>
</ol>
<p>To consume the test version, your users have to use <code>npm install &lt;your package name&gt;@alpha</code>.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i><a href="https://docs.npmjs.com/cli/link">npm link</a> allows you to link a package as a globally available symbolic link. Node resolves to the linked version unless local <code>node_modules</code> exists. Use <code>npm unlink</code> or <code>npm unlink &lt;package&gt;</code> to remove the link.</blockquote><h3 class="header"><a class="header-anchor" href="#on-naming-packages" id="on-naming-packages"></a><span class="text">On Naming Packages</span><a class="header-anchor-select" href="#on-naming-packages">#</a></h3>
<p>Before starting to develop, it can be a good idea to spend time on figuring out a good name for your package. It&#39;s not fun to write an excellent package only to notice the name has been taken. A good name is possible to find through a search engine, and most importantly, is available at npm. If you find a good name that appears to be abandoned, contact npm. They can give it to you.</p>
<p>As of npm 2.7.0, it&#39;s possible to create <a href="https://docs.npmjs.com/getting-started/scoped-packages">scoped packages</a>. They follow format <code>@username/project-name</code>. Simply follow that when naming your project.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Authoring packages takes care and patience. Publishing a package is fast but maintenance comes with its own challenges.</p>
<p>To recap:</p>
<ul>
<li>It&#39;s good to understand what kind of metadata packages contains. They give you insight on their licensing, guidelines, and even quality.</li>
<li>When publishing packages to npm, remember to respect the SemVer or an equivalent scheme to keep your consumers happy.</li>
<li>Document the main changes made to your packages using a change log. Documentation comes in handy later as you have to understand when a specific feature was introduced. It also makes it easier to upgrade projects to the most recent features.</li>
</ul>
<p>In the next chapter, you&#39;ll learn about authoring specific techniques.</p>
</div><div class="social-links"><blockquote class="tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><h2 class="subscribe-header">Subscribe to the mailing list</h2><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;amp;id=b853b8e786" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate social-form" target="_blank" novalidate=""><div id="mc_embed_signup_scroll"><div class="mc-field-group social-input-container"><input type="email" placeholder="Email" value="" name="EMAIL" class="required email" id="mce-EMAIL"/></div><div style="display:none;position:absolute;left:-5000px;"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><div class="social-subscribe-container"><input type="submit" class="btn button social-subscribe" style="margin-top:1em;margin-bottom:1em;line-height:2em;" value="Subscribe" name="subscribe" id="mc-embedded-subscribe"/></div></div></form></div><div class="new-prevnext"><div class="new-prevnext__prev"><div class="new-prevnext__bg" style="background-image:url(/baf2542e6e7b4338ccf4df7a4a570ddf.jpg);"></div><span class="new-prevnext__info">Previous chapter</span><a class="new-prevnext__link" href="/webpack/packages/consuming-techniques/">Package Consuming Techniques</a></div><div class="new-prevnext__next"><div class="new-prevnext__bg" style="background-image:url(/03715aa11bab766e7797770dc92a45af.jpg);"></div><span class="new-prevnext__info">Next chapter</span><a class="new-prevnext__link" href="/webpack/packages/authoring-techniques/">Package Authoring Techniques</a></div></div><blockquote class="tip"><p>This book is available through <a href="https://leanpub.com/survivejs-webpack">Leanpub (digital)</a>, <a href="https://www.amazon.com/dp/9526868803">Amazon (paperback)</a>, and <a href="https://www.amazon.com/dp/B06XWZZGBS">Kindle (digital)</a>. By purchasing the book you support the development of further content. A part of profit (~30%) goes to Tobias Koppers, the author of webpack.</p></blockquote><div id="disqus_thread"></div></div></div><div><a class="next-page" title="Package Authoring Techniques" href="/webpack/packages/authoring-techniques/"><i class="icon-right-open"></i></a><a class="previous-page" title="Package Consuming Techniques" href="/webpack/packages/consuming-techniques/"><i class="icon-left-open"></i></a></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/training/">Get training</a></div><div class="nav__link"><a href="https://leanpub.com/survivejs-webpack">Buy the ebook</a></div><div class="nav__link"><a href="/"></a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer><div class="footer-wrapper"><div class="footer-content-wrapper"><div class="footer-social"><h3>Social</h3><ul><li><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li></ul></div><div class="footer-blog"><h3>From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/webexpo-2017/">Experiences on WebExpo 2017</a></li><li><a class="blog-teaser" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li><a class="blog-teaser" href="/blog/react-next-2017/">Experiences on React Next 2017</a></li><li><a class="blog-teaser" href="/blog/frint-interview/">FrintJS - Build reactive applications with React and RxJS - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/neutrino-interview/">Neutrino - Create modern JavaScript applications with minimal configuration - Interview with Eli Perelman</a></li><li><a class="blog-teaser" href="/blog/idyll-interview/">Idyll - Narratives for the web - Interview with Matthew Conlen</a></li><li><a class="blog-teaser" href="/blog/motorcycle-interview/">Motorcycle.js - A statically-typed, functional and reactive framework for modern browsers - Interview with Tylor Steinberger</a></li></ul></div></div></div></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '1182e3806d62e921613b8dc9c7a22ef3',
          indexName: 'survivejs_webpack',
          inputSelector: '#search',
          debug: false
        });
      </script></div></div>

    
  </body>
</html>
