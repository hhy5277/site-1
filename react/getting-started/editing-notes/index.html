<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Editing notes is a similar problem as deleting them. The data flow is exactly the same. We&#39;ll need …" />
    <meta
      name="keywords"
      content="" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="Editing Notes" />
    <meta property="og:description" content="
Editing notes is a similar problem as deleting them. The data flow is exactly the same. We&#39;ll need …" />
    <meta name="twitter:title" content="Editing Notes" />
    <meta name="twitter:description" content="
Editing notes is a similar problem as deleting them. The data flow is exactly the same. We&#39;ll need …" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>Editing Notes</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.4ba0e633f3b9e03bd0ec.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <header class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><a title="Understanding React Components" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/react/getting-started/understanding-react-components/"><i class="icon-left-open"></i></a><nav class="nav"><ul class="nav__items"><li class="nav__link"><a href="https://graphql-finland.fi/">GraphQL Finland</a></li><li class="nav__link"><a href="/">Home</a></li><li class="nav__link"><a href="/blog/">Read the blog</a></li><li class="nav__link"><a href="/maintenance/">Maintenance book</a></li><li class="nav__link nav__link_selected"><a href="/react/">React book</a></li><li class="nav__link"><a href="/webpack/">Webpack book</a></li><li class="nav__link"><a href="/training/">Hire me</a></li><li class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></li></ul></nav><a title="Styling the Notes Application" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/react/getting-started/styling-notes/"><i class="icon-right-open"></i></a></header><div class="page"><div class="css-b5dhuc css-8rlsag0"><div style="background-image:url(/4ac60ef0be629bc207d2919d314499b3.jpg)" class="css-1huzfyy css-8rlsag1"></div><h1 class="css-13wbkqf css-8rlsag2">Editing Notes</h1><small aria-hidden="true" class="css-18xzi2i css-8rlsag3"><a href="https://pixabay.com/en/tools-technique-vernier-caliper-1093119/">jpj2000nl (Public Domain)</a></small></div><div class="page__container"><div class="css-xfgthk css-20xtq50"><label for="sidebar-toggle" class="css-1whlnn6 css-20xtq52">Table of contents</label><input type="checkbox" id="sidebar-toggle" class="css-38lglc css-20xtq53"/><div class="css-nyzxad css-20xtq51"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/react/introduction/">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/introduction-to-react/">Introduction to React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/setting-up-the-project/">Setting Up the Project</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/implementing-notes/">Implementing a Note Application</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/deleting-notes/">Deleting Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/understanding-react-components/">Understanding React Components</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Editing Notes</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/styling-notes/">Styling the Notes Application</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/implementing-kanban/">Implementing Kanban</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/react-and-flux/">React and Flux</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-store-and-actions/">Implementing NoteStore and NoteActions</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-persistency/">Implementing Persistency over localStorage</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/handling-data-dependencies/">Handling Data Dependencies</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/editing-lanes/">Editing Lanes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/drag-and-drop/">Implementing Drag and Drop</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/advanced-techniques/">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/testing-react/">Testing React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/typing-with-react/">Typing with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/styling-react/">Styling React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/structuring-react-projects/">Structuring React Projects</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/language-features/">Language Features</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/understanding-decorators/">Understanding Decorators</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/troubleshooting/">Troubleshooting</a></li></ul></div><div class="toc-nav__section"></div></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/refract-interview/">Refract - Manage Component Side Effects the Reactive Way - Interview with Thomas Roch.</a></blockquote></div><div class="chapter-content"><p>Editing notes is a similar problem as deleting them. The data flow is exactly the same. We&#39;ll need to define an <code>onEdit</code> callback and  <code>bind</code> an id of the note being edited at <code>Notes</code>.</p>
<p>What makes this scenario difficult is the user interface requirement. It&#39;s not enough just to have a button. We&#39;ll need some way to allow the user to input a new value which we can then commit to the data model.</p>
<p>One way to achieve this is to implement so called <strong>inline editing</strong>. The idea is that when a user click a note, we&#39;ll show an input. After the user has finished editing and signals that by hitting <em>enter</em> or clicking outside of the field (blur event), we&#39;ll capture the value and update.</p>
<h2 class="header"><a class="header-anchor" href="#implementing-editable" id="implementing-editable"></a><span class="text">Implementing <code>Editable</code></span><a class="header-anchor-select" href="#implementing-editable">#</a></h2>
<p>To keep the application clean, I&#39;ll wrap this behavior into a component known as <code>Editable</code>. It will give us an API like this:</p>
<pre><code class="lang-javascript"><span class="token operator" >&lt;</span>Editable
  editing<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>editing<span class="token punctuation brackets-braces" >}</span>
  value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation brackets-braces" >}</span>
  onEdit<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span>
</code></pre>
<p>This is an example of a <strong>controlled</strong> component. We&#39;ll control the editing state explicitly from outside of the component. This gives us more power, but it also makes <code>Editable</code> more involved to use.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>It can be a good idea to name your callbacks using <code>on</code> prefix. This will allow you to distinguish them from other props and keep your code a little tidier.</blockquote><h3 class="header"><a class="header-anchor" href="#controlled-vs-uncontrolled-design" id="controlled-vs-uncontrolled-design"></a><span class="text">Controlled vs. Uncontrolled Design</span><a class="header-anchor-select" href="#controlled-vs-uncontrolled-design">#</a></h3>
<p>An alternative way to handle this would have been to leave the control over the <code>editing</code> state to <code>Editable</code>. This <strong>uncontrolled</strong> way of designing can be valid if you don&#39;t want to do anything with the state outside of the component.</p>
<p>It is possible to use both of these designs together. You can even have a controlled component that has uncontrolled elements inside. In this case we&#39;ll end up using an uncontrolled design for the <code>input</code> that <code>Editable</code> will contain for example. Even that could be turned into something controlled should we want to.</p>
<p>Logically <code>Editable</code> consists of two separate portions. We&#39;ll need to display the default value while we are not <code>editing</code>. In case we are <code>editing</code>, we&#39;ll want to show an <code>Edit</code> control instead. In this case we&#39;ll settle for a simple input as that will do the trick.</p>
<p>Before digging into the details, we can implement a little stub and connect that to the application. This will give us the basic structure we need to grow the rest. To get started, we&#39;ll adjust the component hierarchy a notch to make it easier to implement the stub.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>The official documentation of React discusses <a href="https://facebook.github.io/react/docs/forms.html">controlled components</a> in greater detail.</blockquote><h2 class="header"><a class="header-anchor" href="#extracting-rendering-from-note" id="extracting-rendering-from-note"></a><span class="text">Extracting Rendering from <code>Note</code></span><a class="header-anchor-select" href="#extracting-rendering-from-note">#</a></h2>
<p>Currently <code>Note</code> controls what is rendered inside it. It renders the passed task and connects a deletion button. We could push <code>Editable</code> inside it and handle the wiring through <code>Note</code> interface. Even though that might be one valid way to do it, we can push the rendering concern on a higher level.</p>
<p>Having the concept of <code>Note</code> is useful especially when we&#39;ll expand the application further so there&#39;s no need to remove it. Instead, we can give the control over its rendering behavior to <code>Notes</code> and wire it there.</p>
<p>React provides a prop known as <code>children</code> for this purpose. Adjust <code>Note</code> and <code>Notes</code> as follows to push the control over <code>Note</code> rendering to <code>Notes</code>:</p>
<p><strong>app/components/Note.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation" >,</span> onDelete<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
  <span class="token operator" >&lt;</span>div<span class="token operator" >&gt;</span>
    <span class="token operator" >&lt;</span>span<span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span>
    <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onDelete<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >&gt;</span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>children<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
  <span class="token operator" >&lt;</span>div <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
    <span class="token punctuation brackets-braces" >{</span>children<span class="token punctuation brackets-braces" >}</span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</div>
</code></pre>
<p><strong>app/components/Notes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> Note <span class="token keyword keyword-from" >from</span> <span class="token string" >'./Note'</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation" >,</span> <span class="token function-variable function" >onDelete</span><span class="token operator" >=</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
  <span class="token operator" >&lt;</span>ul<span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>id<span class="token punctuation" >,</span> task<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span>
    <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>id<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
<div class="leanpub-delete">
      <span class="token operator" >&lt;</span>Note
        onDelete<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onDelete<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span>
        task<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span>
</div>
<div class="leanpub-insert">
      <span class="token operator" >&lt;</span>Note<span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>span<span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onDelete<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >&gt;</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>Note<span class="token operator" >&gt;</span>
</div>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >&gt;</span>
  <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >&gt;</span>
<span class="token punctuation brackets-parentheses" >)</span>
</code></pre>
<p>Now that we have room to work, we can set up a stub for <code>Editable</code>.</p>
<h2 class="header"><a class="header-anchor" href="#adding-editable-stub" id="adding-editable-stub"></a><span class="text">Adding <code>Editable</code> Stub</span><a class="header-anchor-select" href="#adding-editable-stub">#</a></h2>
<p>We can model a rough starting point based on our specification as below. The idea is that we&#39;ll branch based on the <code>editing</code> prop and attach the props needed for implementing our logic:</p>
<p><strong>app/components/Editable.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>editing<span class="token punctuation" >,</span> value<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>editing<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>Edit value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span> onEdit<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>

  <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>span <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>value<span class="token punctuation" >:</span> <span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token keyword keyword-const" >const</span> Edit <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span><span class="token function-variable function" >onEdit</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span> value<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
  <span class="token operator" >&lt;</span>div onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
    <span class="token operator" >&lt;</span>span<span class="token operator" >&gt;</span>edit<span class="token punctuation" >:</span> <span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>To see our stub in action we still need to connect it with our application.</p>
<h2 class="header"><a class="header-anchor" href="#connecting-editable-with-notes" id="connecting-editable-with-notes"></a><span class="text">Connecting <code>Editable</code> with <code>Notes</code></span><a class="header-anchor-select" href="#connecting-editable-with-notes">#</a></h2>
<p>We still need to replace the relevant portions of the code to point at <code>Editable</code>. There are more props to track and to connect:</p>
<p><strong>app/components/Notes.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> Note <span class="token keyword keyword-from" >from</span> <span class="token string" >'./Note'</span><span class="token punctuation" >;</span>
<div class="leanpub-insert">
<span class="token keyword keyword-import" >import</span> Editable <span class="token keyword keyword-from" >from</span> <span class="token string" >'./Editable'</span><span class="token punctuation" >;</span>
</div>

<div class="leanpub-delete">
<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation" >,</span> <span class="token function-variable function" >onDelete</span><span class="token operator" >=</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
</div>
<div class="leanpub-insert">
<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
  notes<span class="token punctuation" >,</span>
  <span class="token function-variable function" >onNoteClick</span><span class="token operator" >=</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span> <span class="token function-variable function" >onEdit</span><span class="token operator" >=</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span> <span class="token function-variable function" >onDelete</span><span class="token operator" >=</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
</div>
<div class="leanpub-delete">
  <span class="token operator" >&lt;</span>ul<span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>id<span class="token punctuation" >,</span> task<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span>
    <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>id<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
      <span class="token operator" >&lt;</span>Note<span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>span<span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onDelete<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >&gt;</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>Note<span class="token operator" >&gt;</span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >&gt;</span>
  <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >&gt;</span>
</div>
<div class="leanpub-insert">
  <span class="token operator" >&lt;</span>ul<span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>id<span class="token punctuation" >,</span> editing<span class="token punctuation" >,</span> task<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span>
    <span class="token operator" >&lt;</span>li key<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>id<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
      <span class="token operator" >&lt;</span>Note onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onNoteClick<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>Editable
           editing<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>editing<span class="token punctuation brackets-braces" >}</span>
           value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>task<span class="token punctuation brackets-braces" >}</span>
           onEdit<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onDelete<span class="token punctuation" >.</span><span class="token function" >bind</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-null" >null</span><span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>x<span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >&gt;</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>Note<span class="token operator" >&gt;</span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>li<span class="token operator" >&gt;</span>
  <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>ul<span class="token operator" >&gt;</span>
</div>
<span class="token punctuation brackets-parentheses" >)</span>
</code></pre>
<p>If everything went right, you should see something like this:</p>
<p><figure><img src="/82bf6835a2466126d6e7349650e4866f.png" alt="Connected `Editable`" class="" width="" height="" /><figcaption>Connected `Editable`</figcaption></figure></p>
<h2 class="header"><a class="header-anchor" href="#tracking-note-editing-state" id="tracking-note-editing-state"></a><span class="text">Tracking <code>Note</code> <code>editing</code> State</span><a class="header-anchor-select" href="#tracking-note-editing-state">#</a></h2>
<p>We are still missing logic needed to control the <code>Editable</code>. Given the state of our application is maintained at <code>App</code>, we&#39;ll need to deal with it there. It should set the <code>editable</code> flag of the edited note to <code>true</code> when we begin to edit and set it back to <code>false</code> when we complete the editing process. We should also adjust its <code>task</code> using the new value. For now we are interested in just getting the <code>editable</code> flag to work, though. Modify as follows:</p>
<p><strong>app/components/App.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token operator" >...</span>

<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token keyword keyword-class" >class</span> <span class="token class-name" >App</span> <span class="token keyword keyword-extends" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation brackets-parentheses" >(</span>props<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token operator" >...</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function" >render</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> <span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >;</span>

    <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-parentheses" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >&gt;</span>
        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>addNote<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span><span class="token operator" >+</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >&gt;</span>
<div class="leanpub-delete">
        <span class="token operator" >&lt;</span>Notes notes<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation brackets-braces" >}</span> onDelete<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>deleteNote<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span>
</div>
<div class="leanpub-insert">
        <span class="token operator" >&lt;</span>Notes
          notes<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>notes<span class="token punctuation brackets-braces" >}</span>
          onNoteClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>activateNoteEdit<span class="token punctuation brackets-braces" >}</span>
          onEdit<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>editNote<span class="token punctuation brackets-braces" >}</span>
          onDelete<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>deleteNote<span class="token punctuation brackets-braces" >}</span>
          <span class="token operator" >/</span><span class="token operator" >&gt;</span>
</div>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
    <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function-variable function" >addNote</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token operator" >...</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function-variable function" >deleteNote</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>id<span class="token punctuation" >,</span> e<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token operator" >...</span>
  <span class="token punctuation brackets-braces" >}</span>
<div class="leanpub-insert">
  <span class="token function-variable function" >activateNoteEdit</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>id<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span>note <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
        <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>note<span class="token punctuation" >.</span>id <span class="token operator" >===</span> id<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
          note<span class="token punctuation" >.</span>editing <span class="token operator" >=</span> <span class="token boolean" >true</span><span class="token punctuation" >;</span>
        <span class="token punctuation brackets-braces" >}</span>

        <span class="token keyword keyword-return" >return</span> note<span class="token punctuation" >;</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function-variable function" >editNote</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>id<span class="token punctuation" >,</span> task<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >setState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
      notes<span class="token punctuation" >:</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>notes<span class="token punctuation" >.</span><span class="token function" >map</span><span class="token punctuation brackets-parentheses" >(</span>note <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
        <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>note<span class="token punctuation" >.</span>id <span class="token operator" >===</span> id<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
          note<span class="token punctuation" >.</span>editing <span class="token operator" >=</span> <span class="token boolean" >false</span><span class="token punctuation" >;</span>
          note<span class="token punctuation" >.</span>task <span class="token operator" >=</span> task<span class="token punctuation" >;</span>
        <span class="token punctuation brackets-braces" >}</span>

        <span class="token keyword keyword-return" >return</span> note<span class="token punctuation" >;</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
</div>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>If you try to edit a <code>Note</code> now, you should see something like this:</p>
<p><figure><img src="/94e8e480e90ebfbec46d8cb44672099b.png" alt="Tracking `editing` state" class="" width="" height="" /><figcaption>Tracking `editing` state</figcaption></figure></p>
<p>If you click a <code>Note</code> twice to confirm the edit, you should see an <code>Uncaught Invariant Violation</code> error at the browser console. This happens because we don&#39;t deal with <code>task</code> correctly yet. We have bound only <code>id</code> and <code>task</code> will actually point to an <code>event</code> object provided by React. This is something we should fix next.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>If we used a normalized data structure (i.e., <code>{&lt;id&gt;: {id: &lt;id&gt;, task: &lt;str&gt;}}</code>), it would be possible to write the operations using <code>Object.assign</code> and avoid mutation.</blockquote><blockquote class="tip"><i class="icon-attention-circled"></i>In order to clean up the code, you could extract a method to contain the logic shared by <code>activateNoteEdit</code> and <code>editNote</code>.</blockquote><h2 class="header"><a class="header-anchor" href="#implementing-edit" id="implementing-edit"></a><span class="text">Implementing <code>Edit</code></span><a class="header-anchor-select" href="#implementing-edit">#</a></h2>
<p>We are missing one more part to make this work. Even though we can manage the <code>editing</code> state per <code>Note</code> now, we still can&#39;t actually edit them. For this purpose we need to expand <code>Edit</code> and make it render a text input for us.</p>
<p>In this case we&#39;ll be using <strong>uncontrolled</strong> design and extract the value of the input from the DOM only when we need it. We don&#39;t need more control than that here.</p>
<p>Consider the code below for the full implementation. Note how we are handling finishing the editing. We capture <code>onKeyPress</code> and check for <code>Enter</code> to confirm editing. We also run the finish logic <code>onBlur</code> so that we can end the editing when the input loses focus:</p>
<p><strong>app/components/Editable.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token operator" >...</span>


<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>editing<span class="token punctuation" >,</span> value<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>editing<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>Edit value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span> onEdit<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>

<div class="leanpub-delete">
  <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>span <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>value<span class="token punctuation" >:</span> <span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
  <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>span <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
</div>
<span class="token punctuation brackets-braces" >}</span>

<div class="leanpub-delete">
<span class="token keyword keyword-const" >const</span> Edit <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span><span class="token function-variable function" >onEdit</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span><span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span> value<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span>
  <span class="token operator" >&lt;</span>div onClick<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation brackets-braces" >}</span> <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span>
    <span class="token operator" >&lt;</span>span<span class="token operator" >&gt;</span>edit<span class="token punctuation" >:</span> <span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span>
  <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >&gt;</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
<span class="token keyword keyword-class" >class</span> <span class="token class-name" >Edit</span> <span class="token keyword keyword-extends" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token function" >render</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> <span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation" >,</span> onEdit<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >=</span> <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >;</span>

    <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>input
      type<span class="token operator" >=</span><span class="token string" >"text"</span>
      autoFocus<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token boolean" >true</span><span class="token punctuation brackets-braces" >}</span>
      defaultValue<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span>
      onBlur<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>finishEdit<span class="token punctuation brackets-braces" >}</span>
      onKeyPress<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>checkEnter<span class="token punctuation brackets-braces" >}</span>
      <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function-variable function" >checkEnter</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation" >.</span>key <span class="token operator" >===</span> <span class="token string" >'Enter'</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
      <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >finishEdit</span><span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token function-variable function" >finishEdit</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> value <span class="token operator" >=</span> e<span class="token punctuation" >.</span>target<span class="token punctuation" >.</span>value<span class="token punctuation" >;</span>

    <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span><span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>onEdit<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
      <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span><span class="token function" >onEdit</span><span class="token punctuation brackets-parentheses" >(</span>value<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>
</div>
</code></pre>
<p>If you refresh and edit a note, the commits should go through:</p>
<p><figure><img src="/0246bb8f294f4ebd9b95273e77a42768.png" alt="Editing a `Note`" class="" width="" height="" /><figcaption>Editing a `Note`</figcaption></figure></p>
<h2 class="header"><a class="header-anchor" href="#on-namespacing-components" id="on-namespacing-components"></a><span class="text">On Namespacing Components</span><a class="header-anchor-select" href="#on-namespacing-components">#</a></h2>
<p>We could have approached <code>Editable</code> in a different way. In an earlier edition of this book I ended up developing it as a single component. I handled rendering the value and the edit control through methods (i.e., <code>renderValue</code>). Often method naming like that is a clue that it&#39;s possible to refactor your code and extract separate components like we did here.</p>
<p>You can go one step further and <a href="https://facebook.github.io/react/docs/jsx-in-depth.html#namespaced-components">namespace</a>  your component parts. It would have been possible to define <code>Editable.Value</code> and <code>Editable.Edit</code> components. Better yet, we could have allowed the user to swap those components through props. As long as the interface is the same, the components should work. This would give an extra dimension of customizability.</p>
<p>Implementation-wise we would have had to do something like this in case we had gone with namespacing:</p>
<p><strong>app/components/Editable.jsx</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> React <span class="token keyword keyword-from" >from</span> <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// We could allow edit/value to be swapped here through props</span>
<span class="token keyword keyword-const" >const</span> <span class="token function-variable function" >Editable</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>editing<span class="token punctuation" >,</span> value<span class="token punctuation" >,</span> onEdit<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>editing<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>Editable<span class="token punctuation" >.</span>Edit value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span> onEdit<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>onEdit<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>

  <span class="token keyword keyword-return" >return</span> <span class="token operator" >&lt;</span>Editable<span class="token punctuation" >.</span>Value value<span class="token operator" >=</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span> <span class="token operator" >/</span><span class="token operator" >&gt;</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>

Editable<span class="token punctuation" >.</span><span class="token function-variable function" >Value</span> <span class="token operator" >=</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation" >,</span> <span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token operator" >&lt;</span>span <span class="token punctuation brackets-braces" >{</span><span class="token operator" >...</span>props<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&gt;</span><span class="token punctuation brackets-braces" >{</span>value<span class="token punctuation brackets-braces" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>span<span class="token operator" >&gt;</span>

<span class="token keyword keyword-class" >class</span> <span class="token class-name" >Edit</span> <span class="token keyword keyword-extends" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token operator" >...</span>
<span class="token punctuation brackets-braces" >}</span>
Editable<span class="token punctuation" >.</span>Edit <span class="token operator" >=</span> Edit<span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// We could export individual components too to allow modification</span>
<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> Editable<span class="token punctuation" >;</span>
</code></pre>
<p>You can use a similar approach for more generic components as well. Consider something like <code>Form</code>. You could easily have <code>Form.Label</code>, <code>Form.Input</code>, <code>Form.Textarea</code> and so on. Each would contain your custom formatting and logic as needed. This is one way to make your designs more flexible.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>It took quite a few steps, but we can edit our notes now. Best of all, <code>Editable</code> should be useful whenever we need to edit some property. We could have extracted the logic later on as we see duplication, but this is one way to do it.</p>
<p>Even though the application kind of works, it is still quite ugly. We&#39;ll do something about that in the next chapter as we add basic styling to it.</p>
</div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-1nfeoes css-va8n550"><input type="email" class="css-baseStyle-s4lgck css-inputStyle-16d70pc" placeholder="Email" name="EMAIL" id="mce-EMAIL" required=""/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" class="css-baseStyle-s4lgck css-buttonStyle-1y781j1" value="Subscribe" name="subscribe"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous chapter</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/react/getting-started/understanding-react-components/">Understanding React Components</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next chapter</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/react/getting-started/styling-notes/">Styling the Notes Application</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div></div></div></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/refract-interview/">Refract - Manage Component Side Effects the Reactive Way - Interview with Thomas Roch.</a></li><li><a class="blog-teaser" href="/blog/dss-interview/">DSS - Deterministic Style Sheets - Interview with Giuseppe Gurgone</a></li><li><a class="blog-teaser" href="/blog/fall-2018-events/">SurviveJS - Fall Events</a></li><li><a class="blog-teaser" href="/blog/uppy-interview/">Uppy - Painless Uploads for JavaScript - Interview with Artur Paikin</a></li><li><a class="blog-teaser" href="/blog/graphql-finland-interview/">GraphQL Finland - Learn GraphQL Up North - Interview with Mikhail Novikov</a></li><li><a class="blog-teaser" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></li><li><a class="blog-teaser" href="/blog/proppy-interview/">Proppy - Functional props composition for components - Interview with Fahad Ibnay Heylaal</a></li></ul></div><ul aria-label="Other Juho&#x27;s books" class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - Maintenance: Streamline JavaScript Workflow</h4><img alt="Maintenance book cover" src="/2900d9b74e46ac6cdf984148c1a0c631.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - React: From apprentice to master</h4><img alt="React book cover" src="/2412b7150d25c1dc3c309666132bc26e.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - Webpack: From apprentice to master</h4><img alt="Webpack book cover" src="/20cf3367cf445212a90411ccd2282229.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '7a7d80ba370ebaf7a9afa96ad380a1e1',
          indexName: 'survivejs_react',
          inputSelector: '#search',
          debug: false
        });
      </script></div>

    
  </body>
</html>
