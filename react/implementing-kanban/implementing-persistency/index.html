<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Currently our application cannot retain its state if refreshed. One neat way to get around this pro…" />
    <meta
      name="keywords"
      content="" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="Implementing Persistency over localStorage" />
    <meta property="og:description" content="
Currently our application cannot retain its state if refreshed. One neat way to get around this pro…" />
    <meta name="twitter:title" content="Implementing Persistency over localStorage" />
    <meta name="twitter:description" content="
Currently our application cannot retain its state if refreshed. One neat way to get around this pro…" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>Implementing Persistency over localStorage</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.9e4caa3b8a35fd8dcf91.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="page"><div class="header-image" style="background-image:url(/c20f3f8416e89f58debc98bb3099c9e6.jpg)"></div><h1 class="page__heading">Implementing Persistency over localStorage</h1><div class="header-extra"><a href="https://pixabay.com/en/hitchhiker-thumb-hoodie-backpack-691581/">Unsplash (Public Domain)</a></div><div class="page__container"><div class="page__sidebar"><div class="toc-nav__wrapper"><div class="toc-nav__section"><input id="search" class="toc-nav__search" placeholder="Search"/></div><div class="toc-nav__section"><h4 class="toc-nav--header">Table of Contents</h4><ul class="toc-nav"><li class="toc-intro"><a class="toc-nav__link intro" href="/react/introduction/">Introduction</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/getting-started/">Getting Started</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/introduction-to-react/">Introduction to React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/setting-up-the-project/">Setting Up the Project</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/implementing-notes/">Implementing a Note Application</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/deleting-notes/">Deleting Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/understanding-react-components/">Understanding React Components</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/editing-notes/">Editing Notes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/getting-started/styling-notes/">Styling the Notes Application</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/implementing-kanban/">Implementing Kanban</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/react-and-flux/">React and Flux</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/implementing-store-and-actions/">Implementing NoteStore and NoteActions</a></li><li class="toc-chapter"><span class="toc-nav__link toc-nav__link--current chapter">Implementing Persistency over localStorage</span></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/handling-data-dependencies/">Handling Data Dependencies</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/editing-lanes/">Editing Lanes</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/implementing-kanban/drag-and-drop/">Implementing Drag and Drop</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/advanced-techniques/">Advanced Techniques</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/testing-react/">Testing React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/typing-with-react/">Typing with React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/styling-react/">Styling React</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/advanced-techniques/structuring-react-projects/">Structuring React Projects</a></li><li class="toc-part"><a class="toc-nav__link part" href="/react/appendices/">Appendices</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/language-features/">Language Features</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/understanding-decorators/">Understanding Decorators</a></li><li class="toc-chapter"><a class="toc-nav__link chapter" href="/react/appendices/troubleshooting/">Troubleshooting</a></li></ul></div><div class="toc-nav__section"></div></div></div><div class="page__main"><div class="page__section"><div><blockquote class="latestpost tip"><a class="latestpost-link" href="/blog/illuminate-interview/">Illuminate - Syntax highlighter for Node - Interview with Vivek Bansal</a></blockquote></div><div class="chapter-content"><p>Currently our application cannot retain its state if refreshed. One neat way to get around this problem is to store the application state to <a href="https://developer.mozilla.org/en/docs/Web/API/Window/localStorage">localStorage</a> and then restore it when we run the application again.</p>
<p>If you were working against a back-end, this wouldn&#39;t be a problem. Even then having a temporary cache in <code>localStorage</code> could be handy. Just make sure you don&#39;t store anything sensitive there as it is easy to access.</p>
<h2 class="header"><a class="header-anchor" href="#understanding-localstorage" id="understanding-localstorage"></a><span class="text">Understanding <code>localStorage</code></span><a class="header-anchor-select" href="#understanding-localstorage">#</a></h2>
<p><code>localStorage</code> is a part of the Web Storage API. The other half, <code>sessionStorage</code>, exists as long as the browser is open while <code>localStorage</code> persists even in this case. They both share <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API">the same API</a> as discussed below:</p>
<ul>
<li><code>storage.getItem(k)</code> - Returns the stored string value for the given key.</li>
<li><code>storage.removeItem(k)</code> - Removes the data matching the key.</li>
<li><code>storage.setItem(k, v)</code> - Stores the given value using the given key.</li>
<li><code>storage.clear()</code> - Empties the storage contents.</li>
</ul>
<p>It is convenient to operate on the API using your browser developer tools. In Chrome especially the <em>Resources</em> tab is useful as it allows you to inspect the data and perform direct operations on it. You can even use <code>storage.key</code> and <code>storage.key = &#39;value&#39;</code> shorthands in the console for quick tweaks.</p>
<p><code>localStorage</code> and <code>sessionStorage</code> can use up to 10 MB of data combined. Even though they are well supported, there are certain corner cases that can fail. These include running out of memory in Internet Explorer (fails silently) and failing altogether in Safari&#39;s private mode. It is possible to work around these glitches, though.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>You can support Safari in private mode by trying to write into <code>localStorage</code> first. If that fails, you can use Safari&#39;s in-memory store instead, or just let the user know about the situation. See <a href="https://stackoverflow.com/questions/14555347/html5-localstorage-error-with-safari-quota-exceeded-err-dom-exception-22-an">Stack Overflow</a> for details.</blockquote><h2 class="header"><a class="header-anchor" href="#implementing-a-wrapper-for-localstorage" id="implementing-a-wrapper-for-localstorage"></a><span class="text">Implementing a Wrapper for <code>localStorage</code></span><a class="header-anchor-select" href="#implementing-a-wrapper-for-localstorage">#</a></h2>
<p>To keep things simple and manageable, we will implement a little wrapper for <code>storage</code> to wrap the complexity. The API will consist of <code>get(k)</code> to fetch items from the storage and <code>set(k, v)</code> to set them. Given the underlying API is string based, we&#39;ll use <code>JSON.parse</code> and <code>JSON.stringify</code> for serialization. Since <code>JSON.parse</code> can fail, that&#39;s something we need to take into account. Consider the implementation below:</p>
<p><strong>app/libs/storage.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> storage <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-get" >get</span><span class="token punctuation brackets-parentheses" >(</span>k<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-try" >try</span> <span class="token punctuation brackets-braces" >{</span>
      <span class="token keyword keyword-return" >return</span> JSON<span class="token punctuation" >.</span><span class="token function" >parse</span><span class="token punctuation brackets-parentheses" >(</span>storage<span class="token punctuation" >.</span><span class="token function" >getItem</span><span class="token punctuation brackets-parentheses" >(</span>k<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>
    <span class="token keyword keyword-catch" >catch</span><span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
      <span class="token keyword keyword-return" >return</span> <span class="token keyword keyword-null" >null</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span>
  <span class="token keyword keyword-set" >set</span><span class="token punctuation brackets-parentheses" >(</span>k<span class="token punctuation" >,</span> v<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    storage<span class="token punctuation" >.</span><span class="token function" >setItem</span><span class="token punctuation brackets-parentheses" >(</span>k<span class="token punctuation" >,</span> JSON<span class="token punctuation" >.</span><span class="token function" >stringify</span><span class="token punctuation brackets-parentheses" >(</span>v<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
</code></pre>
<p>The implementation is enough for our purposes. It&#39;s not foolproof and it will fail if we put too much data into a storage. To overcome these problems without having to solve them yourself, it would be possible to use a wrapper such as <a href="https://github.com/mozilla/localForage">localForage</a> to hide the complexity.</p>
<h2 class="header"><a class="header-anchor" href="#persisting-the-application-using-finalstore" id="persisting-the-application-using-finalstore"></a><span class="text">Persisting the Application Using <code>FinalStore</code></span><a class="header-anchor-select" href="#persisting-the-application-using-finalstore">#</a></h2>
<p>Just having means to write and read from the <code>localStorage</code> won&#39;t do. We still need to connect out application to it somehow. State management solutions provide hooks for this purpose. Often you&#39;ll find a way to intercept them somehow. In Alt&#39;s case that happens through a built-in store known as <code>FinalStore</code>.</p>
<p>We have already set it up at our Alt instance. What remains is writing the application state to the <code>localStorage</code> when it changes. We also need to load the state when we start running it. In Alt terms these processes are known as <strong>snapshotting</strong> and <strong>bootstrapping</strong>.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>An alternative way to handle storing the data would be to take a snapshot only when the window gets closed. There&#39;s a Window level <code>beforeunload</code> hook that could be used. This approach is brittle, though. What if something unexpected happens and the hook doesn&#39;t get triggered for some reason? You&#39;ll lose data.</blockquote><h2 class="header"><a class="header-anchor" href="#implementing-the-persistency-logic" id="implementing-the-persistency-logic"></a><span class="text">Implementing the Persistency Logic</span><a class="header-anchor-select" href="#implementing-the-persistency-logic">#</a></h2>
<p>We can handle the persistency logic at a separate module dedicated to it. We will hook it up at the application setup and off we go.</p>
<p>Given it can be useful to be able to disable snapshotting temporarily, it can be a good idea to implement a <code>debug</code> flag. The idea is that if the flag is set, we&#39;ll skip storing the data.</p>
<p>This is particularly useful if we manage to break the application state dramatically during development somehow as it allows us to restore it to a blank slate easily through <code>localStorage.setItem(&#39;debug&#39;, &#39;true&#39;)</code> (<code>localStorage.debug = true</code>), <code>localStorage.clear()</code>, and finally a refresh.</p>
<p>Given bootstrapping could fail for an unknown reason, we catch a possible error. It can still be a good idea to proceed with starting the application even if something horrible happens at this point. The snapshot portion is easier as we just need to check for the <code>debug</code> flag there and then set data if the flag is not active.</p>
<p>The implementation below illustrates the ideas:</p>
<p><strong>app/libs/persist.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token keyword keyword-function" >function</span><span class="token punctuation brackets-parentheses" >(</span>alt<span class="token punctuation" >,</span> storage<span class="token punctuation" >,</span> storageName<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-try" >try</span> <span class="token punctuation brackets-braces" >{</span>
    alt<span class="token punctuation" >.</span><span class="token function" >bootstrap</span><span class="token punctuation brackets-parentheses" >(</span>storage<span class="token punctuation" >.</span><span class="token keyword keyword-get" >get</span><span class="token punctuation brackets-parentheses" >(</span>storageName<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token keyword keyword-catch" >catch</span><span class="token punctuation brackets-parentheses" >(</span>e<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'Failed to bootstrap data'</span><span class="token punctuation" >,</span> e<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>

  alt<span class="token punctuation" >.</span>FinalStore<span class="token punctuation" >.</span><span class="token function" >listen</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span><span class="token operator" >!</span>storage<span class="token punctuation" >.</span><span class="token keyword keyword-get" >get</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'debug'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
      storage<span class="token punctuation" >.</span><span class="token keyword keyword-set" >set</span><span class="token punctuation brackets-parentheses" >(</span>storageName<span class="token punctuation" >,</span> alt<span class="token punctuation" >.</span><span class="token function" >takeSnapshot</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>You would end up with something similar in other state management systems. You&#39;ll need to find equivalent hooks to initialize the system with data loaded from the <code>localStorage</code> and write the state there when it happens to change.</p>
<h2 class="header"><a class="header-anchor" href="#connecting-persistency-logic-with-the-application" id="connecting-persistency-logic-with-the-application"></a><span class="text">Connecting Persistency Logic with the Application</span><a class="header-anchor-select" href="#connecting-persistency-logic-with-the-application">#</a></h2>
<p>We are still missing one part to make this work. We&#39;ll need to connect the logic with our application. Fortunately there&#39;s a suitable place for this, the setup. Tweak as follows:</p>
<p><strong>app/components/Provider/setup.js</strong></p>
<pre><code class="lang-javascript"><div class="leanpub-insert">
<span class="token keyword keyword-import" >import</span> storage <span class="token keyword keyword-from" >from</span> <span class="token string" >'../../libs/storage'</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> persist <span class="token keyword keyword-from" >from</span> <span class="token string" >'../../libs/persist'</span><span class="token punctuation" >;</span>
</div>
<span class="token keyword keyword-import" >import</span> NoteStore <span class="token keyword keyword-from" >from</span> <span class="token string" >'../../stores/NoteStore'</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> alt <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  alt<span class="token punctuation" >.</span><span class="token function" >addStore</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'NoteStore'</span><span class="token punctuation" >,</span> NoteStore<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<div class="leanpub-insert">
  <span class="token function" >persist</span><span class="token punctuation brackets-parentheses" >(</span>alt<span class="token punctuation" >,</span> <span class="token function" >storage</span><span class="token punctuation brackets-parentheses" >(</span>localStorage<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span> <span class="token string" >'app'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</div>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>If you try refreshing the browser now, the application should retain its state. Given the solution is generic, adding more state to the system shouldn&#39;t be a problem. We could also integrate a proper back-end through the same hooks if we wanted.</p>
<p>If we had a real back-end, we could pass the initial payload as a part of the HTML and load it from there. This would avoid a round trip. If we rendered the initial markup of the application as well, we would end up implementing basic <strong>universal rendering</strong> approach. Universal rendering is a powerful technique that allows you to use React to improve the performance of your application while gaining SEO benefits.</p>
<blockquote class="warning"><i class="icon-attention"></i>Our <code>persist</code> implementation isn&#39;t without its flaws. It is easy to end up in a situation where <code>localStorage</code> contains invalid data due to changes made to the data model. This brings you to the world of database schemas and migrations. The lesson here is that the more you inject state and logic to your application, the more complicated it gets to handle.</blockquote><h2 class="header"><a class="header-anchor" href="#cleaning-up-notestore" id="cleaning-up-notestore"></a><span class="text">Cleaning Up <code>NoteStore</code></span><a class="header-anchor-select" href="#cleaning-up-notestore">#</a></h2>
<p>Before moving on, it would be a good idea to clean up <code>NoteStore</code>. There&#39;s still some code hanging around from our earlier experiments. Given persistency works now, we might as well start from a blank slate. Even if we wanted some initial data, it would be better to handle that at a higher level, such as application initialization. Adjust <code>NoteStore</code> as follows:</p>
<p><strong>app/stores/NoteStore.js</strong></p>
<pre><code class="lang-javascript"><div class="leanpub-delete">
<span class="token keyword keyword-import" >import</span> uuid <span class="token keyword keyword-from" >from</span> <span class="token string" >'uuid'</span><span class="token punctuation" >;</span>
</div>
<span class="token keyword keyword-import" >import</span> NoteActions <span class="token keyword keyword-from" >from</span> <span class="token string" >'../actions/NoteActions'</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-export" >export</span> <span class="token keyword keyword-default" >default</span> <span class="token keyword keyword-class" >class</span> <span class="token class-name" >NoteStore</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token function" >constructor</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span><span class="token function" >bindActions</span><span class="token punctuation brackets-parentheses" >(</span>NoteActions<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<div class="leanpub-delete">
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>notes <span class="token operator" >=</span> <span class="token punctuation brackets-square" >[</span>
      <span class="token punctuation brackets-braces" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Learn React'</span>
      <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation brackets-braces" >{</span>
        id<span class="token punctuation" >:</span> uuid<span class="token punctuation" >.</span><span class="token function" >v4</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span>
        task<span class="token punctuation" >:</span> <span class="token string" >'Do laundry'</span>
      <span class="token punctuation brackets-braces" >}</span>
    <span class="token punctuation brackets-square" >]</span><span class="token punctuation" >;</span>
</div>
<div class="leanpub-insert">
    <span class="token keyword keyword-this" >this</span><span class="token punctuation" >.</span>notes <span class="token operator" >=</span> <span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >;</span>
</div>
  <span class="token punctuation brackets-braces" >}</span>
  <span class="token operator" >...</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>This is enough for now. Now our application should start from a blank slate.</p>
<h2 class="header"><a class="header-anchor" href="#alternative-implementations" id="alternative-implementations"></a><span class="text">Alternative Implementations</span><a class="header-anchor-select" href="#alternative-implementations">#</a></h2>
<p>Even though we ended up using Alt in this initial implementation, it&#39;s not the only option. In order to benchmark various architectures, I&#39;ve implemented the same application using different techniques. I&#39;ve compared them briefly below:</p>
<ul>
<li><a href="http://rackt.org/redux/">Redux</a> is a Flux inspired architecture that was designed with hot loading as its primary constraint. Redux operates based on a single state tree. The state of the tree is manipulated using <em>pure functions</em> known as reducers. Even though there&#39;s some boilerplate code, Redux forces you to dig into functional programming. The implementation is quite close to the Alt based one. - <a href="https://github.com/survivejs/redux-demo">Redux demo</a></li>
<li>Compared to Redux, <a href="http://www.cerebraljs.com/">Cerebral</a> had a different starting point. It was developed to provide insight on <em>how</em> the application changes its state. Cerebral provides more opinionated way to develop, and as a result, comes with more batteries included. - <a href="https://github.com/survivejs/cerebral-demo">Cerebral demo</a></li>
<li><a href="https://mobxjs.github.io/mobx/">MobX</a> allows you to make your data structures observable. The structures can then be connected with React components so that whenever the structures update, so do the React components. Given real references between structures can be used, the Kanban implementation is surprisingly simple. - <a href="https://github.com/survivejs/mobx-demo">MobX demo</a></li>
</ul>
<h2 class="header"><a class="header-anchor" href="#relay-" id="relay-"></a><span class="text">Relay?</span><a class="header-anchor-select" href="#relay-">#</a></h2>
<p>Compared to Flux, Facebook&#39;s <a href="https://facebook.github.io/react/blog/2015/02/20/introducing-relay-and-graphql.html">Relay</a> improves on the data fetching department. It allows you to push data requirements to the view level. It can be used standalone or with Flux depending on your needs.</p>
<p>Given it&#39;s still largely untested technology, we won&#39;t be covering it in this book yet. Relay comes with special requirements of its own (GraphQL compatible API). Only time will tell how it gets adopted by the community.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>In this chapter, you saw how to set up <code>localStorage</code> for persisting the application state. It is a useful little technique to know. Now that we have persistency sorted out, we are ready to start generalizing towards a full blown Kanban board.</p>
</div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this page, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-14zx4vh css-19etgh0"><input type="email" placeholder="Email" name="EMAIL" id="mce-EMAIL" required="" class="css-1q2l8vg css-19etgh1"/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" value="Subscribe" name="subscribe" class="css-8q6jz5 css-19etgh2"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous chapter</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/react/implementing-kanban/implementing-store-and-actions/">Implementing NoteStore and NoteActions</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next chapter</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/react/implementing-kanban/handling-data-dependencies/">Handling Data Dependencies</a></div></div><blockquote class="tip"><p>This book is <a href="https://leanpub.com/survivejs-react">available through Leanpub</a>. By purchasing the book you support the development of further content.</p></blockquote><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div></div></div></div></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/maintenance/">Maintenance book</a></div><div class="nav__selected__link"><a href="/react/">React book</a></div><div class="nav__link"><a href="/webpack/">Webpack book</a></div><div class="nav__link"><a href="/training/">Hire me</a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/illuminate-interview/">Illuminate - Syntax highlighter for Node - Interview with Vivek Bansal</a></li><li><a class="blog-teaser" href="/blog/logux-interview/">Logux - Replace AJAX-REST - Interview with Andrey Sitnik</a></li><li><a class="blog-teaser" href="/blog/fastify-interview/">Fastify - Fast and low overhead web framework for Node.js - Interview with Tomas Della Vedova</a></li><li><a class="blog-teaser" href="/blog/bem-interview/">BEM - Methodology to enable reuse in front-end development - Interview with Sergey Berezhnoy</a></li><li><a class="blog-teaser" href="/blog/summary-of-2017/">SurviveJS - Summary of 2017</a></li><li><a class="blog-teaser" href="/blog/controllerim-interview/">controllerim - MobX Inspired State Management for React - Interview with Nir Yosef</a></li><li><a class="blog-teaser" href="/blog/react-finland-interview/">React Finland - Your Chance to Learn React Up North - Interview with Juho Vepsäläinen</a></li></ul></div><ul class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><img alt="Maintenance book cover" src="/44f3a3a3dad86956efa57dea740c5d44.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><img alt="React book cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><img alt="Webpack book cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div><div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
        docsearch({
          apiKey: '7a7d80ba370ebaf7a9afa96ad380a1e1',
          indexName: 'survivejs_react',
          inputSelector: '#search',
          debug: false
        });
      </script></div></div>

    
  </body>
</html>
