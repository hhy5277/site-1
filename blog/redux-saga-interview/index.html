<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
When developing front-ends, handling asynchronous behavior is always bit of a challenge. Yassine El…" />
    <meta
      name="keywords"
      content="interview,react,redux,redux-saga,state-management" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi" />
    <meta property="og:description" content="
When developing front-ends, handling asynchronous behavior is always bit of a challenge. Yassine El…" />
    <meta name="twitter:title" content="redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi" />
    <meta name="twitter:description" content="
When developing front-ends, handling asynchronous behavior is always bit of a challenge. Yassine El…" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.53ea855d3b4be11b8e66.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <div><div class="page"><div class="header-image" style="background-image:url(/0a624d30655fb938b562e4dd4107433b.jpg)"></div><h1 class="page__heading">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</h1><div class="page__container"><div class="css-xfgthk css-20xtq50"><label for="sidebar-toggle" class="css-7vv0nt css-20xtq52">Table of contents</label><input type="checkbox" id="sidebar-toggle" class="css-38lglc css-20xtq53"/><div class="css-nyzxad css-20xtq51"><div class="toc-nav__wrapper"><div><div><h4 class="toc-nav--header">Interviews</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/verdaccio-interview/">Verdaccio - A lightweight npm proxy registry - Interview with Juan Picado</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/parket-interview/">Parket - A state management library inspired by mobx-state-tree - Interview with Leah Ullmann</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/substyle-interview/">substyle - Build Styling Agnostic Components for React - Interview with Jan-Felix Schwarz</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/illuminate-interview/">Illuminate - Syntax highlighter for Node - Interview with Vivek Bansal</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/logux-interview/">Logux - Replace AJAX-REST - Interview with Andrey Sitnik</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/fastify-interview/">Fastify - Fast and low overhead web framework for Node.js - Interview with Tomas Della Vedova</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/bem-interview/">BEM - Methodology to enable reuse in front-end development - Interview with Sergey Berezhnoy</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/controllerim-interview/">controllerim - MobX Inspired State Management for React - Interview with Nir Yosef</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/react-finland-interview/">React Finland - Your Chance to Learn React Up North - Interview with Juho Vepsäläinen</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-test-plan-interview/">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></li></ul></div><div><h4 class="toc-nav--header">React</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/react-finland-interview/">React Finland - Your Chance to Learn React Up North - Interview with Juho Vepsäläinen</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/react-day-berlin-interview/">React Day Berlin - Fully Packed Day of Your Favorite React Content - Interview with Robert Haritonov</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/rekit-interview/">Rekit - Toolkit for building scalable React applications - Interview with Nate Wang</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-first-router-interview/">Redux-First Router - Just dispatch actions - Interview with James Gillmore</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/rill-interview/">Rill - Universal web application framework - Interview with Dylan Piercey</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/material-ui-interview/">Material-UI - React Components that Implement Google&#x27;s Material Design - Interview with Olivier Tassinari</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/jss-interview/">JSS - Author CSS Using JavaScript as a Host Language - Interview with Oleg Slobodskoi</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/react-alicante-interview/">React Alicante - The international React.js conference in Spain - Interview with Victoria Quirante</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/vx-interview/">vx - The Power of D3 with the Benefits of React - Interview with Harrison Shoff</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/async-reactor-interview/">async-reactor - Render Async Stateless Functional Components in React - Interview with Sven Sauleau</a></li></ul></div><div><h4 class="toc-nav--header">Redux</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-test-plan-interview/">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-zero-interview/">Redux Zero - Single Store, No Reducers - Interview with Matheus Lima</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/rekit-interview/">Rekit - Toolkit for building scalable React applications - Interview with Nate Wang</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-first-router-interview/">Redux-First Router - Just dispatch actions - Interview with James Gillmore</a></li><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</span></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/mikey-interview/">Mikey - React/Redux CLI/Framework - Interview with Michael Farrell</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-interview/">Redux - Reinventing Flux - Interview with Dan Abramov</a></li></ul></div><div><h4 class="toc-nav--header">Redux Saga</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-test-plan-interview/">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</a></li><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</span></li></ul></div><div><h4 class="toc-nav--header">State management</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/parket-interview/">Parket - A state management library inspired by mobx-state-tree - Interview with Leah Ullmann</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/controllerim-interview/">controllerim - MobX Inspired State Management for React - Interview with Nir Yosef</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-test-plan-interview/">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</span></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/cerebral-interview/">Cerebral - Expressing Application Flow with Signals - Interview with Christian Alfoni</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-interview/">Redux - Reinventing Flux - Interview with Dan Abramov</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/mobx-interview/">MobX - Reactive React - Interview with Michel Weststrate</a></li></ul></div></div></div></div></div><div class="page__main"><div class="page__section"><time dateTime="2016-07-18T00:00:00.000Z" class="post__moment">18 Jul 2016</time><div><p>When developing front-ends, handling asynchronous behavior is always bit of a challenge. <a href="https://twitter.com/YassineElouafi2">Yassine Elouafi</a>&#39;s <a href="https://www.npmjs.com/package/redux-saga">redux-saga</a> provides one solution to this problem. Read on to learn more about sagas and <strong>redux-saga</strong> in particular.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>Check out <a href="./redux-interview">the earlier interview about Redux</a> if you haven&#39;t dug into <a href="http://redux.js.org/">Redux</a> just yet.</blockquote><h3 class="header"><a class="header-anchor" href="#can-you-tell-a-bit-about-yourself-" id="can-you-tell-a-bit-about-yourself-"></a><span class="text">Can you tell a bit about yourself?</span><a class="header-anchor-select" href="#can-you-tell-a-bit-about-yourself-">#</a></h3>
<p>
  <figure><img src="/8dd90e6539b275dd9a35c7e193d47026.jpg" alt="Yassine Elouafi" class="author" width="100" height="100" /><figcaption>Yassine Elouafi</figcaption></figure>

  My name is Yassine Elouafi, 39 old and Dad for 2 kids. I live in Tangier (Morocco) and work on a real estate company. I have a lot of passion for coding and learning and hacking new things, exploring new ideas.
</p>

<p>Graduated? Nope (well yes and no, I&#39;m graduated in Finances not in CS). I&#39;m a self taught programmer. I hack things for myself, my company and occasionally others.</p>
<h2 class="header"><a class="header-anchor" href="#how-would-you-describe-redux-saga-to-someone-who-has-never-heard-of-it-" id="how-would-you-describe-redux-saga-to-someone-who-has-never-heard-of-it-"></a><span class="text">How would you describe <em>redux-saga</em> to someone who has never heard of it?</span><a class="header-anchor-select" href="#how-would-you-describe-redux-saga-to-someone-who-has-never-heard-of-it-">#</a></h2>
<p>It is a Redux middleware for handling <strong>side effects</strong>.</p>
<h3 class="header"><a class="header-anchor" href="#redux-middlewares" id="redux-middlewares"></a><span class="text">Redux Middlewares</span><a class="header-anchor-select" href="#redux-middlewares">#</a></h3>
<p>Redux middleware is an add-on you plug into Redux to get additional features. Redux is an opinionated library for managing the state of an application. Without middleware, all we can do in Redux is compute a new state from the previous state and a given action through reducers which are pure functions.</p>
<p>All the handling inside reducers is synchronous and pure. But in real applications we need also to do things that are asynchronous (may not complete immediately like an AJAX request) and impure (change the state of the outside world, like saving to a database). In functional programming (FP) jargon we commonly refer to those things as <strong>side effects</strong>.</p>
<blockquote>
<p>The <em>redux-saga</em> middleware isolates all side effects into software artifacts called <strong>sagas</strong> so that side effects can be managed.</p>
</blockquote>
<h3 class="header"><a class="header-anchor" href="#sagas" id="sagas"></a><span class="text">Sagas</span><a class="header-anchor-select" href="#sagas">#</a></h3>
<p>The term <em>saga</em> was historically used by <a href="http://www.cs.cornell.edu/andru/cs711/2002fa/reading/sagas.pdf">Hector Garcia-Molina and Kenneth Salem</a> to define a mechanism to handle long lived transactions in database systems. But in <em>redux-saga</em>, The closest meaning is actually a <a href="https://msdn.microsoft.com/en-us/library/jj591569.aspx">process manager</a> basically: &quot;a process that receive events, and may emit new events (sync or async), aiming to orchestrate complex workflows inside your application&quot; (kudos to @slorber).</p>
<p>I want to emphasize that you don&#39;t actually have to go through academic papers and backend concepts in order to use <em>redux-saga</em>. It&#39;s sufficient to know that a saga is a piece of code which runs in the background, watch for dispatched actions, may perform some async calls (or synchronous impure calls like browser storage) and can dispatch other actions to the store.</p>
<h2 class="header"><a class="header-anchor" href="#how-does-redux-saga-work-" id="how-does-redux-saga-work-"></a><span class="text">How does <em>redux-saga</em> work?</span><a class="header-anchor-select" href="#how-does-redux-saga-work-">#</a></h2>
<p>Sagas are implemented using generator functions (a new ES2015 feature). Unlike normal functions which run to completion and return a final value, generator functions can be paused and resumed on demand and can return (more accurately <code>yield</code>) multiple values.</p>
<blockquote>
<p>In <em>redux-saga</em>, Generators typically yield <em>effects</em>. They are simply JavaScript objects containing instructions to be performed by the middleware.</p>
</blockquote>
<p>To understand how saga works, I&#39;ll illustrate with a fairly common example and compare with <a href="https://www.npmjs.com/package/redux-thunk">redux-thunk</a>, the idiomatic way to handle async actions in Redux.</p>
<h3 class="header"><a class="header-anchor" href="#requesting-data-using-redux-thunk-" id="requesting-data-using-redux-thunk-"></a><span class="text">Requesting Data Using <em>redux-thunk</em></span><a class="header-anchor-select" href="#requesting-data-using-redux-thunk-">#</a></h3>
<p>Suppose we want to request some data from a given url each time an UI Button is clicked. With <em>redux-thunk</em> we&#39;ll write a thunk which will typically look like:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-function" >function</span> <span class="token function" >fetchUrl</span><span class="token punctuation brackets-parentheses" >(</span>url<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-parentheses" >(</span>dispatch<span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token function" >dispatch</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
      type<span class="token punctuation" >:</span> <span class="token string" >'FETCH_REQUEST'</span>
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

    <span class="token function" >fetch</span><span class="token punctuation brackets-parentheses" >(</span>url<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation brackets-parentheses" >(</span>data <span class="token operator" >=&gt;</span> <span class="token function" >dispatch</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
      type<span class="token punctuation" >:</span> <span class="token string" >'FETCH_SUCCESS'</span><span class="token punctuation" >,</span>
      data
    <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>Then, assuming the thunk middleware is mounted in the Redux store, we can dispatch the above function like this:</p>
<pre><code class="lang-javascript"><span class="token function" >dispatch</span><span class="token punctuation brackets-parentheses" >(</span>
  <span class="token function" >fetchUrl</span><span class="token punctuation brackets-parentheses" >(</span>url<span class="token punctuation brackets-parentheses" >)</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >:</span>
</code></pre>
<p>That is, You write the <em>task</em> to be performed (the <code>fetchUrl</code> which return the thunk). And you invoke that task directly from UI components.</p>
<p>If you don&#39;t want to pollute your React components with business logic, then thunks are a the simplest and the most idiomatic way to perform side effects in Redux. However, they may have some drawbacks:</p>
<ol>
<li>In order to test the logic inside thunks, you must mock all invoked functions, including the store methods.</li>
<li>Coordinating concurrent tasks can be difficult: If you want to cancel a pending fetch whenever a new fetch is triggered, you&#39;ll have to use the Redux store to keep track of the control state (whether the previous fetch is still running or not). It might not be that difficult for simple concurrency requirements but can get quickly become awkward.</li>
<li>Business logic tends to be scattered in various places: startup modules, components, and thunks themselves.</li>
</ol>
<h3 class="header"><a class="header-anchor" href="#requesting-data-using-redux-saga-" id="requesting-data-using-redux-saga-"></a><span class="text">Requesting Data Using <em>redux-saga</em></span><a class="header-anchor-select" href="#requesting-data-using-redux-saga-">#</a></h3>
<p>In <em>redux-saga</em>, things are slightly different. First, UI Components never invoke the tasks themselves, instead they always dispatch plain object actions to notify that something happened in the UI:</p>
<pre><code class="lang-javascript"><span class="token function" >dispacth</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
  type<span class="token punctuation" >:</span> <span class="token string" >'FETCH_REQUEST'</span><span class="token punctuation" >,</span>
  url<span class="token punctuation" >:</span> <span class="token comment" spellcheck="true" >/* ... */</span><span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>Everything else must be encapsulated inside sagas. To perform the task that will perform the actual fetch, you must create a saga that will <em>watch</em> for the dispatched action <code>FETCH_REQUEST</code> and <em>fork</em> the task whenever we get the desired action:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> take<span class="token punctuation" >,</span> fork<span class="token punctuation" >,</span> call<span class="token punctuation" >,</span> put <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >'redux-saga/effects'</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// The watcher: watch actions and coordinate worker tasks</span>
<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >watchFetchRequests</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-while" >while</span><span class="token punctuation brackets-parentheses" >(</span><span class="token boolean" >true</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> action <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >take</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'FETCH_REQUEST'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword keyword-yield" >yield</span> <span class="token function" >fork</span><span class="token punctuation brackets-parentheses" >(</span>fetchUrl<span class="token punctuation" >,</span> action<span class="token punctuation" >.</span>url<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token comment" spellcheck="true" >// The worker: perform the requested task</span>
<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >fetchUrl</span><span class="token punctuation brackets-parentheses" >(</span>url<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> data <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>fetch<span class="token punctuation" >,</span> url<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span>
    type<span class="token punctuation" >:</span> <span class="token string" >'FETCH_SUCCESS'</span><span class="token punctuation" >,</span>
    data
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>Note all the 4 functions we imported from <code>redux-saga/effects</code> are pure functions. I said previously that generators yield plain JavaScript objects called effects. The above functions serve that purpose.</p>
<p>Each function constructs a particular object which embeds some instruction to be fullfilled by the middleware. For example <code>call(fetchUrl, url)</code> returns an object like <code>{ type: CALL, function: fetchUrl, args: [url] }</code>.</p>
<p>This is a fundamental concept in <em>redux-saga</em>: we&#39;re not actually executing the side effect (i.e. function call) ourselves, but just constructing a description of the desired effect. The middleware takes care of the real execution then hands the result back to the generator.</p>
<p>In the above example, we used <code>yield take(&#39;FETCH_REQUEST&#39;)</code> to tell the middleware that we&#39;re waiting for an action of type <code>FETCH_REQUEST</code>. What happens is that the middleware will block the <code>watchFetchRequests</code> generator until a <code>FETCH_REQUEST</code> action is dispatched. Once we get a matching action, the middleware will resume the generator with the result which is the action object.</p>
<p>The next instruction <code>fork(fetchUrl, action.url)</code> tells the middleware to <em>fork</em> a new <code>fetchUrl</code> task with <code>action.url</code> as argument. Now the middleware will invoke the <code>fetchUrl</code> Generator but <strong>without blocking</strong> <code>watchFetchRequests</code>. It&#39;s as if the 2 tasks are now evolving in parallel.</p>
<p><code>watchFetchRequests</code> continues listening to other <code>watchFetchRequests</code> actions <em>while</em> the <code>fetchUrl</code> starts doing its work. Of course in reality only on thing can be done at time since JavaScript is single threaded, <em>redux-saga</em> is performing the scheduling behind the scene to make it look like things are done in parallel.</p>
<p>Similarly, in <code>fetchUrl</code>, we used <code>call(fetch, url)</code> to instruct the middleware to call the <code>fetch</code> function. But this time, the call is <em>blocking</em>, the middleware will suspend the generator until the <code>Promise</code> returned by <code>fetch</code> is resolved (or rejected) then resume the generator with the resolved value (or throw with the rejected error)</p>
<p>It may sound like a lot of indirection, but this separation between effect creation and execution makes it really simple to test the logic inside generators. For example, we can test <code>fetchUrl</code> simply by iterating over the generator and inspecting the yielded effects:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> generator <span class="token operator" >=</span> <span class="token function" >fetchUrl</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

assert<span class="token punctuation" >.</span><span class="token function" >deepEqual</span><span class="token punctuation brackets-parentheses" >(</span>
  generator<span class="token punctuation" >.</span><span class="token function" >next</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span>value<span class="token punctuation" >,</span>
  <span class="token function" >take</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'FETCH_RESULT'</span><span class="token punctuation brackets-parentheses" >)</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// we can easily mock the result of the `take('FETCH_RESULT')` call</span>
<span class="token keyword keyword-const" >const</span> mockAction <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span>
  url<span class="token punctuation" >:</span> <span class="token string" >'some url'</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>

<span class="token comment" spellcheck="true" >// and inject the result back into the Generator</span>
assert<span class="token punctuation" >.</span><span class="token function" >deepEqual</span><span class="token punctuation brackets-parentheses" >(</span>
  generator<span class="token punctuation" >.</span><span class="token function" >next</span><span class="token punctuation brackets-parentheses" >(</span>mockAction<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span>value<span class="token punctuation" >,</span>
  <span class="token function" >take</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'FETCH_RESULT'</span><span class="token punctuation brackets-parentheses" >)</span>
<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>And since generators are stateful, we have much more flexibility to coordinate concurrent tasks. For example, if we want to cancel any pending fetch whenever we request a new fetch, we can store a reference to the current task in a local variable and use the <code>cancel</code> effect:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> take<span class="token punctuation" >,</span> fork<span class="token punctuation" >,</span> cancel<span class="token punctuation" >,</span> call<span class="token punctuation" >,</span> put <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >'redux-saga/effects'</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >watchFetchRequests</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-let" >let</span> currentTask<span class="token punctuation" >;</span>

  <span class="token keyword keyword-while" >while</span><span class="token punctuation brackets-parentheses" >(</span><span class="token boolean" >true</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> action <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >take</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >'FETCH_REQUEST'</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

    <span class="token keyword keyword-if" >if</span><span class="token punctuation brackets-parentheses" >(</span>currentTask<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
      <span class="token keyword keyword-yield" >yield</span> <span class="token function" >cancel</span><span class="token punctuation brackets-parentheses" >(</span>currentTask<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token punctuation brackets-braces" >}</span>

    currentTask <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >fork</span><span class="token punctuation brackets-parentheses" >(</span>fetchUrl<span class="token punctuation" >,</span> action<span class="token punctuation" >.</span>url<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<h2 class="header"><a class="header-anchor" href="#how-does-redux-saga-differ-from-other-solutions-" id="how-does-redux-saga-differ-from-other-solutions-"></a><span class="text">How does <em>redux-saga</em> differ from other solutions?</span><a class="header-anchor-select" href="#how-does-redux-saga-differ-from-other-solutions-">#</a></h2>
<ul>
<li><strong>Declarative effects</strong>: all operations inside sagas are yielded as plain JavaScript objects, which then get executed by the middleware. This makes it very easy to test the business logic inside the saga. You simply iterate over the generator and test the yielded sequence of objects by a simple <code>deepEqual</code>.</li>
</ul>
<p>In other solutions, you&#39;ll typically have to mock all the surrounding environment which can make the tests very complicated and less reliable.</p>
<ul>
<li><strong>Advanced async control flow and concurrency management</strong>: You can describe your async flow using a simple synchronous style and familiar control flow constructs (<code>if/else</code>, loops, <code>try/catch</code>...).</li>
</ul>
<p>The library also provides primitives and operators to manage concurrency between tasks (e.g. coordinate concurrent AJAX requests). You can <em>fork</em> multiple background tasks in parallel. You can also cancel a running task.</p>
<ul>
<li>Sagas has also some architectural benefits: In <em>redux-saga</em> applications, since all side effects are moved into sagas, UI components do not typically perform any business logic but only dispatch actions as pure JavaScript objects to notify what happened.</li>
</ul>
<p>This makes the components more reusable in different contexts. A saga can also act as a decoupling point between 2 parts of the UI, by listening for events from one part and emitting actions that may update another part of the UI. Without any part being aware of the other part.</p>
<h2 class="header"><a class="header-anchor" href="#why-did-you-develop-redux-saga-" id="why-did-you-develop-redux-saga-"></a><span class="text">Why did you develop <em>redux-saga</em>?</span><a class="header-anchor-select" href="#why-did-you-develop-redux-saga-">#</a></h2>
<p>It all started with <a href="https://medium.com/@yelouafi/react-less-virtual-dom-with-snabbdom-functions-everywhere-53b672cb2fe3#.98gygakup">an article</a> I wrote about virtual DOM and a functional front-end architecture inspired by Elm. The architecture makes it possible to write the entire web application using pure functions. After finishing the article, I was looking for the possible ways to introduce side effects. Elm has already introduced the concept of Declarative Effects (effects as data).</p>
<p>I <a href="https://github.com/paldepind/functional-frontend-architecture/issues/20">started a discussion</a> in the <a href="https://github.com/paldepind/functional-frontend-architecture">functional-frontend-architecture</a> repository which turned out to be immensely useful.</p>
<p>Sebastien Lorber (@slorber) introduced me to the concept of Sagas as <em>process managers</em>: a kind of background threads which listen for incoming events and can emit themselves other events. Although my initial focus was not on Redux, I started playing with the idea as a Redux middleware and later realized I could have a more powerful implementation using Generators and by introducing the <code>take</code> effect.</p>
<p>Instead of subscribing to Redux actions and continually invoke a piece of code (the handler) each time an action is dispatched. I could describe the concept of <em>waiting an action</em> as a normal function call which would block the generator until the expected action is dispatched. This would offer a lot more flexibility to describe complex async flows.</p>
<h2 class="header"><a class="header-anchor" href="#what-next-" id="what-next-"></a><span class="text">What next?</span><a class="header-anchor-select" href="#what-next-">#</a></h2>
<p>I&#39;m still toying with &#39;alternative&#39; ways (to virtual DOM) to describe dynamic and interactive UIs. I was recently looking at <a href="https://github.com/tildeio/glimmer">Glimmer</a> (the rendering engine behind Ember) which has some interesting ideas borrowed from Functional Reactive Programming (FRP).</p>
<p>Basically it&#39;s a kind of a pull based model (no subscription or change propagation through listeners) which is a concept I&#39;m very attached to. I intend to play with the concept when I have some time and see if we can combine the data-flow model of React with the templating approach of Glimmer/Ember.</p>
<h2 class="header"><a class="header-anchor" href="#what-does-the-future-look-like-for-redux-saga-and-web-development-in-general-can-you-see-any-particular-trends-" id="what-does-the-future-look-like-for-redux-saga-and-web-development-in-general-can-you-see-any-particular-trends-"></a><span class="text">What does the future look like for <em>redux-saga</em> and web development in general? Can you see any particular trends?</span><a class="header-anchor-select" href="#what-does-the-future-look-like-for-redux-saga-and-web-development-in-general-can-you-see-any-particular-trends-">#</a></h2>
<p>Hard to tell. There are more and more people using <em>redux-saga</em> but front-end development is continually evolving and the community is more receptive to innovations (more than in other languages like Java for example).</p>
<p>There seems to be an increasing interest on static typing. There is also a trend toward declarative data fetching (GraphQL, Falcor) although less marked (perhaps because the solutions are still very young and evolving).</p>
<h2 class="header"><a class="header-anchor" href="#who-should-i-interview-next-" id="who-should-i-interview-next-"></a><span class="text">Who should I interview next?</span><a class="header-anchor-select" href="#who-should-i-interview-next-">#</a></h2>
<p>Brian Lonsdorf (@drboolean). He&#39;s doing a great job on demystifying FP concepts to JavaScript developers.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Thanks for the interview Yassine! Sagas seem like a great solution to problems of asynchronous sort.</p>
<p>If you want to give redux-saga a go, head to the <a href="https://github.com/yelouafi/redux-saga">project GitHub</a> and learn more!</p>
</div><time dateTime="2016-07-18T00:00:00.000Z" class="post__moment">18 Jul 2016</time><div class="post__author"><a href="https://twitter.com/bebraw">Juho Vepsäläinen</a></div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this blog post, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-1nfeoes css-va8n550"><input type="email" class="css-baseStyle-1jrw962 css-inputStyle-16d70pc" placeholder="Email" name="EMAIL" id="mce-EMAIL" required=""/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" class="css-baseStyle-1jrw962 css-buttonStyle-1y781j1" value="Subscribe" name="subscribe"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous post</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/blog/snabbdom-interview/">Snabbdom - a Virtual DOM Focusing on Simplicity - Interview with Simon Friis Vindum</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next post</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/blog/tcomb-interview/">tcomb - Type checking and DDD for JavaScript - Interview with Giulio Canti</a></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div><div><a class="next-page" title="tcomb - Type checking and DDD for JavaScript - Interview with Giulio Canti" href="/blog/tcomb-interview/"><i class="icon-right-open"></i></a><a class="previous-page" title="Snabbdom - a Virtual DOM Focusing on Simplicity - Interview with Simon Friis Vindum" href="/blog/snabbdom-interview/"><i class="icon-left-open"></i></a></div></div></div></div><div class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><nav class="nav"><div class="nav__link"><a href="/">Home</a></div><div class="nav__selected__link"><a href="/blog/">Read the blog</a></div><div class="nav__link"><a href="/maintenance/">Maintenance book</a></div><div class="nav__link"><a href="/react/">React book</a></div><div class="nav__link"><a href="/webpack/">Webpack book</a></div><div class="nav__link"><a href="/training/">Hire me</a></div><div class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></div></nav></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/webpack-in-munich-may-2018/">Webpack in Munich, May 2018</a></li><li><a class="blog-teaser" href="/blog/concat-2018/">Experiences on Concat 2018</a></li><li><a class="blog-teaser" href="/blog/verdaccio-interview/">Verdaccio - A lightweight npm proxy registry - Interview with Juan Picado</a></li><li><a class="blog-teaser" href="/blog/parket-interview/">Parket - A state management library inspired by mobx-state-tree - Interview with Leah Ullmann</a></li><li><a class="blog-teaser" href="/blog/substyle-interview/">substyle - Build Styling Agnostic Components for React - Interview with Jan-Felix Schwarz</a></li><li><a class="blog-teaser" href="/blog/agentconf-2018/">Experiences on AgentConf 2018</a></li><li><a class="blog-teaser" href="/blog/scriptconf-2018/">Experiences on ScriptConf 2018</a></li></ul></div><ul class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><img alt="Maintenance book cover" src="/44f3a3a3dad86956efa57dea740c5d44.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><img alt="React book cover" src="/b61671d95f81496495f2587a10ddb122.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-3bvg0c0 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><img alt="Webpack book cover" src="/8f86c1d07d5536454690030cd1a10b53.png" width="255" height="329" class="css-1d87hyi css-3bvg0c1"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div></div>

    
  </body>
</html>
