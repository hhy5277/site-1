<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta
      name="description"
      content="
Redux Saga is famous for being easy to test but what if it could be even more comfortable. redux-sa…" />
    <meta
      name="keywords"
      content="interview,redux,redux-saga,testing,state-management" />
    <meta property="og:site_name" content="SurviveJS" />
    <meta property="og:title" content="redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank" />
    <meta property="og:description" content="
Redux Saga is famous for being easy to test but what if it could be even more comfortable. redux-sa…" />
    <meta name="twitter:title" content="redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank" />
    <meta name="twitter:description" content="
Redux Saga is famous for being easy to test but what if it could be even more comfortable. redux-sa…" />
    <meta name="twitter:site" content="@SurviveJS" />
    <title>redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</title>
    
    <link rel='icon' type='image/png' href='/favicon.png'></link>

    
      <link href="/site.825d99211287e8d6e5dd.css" rel="stylesheet">
    

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css"
    />
  </head>
  <body>
    <header class="nav__wrapper"><input type="checkbox" class="nav__toggle" id="nav__toggle"/><label class="nav__toggle-label" for="nav__toggle"></label><a title="Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/blog/redux-form-interview/"><i class="icon-left-open"></i></a><nav class="nav"><ul class="nav__items"><li class="nav__link"><a href="https://graphql-finland.fi/">GraphQL Finland</a></li><li class="nav__link"><a href="/">Home</a></li><li class="nav__link nav__link_selected"><a href="/blog/">Read the blog</a></li><li class="nav__link"><a href="/maintenance/">Maintenance book</a></li><li class="nav__link"><a href="/react/">React book</a></li><li class="nav__link"><a href="/webpack/">Webpack book</a></li><li class="nav__link"><a href="/training/">Hire me</a></li><li class="nav__link"><a href="https://twitter.com/survivejs">@survivejs</a></li></ul></nav><a title="React Finland - Your Chance to Learn React Up North - Interview with Juho Vepsäläinen" aria-hidden="true" class="css-17k05uf css-isbjic0" href="/blog/react-finland-interview/"><i class="icon-right-open"></i></a></header><div class="page"><div class="css-b5dhuc css-8rlsag0"><div style="background-image:url(/6c9b1abd4a010508dd9f3c964a6b3be6.jpg)" class="css-1huzfyy css-8rlsag1"></div><h1 class="css-13wbkqf css-8rlsag2">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</h1></div><div class="page__container"><div class="css-xfgthk css-20xtq50"><label for="sidebar-toggle" class="css-1whlnn6 css-20xtq52">Table of contents</label><input type="checkbox" id="sidebar-toggle" class="css-38lglc css-20xtq53"/><div class="css-nyzxad css-20xtq51"><div class="toc-nav__wrapper"><div><div><h4 class="toc-nav--header">Interviews</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/graphql-finland-interview/">GraphQL Finland - Learn GraphQL Up North - Interview with Mikhail Novikov</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/proppy-interview/">Proppy - Functional props composition for components - Interview with Fahad Ibnay Heylaal</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/fastpack-interview/">Fastpack - Pack JavaScript code fast and easy - Interview with Oleksiy Golovko</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/lint-staged-interview/">lint-staged - Run Linters on git Staged Files - Interview with Andrey Okonetchnikov</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/verdaccio-interview/">Verdaccio - A lightweight npm proxy registry - Interview with Juan Picado</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/parket-interview/">Parket - A state management library inspired by mobx-state-tree - Interview with Leah Ullmann</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/substyle-interview/">substyle - Build Styling Agnostic Components for React - Interview with Jan-Felix Schwarz</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/illuminate-interview/">Illuminate - Syntax highlighter for Node - Interview with Vivek Bansal</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/logux-interview/">Logux - Replace AJAX-REST - Interview with Andrey Sitnik</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/fastify-interview/">Fastify - Fast and low overhead web framework for Node.js - Interview with Tomas Della Vedova</a></li></ul></div><div><h4 class="toc-nav--header">Redux</h4><ul class="toc-nav"><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</span></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-zero-interview/">Redux Zero - Single Store, No Reducers - Interview with Matheus Lima</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/rekit-interview/">Rekit - Toolkit for building scalable React applications - Interview with Nate Wang</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-first-router-interview/">Redux-First Router - Just dispatch actions - Interview with James Gillmore</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-interview/">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/mikey-interview/">Mikey - React/Redux CLI/Framework - Interview with Michael Farrell</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-interview/">Redux - Reinventing Flux - Interview with Dan Abramov</a></li></ul></div><div><h4 class="toc-nav--header">Redux Saga</h4><ul class="toc-nav"><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</span></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-interview/">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</a></li></ul></div><div><h4 class="toc-nav--header">Testing</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/lint-staged-interview/">lint-staged - Run Linters on git Staged Files - Interview with Andrey Okonetchnikov</a></li><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</span></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/cabbie-interview/">Cabbie - WebDriver for the masses - Interview with Forbes Lindesay</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/unexpected-react-interview/">unexpected-react - Test Full Virtual DOM - Interview with Dave Brotherstone</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/codeceptjs-interview/">CodeceptJS - Modern Era Acceptance Testing for Node.js - Interview with Michael Bodnarchuk</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/unexpected-interview/">Unexpected - The Extensible BDD Assertion Toolkit - Interview with Sune Simonsen</a></li></ul></div><div><h4 class="toc-nav--header">State management</h4><ul class="toc-nav"><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/parket-interview/">Parket - A state management library inspired by mobx-state-tree - Interview with Leah Ullmann</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/controllerim-interview/">controllerim - MobX Inspired State Management for React - Interview with Nir Yosef</a></li><li class="toc-undefined"><span class="toc-nav__link toc-nav__link--current undefined">redux-saga-test-plan - Test Redux Saga with an easy plan - Interview with Jeremy Fairbank</span></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/kea-interview/">Kea - High level abstraction between React and Redux - Interview with Marius Andra</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-saga-interview/">redux-saga - Saga Middleware for Redux to Handle Side Effects - Interview with Yassine Elouafi</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/cerebral-interview/">Cerebral - Expressing Application Flow with Signals - Interview with Christian Alfoni</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/redux-interview/">Redux - Reinventing Flux - Interview with Dan Abramov</a></li><li class="toc-undefined"><a class="toc-nav__link undefined" href="/blog/mobx-interview/">MobX - Reactive React - Interview with Michel Weststrate</a></li></ul></div></div></div></div></div><div class="page__main"><div class="page__section"><time dateTime="2017-12-20T00:00:00.000Z" class="post__moment">20 Dec 2017</time><div><p>Redux Saga is famous for being easy to test but what if it could be even more comfortable. <em>redux-saga-test-plan</em> by <a href="https://twitter.com/elpapapollo">Jeremy Fairbank</a> was designed precisely for this purpose.</p>
<h2 class="header"><a class="header-anchor" href="#can-you-tell-a-bit-about-yourself-" id="can-you-tell-a-bit-about-yourself-"></a><span class="text">Can you tell a bit about yourself?</span><a class="header-anchor-select" href="#can-you-tell-a-bit-about-yourself-">#</a></h2>
<p>
  <span class="author">
    <img src="https://www.gravatar.com/avatar/94bd558238b69c45d3d3e15797ae94f7?s=200" alt="Jeremy Fairbank" class="author" width="100" height="100" />
  </span>

I&#39;m a software engineer and consultant with <a href="https://testdouble.com/">Test Double</a>. We believe that software is broken, and we&#39;re here to fix it. Our mission is to improve how the world builds software.
</p>

<p>I&#39;ve been doing front-end development for almost ten years now and enjoy the paradigms that React and Redux helped introduce to the front-end world. I&#39;ve created a few open source projects that work well with the React and Redux ecosystem such as <a href="https://github.com/jfairbank/revalidate">revalidate</a>, <a href="https://github.com/jfairbank/redux-saga-router">redux-saga-router</a>, and, the topic of this interview, <a href="https://github.com/jfairbank/redux-saga-test-plan"><em>redux-saga-test-plan</em></a>.</p>
<p>I&#39;m a huge fan of functional programming and Elm. In fact, I&#39;m currently writing a book on Elm with <a href="https://pragprog.com/">The Pragmatic Programmers</a> called <em>Programming Elm: Build Safe and Maintainable Front-End Applications</em>. The book is over halfway complete and should be available sometime in Spring 2018.</p>
<h2 class="header"><a class="header-anchor" href="#how-would-you-describe-_redux-saga-test-plan_-to-someone-who-has-never-heard-of-it-" id="how-would-you-describe-_redux-saga-test-plan_-to-someone-who-has-never-heard-of-it-"></a><span class="text">How would you describe <em>redux-saga-test-plan</em> to someone who has never heard of it?</span><a class="header-anchor-select" href="#how-would-you-describe-_redux-saga-test-plan_-to-someone-who-has-never-heard-of-it-">#</a></h2>
<p><a href="https://redux-saga-test-plan.jeremyfairbank.com/"><em>redux-saga-test-plan</em></a> is a library for easily testing <a href="https://redux-saga.js.org/">redux-saga</a>.</p>
<blockquote class="tip"><i class="icon-attention-circled"></i>If you&#39;re unfamiliar with redux-saga, check out <a href="/blog/redux-saga-interview/">the redux-saga interview</a> with creator Yassine Elouafi.</blockquote><p><em>redux-saga-test-plan</em> removes the headache of manually testing saga generator functions that couple your tests to their implementations. It offers a declarative, chainable API for testing that your saga yields certain effects without worrying about other effects or the order effects were yielded. It also runs your saga with redux-saga&#39;s runtime so that you can write integration tests, or you can use <em>redux-saga-test-plan&#39;s</em> built-in effect mocking to write unit tests too.</p>
<h2 class="header"><a class="header-anchor" href="#how-does-_redux-saga-test-plan_-work-" id="how-does-_redux-saga-test-plan_-work-"></a><span class="text">How does <em>redux-saga-test-plan</em> work?</span><a class="header-anchor-select" href="#how-does-_redux-saga-test-plan_-work-">#</a></h2>
<p>Let&#39;s look at some example sagas to see how <em>redux-saga-test-plan</em> makes it easy to test them.</p>
<h3 class="header"><a class="header-anchor" href="#simple-api-saga" id="simple-api-saga"></a><span class="text">Simple API Saga</span><a class="header-anchor-select" href="#simple-api-saga">#</a></h3>
<p>Given this simple saga for fetching an array of users:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> call<span class="token punctuation" >,</span> put <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga/effects"</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >fetchUsersSaga</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>You can test it with <em>redux-saga-test-plan</em> like this:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> expectSaga <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga-test-plan"</span><span class="token punctuation" >;</span>

<span class="token function" >it</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"fetches users"</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token punctuation brackets-square" >[</span><span class="token string" >"Jeremy"</span><span class="token punctuation" >,</span> <span class="token string" >"Tucker"</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-const" >const</span> api <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span>
    getUsers<span class="token punctuation" >:</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> users<span class="token punctuation" >,</span>
  <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-return" >return</span> <span class="token function" >expectSaga</span><span class="token punctuation brackets-parentheses" >(</span>fetchUsersSaga<span class="token punctuation" >,</span> api<span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >run</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>The <code>expectSaga</code> function accepts a saga as an argument as well as any additional arguments for the saga itself. Here, we pass in the <code>fetchUsersSaga</code> and inject a mock <code>api</code> to fake the API response.</p>
<p><code>expectSaga</code> returns a chainable API with lots of useful methods. The <code>put</code> method is an assertion that the saga will eventually yield a <code>put</code> effect with the given <code>FETCH_USERS_SUCCESS</code> action.</p>
<p>The <code>run</code> method starts the saga. <em>redux-saga-test-plan</em> uses redux-saga&#39;s <code>runSaga</code> function to run the saga like it would be run in your application. <code>expectSaga</code> tracks any effects your saga yields, so you can assert them like we do with <code>put</code> here.</p>
<p>Sagas are inherently asynchronous, so <em>redux-saga-test-plan</em> returns a promise from the <code>run</code> method. You need that promise to know when the test is complete. In this example, we&#39;re using Jest so that we can return the promise directly to it.</p>
<p>Because <em>redux-saga-test-plan</em> runs asynchronously, it times out your saga after a set amount of time. You can <a href="http://redux-saga-test-plan.jeremyfairbank.com/integration-testing/timeout.html#adjusting-timeout">configure the timeout length</a>.</p>
<h3 class="header"><a class="header-anchor" href="#built-in-mocking" id="built-in-mocking"></a><span class="text">Built-in Mocking</span><a class="header-anchor-select" href="#built-in-mocking">#</a></h3>
<p>If you don&#39;t inject dependencies like the <code>api</code> object, you can use <code>expectSaga</code>&#39;s built-in mocking mechanism called <em>providers</em>. Let&#39;s say you import <code>api</code> from another file and use it like this instead:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> call<span class="token punctuation" >,</span> put <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga/effects"</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> api <span class="token keyword keyword-from" >from</span> <span class="token string" >"./api"</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >fetchUsersSaga</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>You can mock it with the <code>provide</code> method like this:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> expectSaga <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga-test-plan"</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> api <span class="token keyword keyword-from" >from</span> <span class="token string" >"./api"</span><span class="token punctuation" >;</span>

<span class="token function" >it</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"fetches users"</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token punctuation brackets-square" >[</span><span class="token string" >"Jeremy"</span><span class="token punctuation" >,</span> <span class="token string" >"Tucker"</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-return" >return</span> <span class="token function" >expectSaga</span><span class="token punctuation brackets-parentheses" >(</span>fetchUsersSaga<span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >provide</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >[</span><span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span> users<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >run</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>The <code>provide</code> method takes an array of matcher-value pairs. Each matcher-value pair is an array with an effect to match and a fake value to return. <em>redux-saga-test-plan</em> will intercept effects that match and return the fake value instead of letting redux-saga handle the effect. In this example, we match any <code>call</code> effects to <code>api.getUsers</code> and return a fake array of users instead.</p>
<h3 class="header"><a class="header-anchor" href="#dispatching-effects-and-forked-sagas" id="dispatching-effects-and-forked-sagas"></a><span class="text">Dispatching Effects and Forked Sagas</span><a class="header-anchor-select" href="#dispatching-effects-and-forked-sagas">#</a></h3>
<p><em>redux-saga-test-plan</em> can handle more complex saga relationships like this:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> call<span class="token punctuation" >,</span> put<span class="token punctuation" >,</span> takeLatest <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga/effects"</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> api <span class="token keyword keyword-from" >from</span> <span class="token string" >"./api"</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >fetchUserSaga</span><span class="token punctuation brackets-parentheses" >(</span>action<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> id <span class="token operator" >=</span> action<span class="token punctuation" >.</span>payload<span class="token punctuation" >;</span>
  <span class="token keyword keyword-const" >const</span> user <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUser<span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USER_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> user <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >watchFetchUserSaga</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-yield" >yield</span> <span class="token function" >takeLatest</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"FETCH_USER_REQUEST"</span><span class="token punctuation" >,</span> fetchUserSaga<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>In this example, <code>watchFetchUserSaga</code> uses <code>takeLatest</code> to handle the latest <code>FETCH_USER_REQUEST</code> action. If something dispatches <code>FETCH_USER_REQUEST</code>, then redux-saga forks <code>fetchUserSaga</code> to handle the action and fetch a user by id from the action&#39;s <code>payload</code>. You can test these sagas with <em>redux-saga-test-plan</em> like this:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> expectSaga <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga-test-plan"</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> api <span class="token keyword keyword-from" >from</span> <span class="token string" >"./api"</span><span class="token punctuation" >;</span>

<span class="token function" >it</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"fetches a user"</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> id <span class="token operator" >=</span> <span class="token number" >42</span><span class="token punctuation" >;</span>
  <span class="token keyword keyword-const" >const</span> user <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span> id<span class="token punctuation" >,</span> name<span class="token punctuation" >:</span> <span class="token string" >"Jeremy"</span> <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-return" >return</span> <span class="token function" >expectSaga</span><span class="token punctuation brackets-parentheses" >(</span>watchFetchUserSaga<span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >provide</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >[</span><span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUser<span class="token punctuation" >,</span> id<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span> user<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USER_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> user <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >dispatch</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USER_REQUEST"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> id <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >silentRun</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p><em>redux-saga-test-plan</em> captures effects from forked sagas too. Notice that we call <code>expectSaga</code> with <code>watchFetchUserSaga</code> but still test the behavior of <code>fetchUserSaga</code> with the <code>put</code> assertion.</p>
<p>We use the <code>dispatch</code> method to dispatch a <code>FETCH_USER_REQUEST</code> action with a <code>payload</code> id of <code>42</code> to <code>watchFetchUserSaga</code>. redux-saga then forks and runs <code>fetchUserSaga</code>.</p>
<p><code>takeLatest</code> runs in a loop so that <em>redux-saga-test-plan</em> will time out the saga with a warning message. You can safely silence the warning with the alternative <code>silentRun</code> method since we expect a timeout here.</p>
<h3 class="header"><a class="header-anchor" href="#error-handling" id="error-handling"></a><span class="text">Error Handling</span><a class="header-anchor-select" href="#error-handling">#</a></h3>
<p>You can use providers to test your saga&#39;s error handling too. Take this new version of <code>fetchUsersSaga</code> that uses a <code>try-catch</code> block:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >fetchUsersSaga</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-try" >try</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
    <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-catch" >catch</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token class-name" >e</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_FAIL"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> e <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>You can import <code>throwError</code> from <code>redux-saga-test-plan/providers</code> to simulate an error in the <code>provide</code> method:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> expectSaga <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga-test-plan"</span><span class="token punctuation" >;</span>
<span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> throwError <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga-test-plan/providers"</span><span class="token punctuation" >;</span>

<span class="token function" >it</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"handles errors"</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> error <span class="token operator" >=</span> <span class="token keyword keyword-new" >new</span> <span class="token class-name" >Error</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"Whoops"</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-return" >return</span> <span class="token function" >expectSaga</span><span class="token punctuation brackets-parentheses" >(</span>fetchUsersSaga<span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >provide</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >[</span><span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span> <span class="token function" >throwError</span><span class="token punctuation brackets-parentheses" >(</span>error<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_FAIL"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> error <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >run</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#redux-state" id="redux-state"></a><span class="text">Redux State</span><a class="header-anchor-select" href="#redux-state">#</a></h3>
<p>You can also test your Redux reducers alongside your sagas. Take this reducer for updating the array of users in the store state:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-const" >const</span> INITIAL_STATE <span class="token operator" >=</span> <span class="token punctuation brackets-braces" >{</span> users<span class="token punctuation" >:</span> <span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >]</span> <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>

<span class="token keyword keyword-function" >function</span> <span class="token function" >reducer</span><span class="token punctuation brackets-parentheses" >(</span>state <span class="token operator" >=</span> INITIAL_STATE<span class="token punctuation" >,</span> action<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-switch" >switch</span> <span class="token punctuation brackets-parentheses" >(</span>action<span class="token punctuation" >.</span>type<span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
    <span class="token keyword keyword-case" >case</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >:</span>
      <span class="token keyword keyword-return" >return</span> <span class="token punctuation brackets-braces" >{</span> <span class="token operator" >...</span>state<span class="token punctuation" >,</span> users<span class="token punctuation" >:</span> action<span class="token punctuation" >.</span>payload <span class="token punctuation brackets-braces" >}</span><span class="token punctuation" >;</span>
    <span class="token keyword keyword-default" >default</span><span class="token punctuation" >:</span>
      <span class="token keyword keyword-return" >return</span> state<span class="token punctuation" >;</span>
  <span class="token punctuation brackets-braces" >}</span>
<span class="token punctuation brackets-braces" >}</span>
</code></pre>
<p>You can use the <code>withReducer</code> method to hook up your reducer and then assert the final state with <code>hasFinalState</code>:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-import" >import</span> <span class="token punctuation brackets-braces" >{</span> expectSaga <span class="token punctuation brackets-braces" >}</span> <span class="token keyword keyword-from" >from</span> <span class="token string" >"redux-saga-test-plan"</span><span class="token punctuation" >;</span>

<span class="token function" >it</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"fetches the users into the store state"</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token punctuation brackets-square" >[</span><span class="token string" >"Jeremy"</span><span class="token punctuation" >,</span> <span class="token string" >"Tucker"</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >;</span>

  <span class="token keyword keyword-return" >return</span> <span class="token function" >expectSaga</span><span class="token punctuation brackets-parentheses" >(</span>fetchUsersSaga<span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >withReducer</span><span class="token punctuation brackets-parentheses" >(</span>reducer<span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >provide</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-square" >[</span><span class="token punctuation brackets-square" >[</span><span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >,</span> users<span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >hasFinalState</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >run</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<h3 class="header"><a class="header-anchor" href="#available-effect-assertions" id="available-effect-assertions"></a><span class="text">Available Effect Assertions</span><a class="header-anchor-select" href="#available-effect-assertions">#</a></h3>
<p>Here are the other effect assertions available for testing.</p>
<ul>
<li><code>take(pattern)</code></li>
<li><code>take.maybe(pattern)</code></li>
<li><code>put(action)</code></li>
<li><code>put.resolve(action)</code></li>
<li><code>call(fn, ...args)</code></li>
<li><code>call([context, fn], ...args)</code></li>
<li><code>apply(context, fn, args)</code></li>
<li><code>cps(fn, ...args)</code></li>
<li><code>cps([context, fn], ...args)</code></li>
<li><code>fork(fn, ...args)</code></li>
<li><code>fork([context, fn], ...args)</code></li>
<li><code>spawn(fn, ...args)</code></li>
<li><code>spawn([context, fn], ...args)</code></li>
<li><code>join(task)</code></li>
<li><code>select(selector, ...args)</code></li>
<li><code>actionChannel(pattern, [buffer])</code></li>
<li><code>race(effects)</code></li>
</ul>
<h3 class="header"><a class="header-anchor" href="#other-features" id="other-features"></a><span class="text">Other Features</span><a class="header-anchor-select" href="#other-features">#</a></h3>
<ul>
<li><a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/snapshot-testing.html">Snapshot testing</a></li>
<li><a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/partial-matching.html">Partial assertions</a></li>
<li><a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/partial-matching.html">Negated assertions</a></li>
<li><a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/return-value.html">Assert a saga&#39;s return value</a></li>
</ul>
<h2 class="header"><a class="header-anchor" href="#how-does-_redux-saga-test-plan_-differ-from-other-solutions-" id="how-does-_redux-saga-test-plan_-differ-from-other-solutions-"></a><span class="text">How does <em>redux-saga-test-plan</em> differ from other solutions?</span><a class="header-anchor-select" href="#how-does-_redux-saga-test-plan_-differ-from-other-solutions-">#</a></h2>
<ul>
<li>Only test the effects you&#39;re interested in with <code>expectSaga</code>. You don&#39;t have to manually iterate through your saga&#39;s yielded effects, which decouples your test from the implementation.</li>
<li>A declarative, chainable API with less setup for testing sagas. Other options that I&#39;ve seen use imperative APIs with more setup steps and only let you test certain effects.</li>
<li>One of the few saga testing libraries that lets you also test your Redux reducers.</li>
<li>Test forked sagas many layers deep.</li>
<li>Built-in mocking with <a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/mocking/static-providers.html">static</a> and <a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/mocking/dynamic-providers.html">dynamic</a> providers.</li>
<li><a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/partial-matching.html">Negated assertions</a>. You can test that your saga did <strong>not</strong> yield a particular effect.</li>
<li><a href="https://redux-saga-test-plan.jeremyfairbank.com/integration-testing/partial-matching.html">Partial assertions</a>. For example, you can test that your saga <code>put</code> a particular <code>type</code> of action without worrying about the action payload.</li>
</ul>
<h2 class="header"><a class="header-anchor" href="#why-did-you-develop-_redux-saga-test-plan_-" id="why-did-you-develop-_redux-saga-test-plan_-"></a><span class="text">Why did you develop <em>redux-saga-test-plan</em>?</span><a class="header-anchor-select" href="#why-did-you-develop-_redux-saga-test-plan_-">#</a></h2>
<p>I grew tired of manually testing sagas by iterating through yielded effects like this:</p>
<pre><code class="lang-javascript"><span class="token keyword keyword-function" >function</span><span class="token operator" >*</span> <span class="token function" >fetchUsersSaga</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token keyword keyword-yield" >yield</span> <span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
  <span class="token keyword keyword-yield" >yield</span> <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span>

<span class="token function" >it</span><span class="token punctuation brackets-parentheses" >(</span><span class="token string" >"fetches users"</span><span class="token punctuation" >,</span> <span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span> <span class="token operator" >=&gt;</span> <span class="token punctuation brackets-braces" >{</span>
  <span class="token keyword keyword-const" >const</span> users <span class="token operator" >=</span> <span class="token punctuation brackets-square" >[</span><span class="token string" >"Jeremy"</span><span class="token punctuation" >,</span> <span class="token string" >"Tucker"</span><span class="token punctuation brackets-square" >]</span><span class="token punctuation" >;</span>
  <span class="token keyword keyword-const" >const</span> iter <span class="token operator" >=</span> <span class="token function" >fetchUsersSaga</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  <span class="token function" >expect</span><span class="token punctuation brackets-parentheses" >(</span>iter<span class="token punctuation" >.</span><span class="token function" >next</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span>value<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >toEqual</span><span class="token punctuation brackets-parentheses" >(</span><span class="token function" >call</span><span class="token punctuation brackets-parentheses" >(</span>api<span class="token punctuation" >.</span>getUsers<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>

  <span class="token function" >expect</span><span class="token punctuation brackets-parentheses" >(</span>iter<span class="token punctuation" >.</span><span class="token function" >next</span><span class="token punctuation brackets-parentheses" >(</span>users<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span>value<span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >.</span><span class="token function" >toEqual</span><span class="token punctuation brackets-parentheses" >(</span>
    <span class="token function" >put</span><span class="token punctuation brackets-parentheses" >(</span><span class="token punctuation brackets-braces" >{</span> type<span class="token punctuation" >:</span> <span class="token string" >"FETCH_USERS_SUCCESS"</span><span class="token punctuation" >,</span> payload<span class="token punctuation" >:</span> users <span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span>
  <span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation brackets-braces" >}</span><span class="token punctuation brackets-parentheses" >)</span><span class="token punctuation" >;</span>
</code></pre>
<p>These tests took long to write and coupled the test to the implementation. One small change in the order of effects would break a test even if the change didn&#39;t change the saga&#39;s overall behavior. Ironically, I created a <a href="https://redux-saga-test-plan.jeremyfairbank.com/unit-testing/">testSaga API</a> that took some of that boilerplate away but still coupled tests to their implementation.</p>
<p>I finally set out to create a more user-friendly API that removed most of the boilerplate and let you focus on testing the behavior you were most interested, and this is how <code>expectSaga</code> was born.</p>
<h2 class="header"><a class="header-anchor" href="#what-next-" id="what-next-"></a><span class="text">What next?</span><a class="header-anchor-select" href="#what-next-">#</a></h2>
<p>Writing my Elm book is currently consuming a lot of my time, so I&#39;ve had to take a short break from <em>redux-saga-test-plan</em>. However, the next big plan is to support redux-saga v1, which adds support for effect middlewares. Effect middlewares let you intercept effects to return a mock value. I hope to simplify <code>expectSaga</code>&#39;s implementation of providers with effect middlewares.</p>
<p>There&#39;s a nice backlog of issues for other cool features like new helpful assertions and integrating with a full Redux store too.</p>
<p>Contributors are welcome!</p>
<h2 class="header"><a class="header-anchor" href="#what-does-the-future-look-like-for-_redux-saga-test-plan_-and-web-development-in-general-can-you-see-any-particular-trends-" id="what-does-the-future-look-like-for-_redux-saga-test-plan_-and-web-development-in-general-can-you-see-any-particular-trends-"></a><span class="text">What does the future look like for <em>redux-saga-test-plan</em> and web development in general? Can you see any particular trends?</span><a class="header-anchor-select" href="#what-does-the-future-look-like-for-_redux-saga-test-plan_-and-web-development-in-general-can-you-see-any-particular-trends-">#</a></h2>
<p>I&#39;m not entirely sure because it depends on the life of redux-saga. <a href="https://github.com/Andarist">Mateusz Burzyński</a> and all the contributors have been doing a great job maintaining it. It&#39;s a great sign that they&#39;re working toward v1. But front-end development can move and change so fast. For example, we&#39;ve seen a massive rise in the popularity of <a href="https://github.com/ReactiveX/rxjs">RxJS</a> and <a href="https://github.com/redux-observable/redux-observable">redux-observable</a>.</p>
<p>As long as there is broad support for redux-saga in front-end applications, I think <em>redux-saga-test-plan</em> will stick around and fill a much-needed testing niche. Testing saga generators is hard, so <em>redux-saga-test-plan</em> will hopefully continue to make it easy. That being said, I don&#39;t always get to use redux-saga with my client projects, so I could use the support of other contributors to make <em>redux-saga-test-plan</em> the best it can be for testing.</p>
<p>As far as trends, I think front-end development is heading toward better maintainability and safety with static typing. Elm, TypeScript, and Flow are making it easier to build robust front-end applications. Static types can catch so many simple bugs and mistakes to help you refactor code more confidently.</p>
<h2 class="header"><a class="header-anchor" href="#what-advice-would-you-give-to-programmers-getting-into-web-development-" id="what-advice-would-you-give-to-programmers-getting-into-web-development-"></a><span class="text">What advice would you give to programmers getting into web development?</span><a class="header-anchor-select" href="#what-advice-would-you-give-to-programmers-getting-into-web-development-">#</a></h2>
<p>You don&#39;t need to keep up with every new library and framework coming out. Focus on a stack that you like and build fantastic software. Don&#39;t let others make you feel like you&#39;re not a real developer because you&#39;re not up-to-date with the latest JavaScript framework. What&#39;s most important is understanding the language you&#39;re working with and how to stick to good software engineering practices. Find a mentor that&#39;s empathetic and eager to help you.</p>
<p>Also, ask to speak at a meetup or submit to a conference. You&#39;d be surprised how many people sometimes aren&#39;t experts on the topics they share (I&#39;ve been there for sure). You can share the pain points you experienced learning a technology and offer your unique perspective on what you love about it. Then, you can inspire and empower other newcomers.</p>
<h2 class="header"><a class="header-anchor" href="#who-should-i-interview-next-" id="who-should-i-interview-next-"></a><span class="text">Who should I interview next?</span><a class="header-anchor-select" href="#who-should-i-interview-next-">#</a></h2>
<p>I might be a little biased because I work for Test Double, but you should interview <a href="https://twitter.com/searls">Justin Searls</a>. He speaks a lot about testing, and his insight is something the JavaScript world would greatly benefit from. He maintains our awesome test double library <a href="https://github.com/testdouble/testdouble.js">testdouble.js</a>, which has transformed how I think about mocking in tests.</p>
<h2 class="header"><a class="header-anchor" href="#conclusion" id="conclusion"></a><span class="text">Conclusion</span><a class="header-anchor-select" href="#conclusion">#</a></h2>
<p>Thanks for the interview Jeremy! <em>redux-saga-test-plan</em> seems to complement <em>redux-saga</em> well.</p>
<p>You can learn more from <a href="http://redux-saga-test-plan.jeremyfairbank.com/">the redux-saga-test-plan site</a> and <a href="https://github.com/jfairbank/redux-saga-test-plan">redux-saga-test-plan GitHub page</a>.</p>
</div><time dateTime="2017-12-20T00:00:00.000Z" class="post__moment">20 Dec 2017</time><div class="post__author"><a href="https://twitter.com/bebraw">Juho Vepsäläinen</a></div></div><div class="page__section"><div class="social-links"><h2 class="social-links__header">Subscribe to the blog updates</h2><blockquote class="tip social-links__tip">If you enjoyed this blog post, consider subscribing to the mailing list below or following <a href="https://twitter.com/survivejs">@survivejs</a> for occasional updates. There is also <a href="/atom.xml">RSS</a> available for old beards (no pun intended).</blockquote><form action="//jster.us7.list-manage.com/subscribe/post?u=ed40c0084a0c5ba31b3365d65&amp;id=b853b8e786" method="post" target="_blank" class="css-1nfeoes css-va8n550"><input type="email" class="css-baseStyle-s4lgck css-inputStyle-16d70pc" placeholder="Email" name="EMAIL" id="mce-EMAIL" required=""/><div style="display:none;position:absolute;left:-5000px"><input type="text" name="b_ed40c0084a0c5ba31b3365d65_b853b8e786" tabindex="-1" value=""/></div><input type="submit" class="css-baseStyle-s4lgck css-buttonStyle-1y781j1" value="Subscribe" name="subscribe"/></form></div><div class="css-r9vozr css-7ic71f0"><div class="css-panel-1asgzqv css-panelPrev-h368eu"><div class="css-1njlj0m css-7ic71f1">Previous post</div><a class="css-link-h8hsyv css-linkPrev-966ksh" href="/blog/redux-form-interview/">Redux Form - The best way to manage your form state in Redux - Interview with Erik Rasmussen</a></div><div class="css-panel-1asgzqv css-panelNext-1i6c957"><div class="css-1njlj0m css-7ic71f1">Next post</div><a class="css-link-h8hsyv css-linkNext-1a0mc68" href="/blog/react-finland-interview/">React Finland - Your Chance to Learn React Up North - Interview with Juho Vepsäläinen</a></div></div><div id="disqus_thread"></div><script type="text/javascript">var disqus_shortname = 'survivejs';(function() {var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script></div></div></div></div><footer class="css-eo7znu css-iscbe10"><ul class="css-jtawwa css-iscbe13 css-6482o6 css-3yjlwf0"><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://twitter.com/survivejs" target="_blank" rel="noopener noreferrer">@survivejs</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://eepurl.com/bth1v5" target="_blank" rel="noopener noreferrer">Mailing List</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://gitter.im/survivejs" target="_blank" rel="noopener noreferrer">Gitter Chat</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs" target="_blank" rel="noopener noreferrer">GitHub</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://presentations.survivejs.com" target="_blank" rel="noopener noreferrer">Presentations</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="http://goo.gl/forms/OWdGIOdHm9" target="_blank" rel="noopener noreferrer">Contact</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="https://github.com/survivejs/ama/issues" target="_blank" rel="noopener noreferrer">Ask Me Anything</a></li><li class="css-haw22i css-iscbe14 css-10ozgd1 css-17pd6qu0"><a href="/atom.xml" target="_blank" rel="noopener noreferrer">RSS</a></li></ul><div class="css-1gd1yml css-iscbe11"><h3 class="css-oi3rzz css-iscbe12">From the Blog</h3><ul class="blog-teasers"><li><a class="blog-teaser" href="/blog/graphql-finland-interview/">GraphQL Finland - Learn GraphQL Up North - Interview with Mikhail Novikov</a></li><li><a class="blog-teaser" href="/blog/pwa-interview/">Progressive Web Apps - The Why and How - Interview with Maciej Caputa</a></li><li><a class="blog-teaser" href="/blog/proppy-interview/">Proppy - Functional props composition for components - Interview with Fahad Ibnay Heylaal</a></li><li><a class="blog-teaser" href="/blog/summer-2018-events/">SurviveJS - Summer Events</a></li><li><a class="blog-teaser" href="/blog/fastpack-interview/">Fastpack - Pack JavaScript code fast and easy - Interview with Oleksiy Golovko</a></li><li><a class="blog-teaser" href="/blog/lint-staged-interview/">lint-staged - Run Linters on git Staged Files - Interview with Andrey Okonetchnikov</a></li><li><a class="blog-teaser" href="/blog/webpack-book-updated-to-webpack-4/">&quot;SurviveJS - Webpack&quot; Updated to webpack 4</a></li></ul></div><ul aria-label="Other Juho&#x27;s books" class="css-6482o6 css-3yjlwf0"><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/maintenance/introduction"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - Maintenance: Streamline JavaScript Workflow</h4><img alt="Maintenance book cover" src="/2900d9b74e46ac6cdf984148c1a0c631.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-maintenance">Buy at Leanpub</a></li><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/react/introduction"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - React: From apprentice to master</h4><img alt="React book cover" src="/2412b7150d25c1dc3c309666132bc26e.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-react">Buy at Leanpub</a></li><li class="css-jtawwa css-nbe2jc1 css-10ozgd1 css-17pd6qu0"><a href="/webpack/foreword"><h4 class="css-i1gwhw css-nbe2jc0">SurviveJS - Webpack: From apprentice to master</h4><img alt="Webpack book cover" src="/20cf3367cf445212a90411ccd2282229.svg" width="255" height="329" class="css-1d87hyi css-nbe2jc2"/></a><a class="btn btn--normal css-button-v0k0bo" href="https://leanpub.com/survivejs-webpack">Buy at Leanpub</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/9526868803/">Buy at Amazon</a><a class="btn btn--normal css-button-v0k0bo" href="https://www.amazon.com/dp/B06XWZZGBS">Buy for Kindle</a></li></ul></footer><div><div class="gitter-open-chat-button">Need help?</div><script type="text/javascript">
          ((window.gitter = {}).chat = {}).options = {
            showChatByDefault: false,
            activationElement: '.gitter-open-chat-button',
            room: 'survivejs/react'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="" defer=""></script></div>

    
  </body>
</html>
